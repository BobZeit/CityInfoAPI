2023-11-28 16:37:47.666 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-28 16:37:47.897 +01:00 [DBG] Hosting starting
2023-11-28 16:37:48.591 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-28 16:37:48.675 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-28 16:37:48.676 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-28 16:37:48.677 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-28 16:37:48.678 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-28 16:37:48.679 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-28 16:37:48.680 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-28 16:37:48.681 +01:00 [INF] Hosting environment: Development
2023-11-28 16:37:48.682 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-28 16:37:48.683 +01:00 [DBG] Hosting started
2023-11-28 16:37:48.848 +01:00 [DBG] Connection id "0HMVG4VSSQTE2" accepted.
2023-11-28 16:37:48.848 +01:00 [DBG] Connection id "0HMVG4VSSQTE1" accepted.
2023-11-28 16:37:48.851 +01:00 [DBG] Connection id "0HMVG4VSSQTE1" started.
2023-11-28 16:37:48.851 +01:00 [DBG] Connection id "0HMVG4VSSQTE2" started.
2023-11-28 16:37:49.634 +01:00 [DBG] Connection id "0HMVG4VSSQTE3" accepted.
2023-11-28 16:37:49.648 +01:00 [DBG] Connection id "0HMVG4VSSQTE3" started.
2023-11-28 16:37:49.773 +01:00 [DBG] Connection 0HMVG4VSSQTE3 established using the following protocol: "Tls12"
2023-11-28 16:37:49.875 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-28 16:37:50.241 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-28 16:37:50.470 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-28 16:37:50.515 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-28 16:37:50.531 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 663.4951ms
2023-11-28 16:37:50.537 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-28 16:37:50.537 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-28 16:37:50.573 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 36.1371ms
2023-11-28 16:37:50.679 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 142.1895ms
2023-11-28 16:37:50.751 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-28 16:37:50.974 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 223.2053ms
2023-11-28 16:37:57.645 +01:00 [DBG] Connection id "0HMVG4VSSQTE4" accepted.
2023-11-28 16:37:57.646 +01:00 [DBG] Connection id "0HMVG4VSSQTE4" started.
2023-11-28 16:37:57.647 +01:00 [DBG] Connection id "0HMVG4VSSQTE5" accepted.
2023-11-28 16:37:57.647 +01:00 [DBG] Connection id "0HMVG4VSSQTE4" received FIN.
2023-11-28 16:37:57.651 +01:00 [DBG] Connection id "0HMVG4VSSQTE5" started.
2023-11-28 16:37:57.658 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 16:37:57.662 +01:00 [DBG] Connection 0HMVG4VSSQTE5 established using the following protocol: "Tls12"
2023-11-28 16:37:57.805 +01:00 [DBG] Connection id "0HMVG4VSSQTE4" stopped.
2023-11-28 16:37:57.809 +01:00 [DBG] Connection id "0HMVG4VSSQTE4" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 16:37:57.817 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-28 16:37:57.821 +01:00 [DBG] The request path  does not match the path filter
2023-11-28 16:37:57.864 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-28 16:37:57.872 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-28 16:37:57.876 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-28 16:37:57.884 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-28 16:37:57.942 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-28 16:37:57.948 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-28 16:37:57.950 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-28 16:37:57.953 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-28 16:37:57.958 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-28 16:37:57.961 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-28 16:37:57.965 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-28 16:37:58.657 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-28 16:37:58.882 +01:00 [DBG] Authentication of the HTTPS connection timed out.
2023-11-28 16:37:58.882 +01:00 [DBG] Authentication of the HTTPS connection timed out.
2023-11-28 16:37:58.883 +01:00 [DBG] Connection id "0HMVG4VSSQTE1" stopped.
2023-11-28 16:37:58.884 +01:00 [DBG] Connection id "0HMVG4VSSQTE2" stopped.
2023-11-28 16:37:58.885 +01:00 [DBG] Connection id "0HMVG4VSSQTE1" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 16:37:58.886 +01:00 [DBG] Connection id "0HMVG4VSSQTE2" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 16:37:58.953 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-28 16:37:58.969 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-28 16:37:58.972 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-28 16:37:58.975 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 16:37:58.977 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 16:37:58.978 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-28 16:37:58.982 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-28 16:37:58.986 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-28 16:37:58.988 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-28 16:37:58.991 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-28 16:37:58.992 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-28 16:37:58.994 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-28 16:37:58.996 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-28 16:38:00.279 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-28 16:38:00.405 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-28 16:38:00.566 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-28 16:38:01.291 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-28 16:38:01.473 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 16:38:02.016 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (536ms).
2023-11-28 16:38:02.043 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 16:38:02.075 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 16:38:02.099 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-28 16:38:02.142 +01:00 [INF] Executed DbCommand (49ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-28 16:38:02.172 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 16:38:02.217 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 16:38:02.241 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 16:38:02.256 +01:00 [DBG] A data reader was disposed.
2023-11-28 16:38:02.269 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 16:38:02.277 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 16:38:02.280 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-28 16:38:02.283 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-28 16:38:02.293 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-28 16:38:02.297 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 16:38:02.299 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-28 16:38:02.300 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 16:38:02.301 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 16:38:02.303 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-28 16:38:02.306 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-28 16:38:02.310 +01:00 [DBG] A data reader was disposed.
2023-11-28 16:38:02.311 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 16:38:02.313 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 16:38:02.317 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-28 16:38:02.322 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-28 16:38:02.323 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-28 16:38:02.325 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-28 16:38:02.326 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-28 16:38:02.328 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-28 16:38:02.591 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 4621.1383ms
2023-11-28 16:38:02.594 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-28 16:38:02.595 +01:00 [DBG] Connection id "0HMVG4VSSQTE5" completed keep alive response.
2023-11-28 16:38:02.602 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-28 16:38:02.609 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 273 application/json;+charset=utf-8 4791.7489ms
2023-11-28 16:48:13.500 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-28 16:48:13.605 +01:00 [DBG] Hosting starting
2023-11-28 16:48:13.728 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-28 16:48:13.773 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-28 16:48:13.774 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-28 16:48:13.775 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-28 16:48:13.776 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-28 16:48:13.777 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-28 16:48:13.778 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-28 16:48:13.778 +01:00 [INF] Hosting environment: Development
2023-11-28 16:48:13.779 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-28 16:48:13.780 +01:00 [DBG] Hosting started
2023-11-28 16:48:14.160 +01:00 [DBG] Connection id "0HMVG55N89CNK" accepted.
2023-11-28 16:48:14.161 +01:00 [DBG] Connection id "0HMVG55N89CNL" accepted.
2023-11-28 16:48:14.162 +01:00 [DBG] Connection id "0HMVG55N89CNL" started.
2023-11-28 16:48:14.162 +01:00 [DBG] Connection id "0HMVG55N89CNK" started.
2023-11-28 16:48:14.193 +01:00 [DBG] Connection id "0HMVG55N89CNK" received FIN.
2023-11-28 16:48:14.193 +01:00 [DBG] Connection id "0HMVG55N89CNL" received FIN.
2023-11-28 16:48:14.212 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 16:48:14.212 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 16:48:14.246 +01:00 [DBG] Connection id "0HMVG55N89CNL" stopped.
2023-11-28 16:48:14.246 +01:00 [DBG] Connection id "0HMVG55N89CNK" stopped.
2023-11-28 16:48:14.249 +01:00 [DBG] Connection id "0HMVG55N89CNK" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 16:48:14.249 +01:00 [DBG] Connection id "0HMVG55N89CNL" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 16:48:18.252 +01:00 [DBG] Connection id "0HMVG55N89CNM" accepted.
2023-11-28 16:48:18.254 +01:00 [DBG] Connection id "0HMVG55N89CNM" started.
2023-11-28 16:48:18.306 +01:00 [DBG] Connection 0HMVG55N89CNM established using the following protocol: "Tls12"
2023-11-28 16:48:18.369 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-28 16:48:18.509 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-28 16:48:18.630 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-28 16:48:18.651 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-28 16:48:18.658 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 292.9068ms
2023-11-28 16:48:18.673 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-28 16:48:18.673 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-28 16:48:18.682 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 8.4001ms
2023-11-28 16:48:18.750 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 77.2765ms
2023-11-28 16:48:18.797 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-28 16:48:18.977 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 179.6845ms
2023-11-28 16:48:32.069 +01:00 [DBG] Connection id "0HMVG55N89CNN" accepted.
2023-11-28 16:48:32.070 +01:00 [DBG] Connection id "0HMVG55N89CNN" received FIN.
2023-11-28 16:48:32.070 +01:00 [DBG] Connection id "0HMVG55N89CNN" started.
2023-11-28 16:48:32.071 +01:00 [DBG] Connection id "0HMVG55N89CNO" accepted.
2023-11-28 16:48:32.074 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 16:48:32.075 +01:00 [DBG] Connection id "0HMVG55N89CNO" started.
2023-11-28 16:48:32.081 +01:00 [DBG] Connection id "0HMVG55N89CNN" stopped.
2023-11-28 16:48:32.083 +01:00 [DBG] Connection id "0HMVG55N89CNN" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 16:48:32.088 +01:00 [DBG] Connection 0HMVG55N89CNO established using the following protocol: "Tls12"
2023-11-28 16:48:32.104 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2/pointofinterests - -
2023-11-28 16:48:32.108 +01:00 [DBG] The request path  does not match the path filter
2023-11-28 16:48:32.144 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointofinterests'
2023-11-28 16:48:32.149 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterests (NewCityInfo.API)' with route pattern 'api/cities/{cityId}/pointofinterests' is valid for the request path '/api/cities/2/pointofinterests'
2023-11-28 16:48:32.151 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterests (NewCityInfo.API)'
2023-11-28 16:48:32.155 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterests (NewCityInfo.API)'
2023-11-28 16:48:32.191 +01:00 [INF] Route matched with {action = "GetPointOfInterests", controller = "PointOfInterests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[NewCityInfo.API.Models.PointOfInterestDto]]] GetPointOfInterests(Int32) on controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API).
2023-11-28 16:48:32.195 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-28 16:48:32.197 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-28 16:48:32.198 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-28 16:48:32.200 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-28 16:48:32.201 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-28 16:48:32.204 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 16:48:32.368 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-28 16:48:32.587 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 16:48:32.594 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-28 16:48:32.597 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-28 16:48:32.600 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 16:48:32.601 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 16:48:32.603 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-28 16:48:32.606 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-28 16:48:33.654 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-28 16:48:33.733 +01:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .OrderBy(p => p.Name)
    .Where(c => c.CityId == __cityId_0)'
2023-11-28 16:48:34.168 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) Required MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointOfInterests AS p
        WHERE p.CityId == @__cityId_0
        ORDER BY p.Name ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    NewCityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-11-28 16:48:34.246 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 16:48:34.313 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (63ms).
2023-11-28 16:48:34.330 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 16:48:34.353 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 16:48:34.375 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterests" AS "p"
WHERE "p"."CityId" = @__cityId_0
ORDER BY "p"."Name"
2023-11-28 16:48:34.408 +01:00 [INF] Executed DbCommand (39ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterests" AS "p"
WHERE "p"."CityId" = @__cityId_0
ORDER BY "p"."Name"
2023-11-28 16:48:34.432 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 16:48:34.464 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 16:48:34.475 +01:00 [DBG] A data reader was disposed.
2023-11-28 16:48:34.484 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 16:48:34.491 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 16:48:34.522 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-28 16:48:34.527 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-28 16:48:34.528 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-28 16:48:34.530 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-28 16:48:34.531 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-28 16:48:34.533 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Models.PointOfInterestDto, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-28 16:48:34.701 +01:00 [INF] Executed action NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterests (NewCityInfo.API) in 2492.765ms
2023-11-28 16:48:34.704 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterests (NewCityInfo.API)'
2023-11-28 16:48:34.706 +01:00 [DBG] Connection id "0HMVG55N89CNO" completed keep alive response.
2023-11-28 16:48:34.714 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-28 16:48:34.720 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2/pointofinterests - - - 200 167 application/json;+charset=utf-8 2615.0538ms
2023-11-28 16:48:40.967 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/4/pointofinterests - -
2023-11-28 16:48:40.969 +01:00 [DBG] The request path  does not match the path filter
2023-11-28 16:48:40.971 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/4/pointofinterests'
2023-11-28 16:48:40.973 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterests (NewCityInfo.API)' with route pattern 'api/cities/{cityId}/pointofinterests' is valid for the request path '/api/cities/4/pointofinterests'
2023-11-28 16:48:40.975 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterests (NewCityInfo.API)'
2023-11-28 16:48:40.977 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterests (NewCityInfo.API)'
2023-11-28 16:48:40.979 +01:00 [INF] Route matched with {action = "GetPointOfInterests", controller = "PointOfInterests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[NewCityInfo.API.Models.PointOfInterestDto]]] GetPointOfInterests(Int32) on controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API).
2023-11-28 16:48:40.983 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-28 16:48:40.984 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-28 16:48:40.986 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-28 16:48:40.989 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-28 16:48:40.991 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-28 16:48:40.993 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 16:48:41.007 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 16:48:41.010 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-28 16:48:41.012 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-28 16:48:41.014 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 16:48:41.016 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 16:48:41.018 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-28 16:48:41.020 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-28 16:48:41.024 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-28 16:48:41.033 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 16:48:41.034 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-28 16:48:41.036 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 16:48:41.038 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 16:48:41.040 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterests" AS "p"
WHERE "p"."CityId" = @__cityId_0
ORDER BY "p"."Name"
2023-11-28 16:48:41.044 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterests" AS "p"
WHERE "p"."CityId" = @__cityId_0
ORDER BY "p"."Name"
2023-11-28 16:48:41.048 +01:00 [DBG] A data reader was disposed.
2023-11-28 16:48:41.049 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 16:48:41.051 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 16:48:41.053 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-28 16:48:41.057 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-28 16:48:41.058 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-28 16:48:41.060 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-28 16:48:41.061 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-28 16:48:41.063 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Models.PointOfInterestDto, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-28 16:48:41.066 +01:00 [INF] Executed action NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterests (NewCityInfo.API) in 72.5977ms
2023-11-28 16:48:41.068 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterests (NewCityInfo.API)'
2023-11-28 16:48:41.070 +01:00 [DBG] Connection id "0HMVG55N89CNO" completed keep alive response.
2023-11-28 16:48:41.071 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-28 16:48:41.073 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/4/pointofinterests - - - 200 2 application/json;+charset=utf-8 105.5698ms
2023-11-28 16:48:43.785 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointofinterests - -
2023-11-28 16:48:43.786 +01:00 [DBG] The request path  does not match the path filter
2023-11-28 16:48:43.787 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointofinterests'
2023-11-28 16:48:43.789 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterests (NewCityInfo.API)' with route pattern 'api/cities/{cityId}/pointofinterests' is valid for the request path '/api/cities/1/pointofinterests'
2023-11-28 16:48:43.791 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterests (NewCityInfo.API)'
2023-11-28 16:48:43.793 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterests (NewCityInfo.API)'
2023-11-28 16:48:43.794 +01:00 [INF] Route matched with {action = "GetPointOfInterests", controller = "PointOfInterests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[NewCityInfo.API.Models.PointOfInterestDto]]] GetPointOfInterests(Int32) on controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API).
2023-11-28 16:48:43.797 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-28 16:48:43.799 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-28 16:48:43.801 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-28 16:48:43.803 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-28 16:48:43.805 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-28 16:48:43.808 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 16:48:43.813 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 16:48:43.816 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-28 16:48:43.817 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-28 16:48:43.819 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 16:48:43.821 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 16:48:43.823 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-28 16:48:43.825 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-28 16:48:43.895 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-28 16:48:43.899 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 16:48:43.900 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-28 16:48:43.901 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 16:48:43.903 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 16:48:43.904 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterests" AS "p"
WHERE "p"."CityId" = @__cityId_0
ORDER BY "p"."Name"
2023-11-28 16:48:43.908 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterests" AS "p"
WHERE "p"."CityId" = @__cityId_0
ORDER BY "p"."Name"
2023-11-28 16:48:43.911 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 16:48:43.913 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 16:48:43.915 +01:00 [DBG] A data reader was disposed.
2023-11-28 16:48:43.916 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 16:48:43.917 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 16:48:43.919 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-28 16:48:43.922 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-28 16:48:43.923 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-28 16:48:43.924 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-28 16:48:43.925 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-28 16:48:43.927 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Models.PointOfInterestDto, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-28 16:48:43.929 +01:00 [INF] Executed action NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterests (NewCityInfo.API) in 120.5188ms
2023-11-28 16:48:43.930 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterests (NewCityInfo.API)'
2023-11-28 16:48:43.932 +01:00 [DBG] Connection id "0HMVG55N89CNO" completed keep alive response.
2023-11-28 16:48:43.933 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-28 16:48:43.934 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointofinterests - - - 200 167 application/json;+charset=utf-8 149.2640ms
2023-11-28 17:14:37.617 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-28 17:14:37.732 +01:00 [DBG] Hosting starting
2023-11-28 17:14:37.856 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-28 17:14:37.904 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-28 17:14:37.905 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-28 17:14:37.915 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-28 17:14:37.916 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-28 17:14:37.917 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-28 17:14:37.918 +01:00 [DBG] Connection id "0HMVG5KF86OTF" received FIN.
2023-11-28 17:14:37.918 +01:00 [DBG] Connection id "0HMVG5KF86OTG" received FIN.
2023-11-28 17:14:37.918 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-28 17:14:37.921 +01:00 [INF] Hosting environment: Development
2023-11-28 17:14:37.922 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-28 17:14:37.923 +01:00 [DBG] Hosting started
2023-11-28 17:14:37.929 +01:00 [DBG] Connection id "0HMVG5KF86OTG" accepted.
2023-11-28 17:14:37.929 +01:00 [DBG] Connection id "0HMVG5KF86OTF" accepted.
2023-11-28 17:14:37.931 +01:00 [DBG] Connection id "0HMVG5KF86OTF" started.
2023-11-28 17:14:37.931 +01:00 [DBG] Connection id "0HMVG5KF86OTG" started.
2023-11-28 17:14:37.948 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 17:14:37.948 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 17:14:37.985 +01:00 [DBG] Connection id "0HMVG5KF86OTG" stopped.
2023-11-28 17:14:37.985 +01:00 [DBG] Connection id "0HMVG5KF86OTF" stopped.
2023-11-28 17:14:37.991 +01:00 [DBG] Connection id "0HMVG5KF86OTF" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 17:14:37.991 +01:00 [DBG] Connection id "0HMVG5KF86OTG" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 17:14:38.024 +01:00 [DBG] Connection id "0HMVG5KF86OTH" accepted.
2023-11-28 17:14:38.028 +01:00 [DBG] Connection id "0HMVG5KF86OTH" started.
2023-11-28 17:14:38.103 +01:00 [DBG] Connection 0HMVG5KF86OTH established using the following protocol: "Tls12"
2023-11-28 17:14:38.251 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-28 17:14:38.409 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-28 17:14:38.514 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-28 17:14:38.539 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-28 17:14:38.546 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 314.2716ms
2023-11-28 17:14:38.555 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-28 17:14:38.562 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 6.5980ms
2023-11-28 17:14:38.568 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-28 17:14:38.629 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 60.3883ms
2023-11-28 17:14:38.670 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-28 17:14:38.810 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 140.2105ms
2023-11-28 17:14:40.486 +01:00 [DBG] Connection id "0HMVG5KF86OTI" accepted.
2023-11-28 17:14:40.487 +01:00 [DBG] Connection id "0HMVG5KF86OTI" started.
2023-11-28 17:14:40.488 +01:00 [DBG] Connection id "0HMVG5KF86OTI" received FIN.
2023-11-28 17:14:40.488 +01:00 [DBG] Connection id "0HMVG5KF86OTJ" accepted.
2023-11-28 17:14:40.491 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 17:14:40.492 +01:00 [DBG] Connection id "0HMVG5KF86OTJ" started.
2023-11-28 17:14:40.498 +01:00 [DBG] Connection id "0HMVG5KF86OTI" stopped.
2023-11-28 17:14:40.500 +01:00 [DBG] Connection id "0HMVG5KF86OTI" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 17:14:40.508 +01:00 [DBG] Connection 0HMVG5KF86OTJ established using the following protocol: "Tls12"
2023-11-28 17:14:40.519 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointofinterests/2 - -
2023-11-28 17:14:40.523 +01:00 [DBG] The request path  does not match the path filter
2023-11-28 17:14:40.548 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointofinterests/2'
2023-11-28 17:14:40.554 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)' with route pattern 'api/cities/{cityId}/pointofinterests/{pointOfInterestId}' is valid for the request path '/api/cities/1/pointofinterests/2'
2023-11-28 17:14:40.556 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)'
2023-11-28 17:14:40.560 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)'
2023-11-28 17:14:40.589 +01:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointOfInterests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[NewCityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API).
2023-11-28 17:14:40.593 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-28 17:14:40.594 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-28 17:14:40.596 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-28 17:14:40.598 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-28 17:14:40.599 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-28 17:14:40.602 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 17:14:40.748 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-28 17:14:40.917 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 17:14:40.923 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-28 17:14:40.927 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-28 17:14:40.929 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 17:14:40.932 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 17:14:40.936 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-28 17:14:40.939 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-28 17:14:40.944 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-11-28 17:14:40.947 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-11-28 17:14:40.950 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 17:14:40.952 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 17:14:40.954 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-11-28 17:14:40.957 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 17:14:41.977 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-28 17:14:42.045 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2023-11-28 17:14:42.384 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-28 17:14:42.455 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 17:14:42.520 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (59ms).
2023-11-28 17:14:42.536 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 17:14:42.556 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 17:14:42.573 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 17:14:42.604 +01:00 [INF] Executed DbCommand (35ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 17:14:42.619 +01:00 [DBG] A data reader was disposed.
2023-11-28 17:14:42.628 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 17:14:42.635 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 17:14:42.640 +01:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .OrderBy(p => p.Name)
    .Where(p => p.Id == __pointOfinterestId_0 && p.CityId == __cityId_1)
    .FirstOrDefault()'
2023-11-28 17:14:42.690 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterest>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) Required MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointOfInterests AS p
            WHERE (p.Id == @__pointOfinterestId_0) && (p.CityId == @__cityId_1)
            ORDER BY p.Name ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-28 17:14:42.710 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 17:14:42.711 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-28 17:14:42.712 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 17:14:42.714 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 17:14:42.716 +01:00 [DBG] Executing DbCommand [Parameters=[@__pointOfinterestId_0='?' (DbType = Int32), @__cityId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterests" AS "p"
WHERE ("p"."Id" = @__pointOfinterestId_0) AND ("p"."CityId" = @__cityId_1)
ORDER BY "p"."Name"
LIMIT 1
2023-11-28 17:14:42.720 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__pointOfinterestId_0='?' (DbType = Int32), @__cityId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterests" AS "p"
WHERE ("p"."Id" = @__pointOfinterestId_0) AND ("p"."CityId" = @__cityId_1)
ORDER BY "p"."Name"
LIMIT 1
2023-11-28 17:14:42.740 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 17:14:42.774 +01:00 [DBG] A data reader was disposed.
2023-11-28 17:14:42.775 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 17:14:42.776 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 17:14:42.790 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-28 17:14:42.796 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-28 17:14:42.797 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-28 17:14:42.798 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-28 17:14:42.800 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-28 17:14:42.802 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.PointOfInterestDto'.
2023-11-28 17:14:42.946 +01:00 [INF] Executed action NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API) in 2339.9584ms
2023-11-28 17:14:42.949 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)'
2023-11-28 17:14:42.950 +01:00 [DBG] Connection id "0HMVG5KF86OTJ" completed keep alive response.
2023-11-28 17:14:42.958 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-28 17:14:42.962 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointofinterests/2 - - - 200 82 application/json;+charset=utf-8 2443.1408ms
2023-11-28 17:14:47.054 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/1/pointofinterests/4 - -
2023-11-28 17:14:47.055 +01:00 [DBG] The request path  does not match the path filter
2023-11-28 17:14:47.057 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointofinterests/4'
2023-11-28 17:14:47.059 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)' with route pattern 'api/cities/{cityId}/pointofinterests/{pointOfInterestId}' is valid for the request path '/api/cities/1/pointofinterests/4'
2023-11-28 17:14:47.061 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)'
2023-11-28 17:14:47.062 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)'
2023-11-28 17:14:47.063 +01:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointOfInterests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[NewCityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API).
2023-11-28 17:14:47.065 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-28 17:14:47.067 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-28 17:14:47.068 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-28 17:14:47.070 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-28 17:14:47.072 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-28 17:14:47.074 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 17:14:47.083 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 17:14:47.085 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-28 17:14:47.086 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-28 17:14:47.088 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 17:14:47.089 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 17:14:47.091 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-28 17:14:47.092 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-28 17:14:47.093 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-11-28 17:14:47.094 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-11-28 17:14:47.096 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 17:14:47.097 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 17:14:47.099 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-11-28 17:14:47.100 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 17:14:47.103 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-28 17:14:47.110 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 17:14:47.111 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-28 17:14:47.112 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 17:14:47.114 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 17:14:47.115 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 17:14:47.117 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 17:14:47.120 +01:00 [DBG] A data reader was disposed.
2023-11-28 17:14:47.120 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 17:14:47.122 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 17:14:47.123 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 17:14:47.125 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-28 17:14:47.126 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 17:14:47.127 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 17:14:47.128 +01:00 [DBG] Executing DbCommand [Parameters=[@__pointOfinterestId_0='?' (DbType = Int32), @__cityId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterests" AS "p"
WHERE ("p"."Id" = @__pointOfinterestId_0) AND ("p"."CityId" = @__cityId_1)
ORDER BY "p"."Name"
LIMIT 1
2023-11-28 17:14:47.130 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__pointOfinterestId_0='?' (DbType = Int32), @__cityId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterests" AS "p"
WHERE ("p"."Id" = @__pointOfinterestId_0) AND ("p"."CityId" = @__cityId_1)
ORDER BY "p"."Name"
LIMIT 1
2023-11-28 17:14:47.133 +01:00 [DBG] A data reader was disposed.
2023-11-28 17:14:47.133 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 17:14:47.135 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 17:14:47.137 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-28 17:14:47.140 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-28 17:14:47.141 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-11-28 17:14:47.144 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-11-28 17:14:47.146 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-11-28 17:14:47.176 +01:00 [INF] Executed action NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API) in 102.5419ms
2023-11-28 17:14:47.178 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)'
2023-11-28 17:14:47.180 +01:00 [DBG] Connection id "0HMVG5KF86OTJ" completed keep alive response.
2023-11-28 17:14:47.181 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-28 17:14:47.182 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/1/pointofinterests/4 - - - 404 161 application/problem+json;+charset=utf-8 128.6704ms
2023-11-28 17:14:55.650 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/3/pointofinterests/2 - -
2023-11-28 17:14:55.652 +01:00 [DBG] The request path  does not match the path filter
2023-11-28 17:14:55.653 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointofinterests/2'
2023-11-28 17:14:55.655 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)' with route pattern 'api/cities/{cityId}/pointofinterests/{pointOfInterestId}' is valid for the request path '/api/cities/3/pointofinterests/2'
2023-11-28 17:14:55.657 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)'
2023-11-28 17:14:55.659 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)'
2023-11-28 17:14:55.660 +01:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointOfInterests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[NewCityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API).
2023-11-28 17:14:55.663 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-28 17:14:55.664 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-28 17:14:55.665 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-28 17:14:55.667 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-28 17:14:55.668 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-28 17:14:55.670 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 17:14:55.675 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 17:14:55.676 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-28 17:14:55.677 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-28 17:14:55.678 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 17:14:55.679 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 17:14:55.680 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-28 17:14:55.682 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-28 17:14:55.683 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-11-28 17:14:55.684 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-11-28 17:14:55.685 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 17:14:55.686 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 17:14:55.688 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-11-28 17:14:55.689 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 17:14:55.744 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-28 17:14:55.746 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 17:14:55.747 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-28 17:14:55.748 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 17:14:55.750 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 17:14:55.751 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 17:14:55.753 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 17:14:55.755 +01:00 [DBG] A data reader was disposed.
2023-11-28 17:14:55.756 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 17:14:55.758 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 17:14:55.759 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 17:14:55.760 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-28 17:14:55.761 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 17:14:55.762 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 17:14:55.764 +01:00 [DBG] Executing DbCommand [Parameters=[@__pointOfinterestId_0='?' (DbType = Int32), @__cityId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterests" AS "p"
WHERE ("p"."Id" = @__pointOfinterestId_0) AND ("p"."CityId" = @__cityId_1)
ORDER BY "p"."Name"
LIMIT 1
2023-11-28 17:14:55.766 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__pointOfinterestId_0='?' (DbType = Int32), @__cityId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterests" AS "p"
WHERE ("p"."Id" = @__pointOfinterestId_0) AND ("p"."CityId" = @__cityId_1)
ORDER BY "p"."Name"
LIMIT 1
2023-11-28 17:14:55.768 +01:00 [DBG] A data reader was disposed.
2023-11-28 17:14:55.769 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 17:14:55.771 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 17:14:55.772 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-28 17:14:55.775 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-28 17:14:55.776 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-11-28 17:14:55.778 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-11-28 17:14:55.779 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-11-28 17:14:55.780 +01:00 [INF] Executed action NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API) in 109.9606ms
2023-11-28 17:14:55.781 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)'
2023-11-28 17:14:55.782 +01:00 [DBG] Connection id "0HMVG5KF86OTJ" completed keep alive response.
2023-11-28 17:14:55.783 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-28 17:14:55.784 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/3/pointofinterests/2 - - - 404 161 application/problem+json;+charset=utf-8 133.7455ms
2023-11-28 17:15:00.348 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2/pointofinterests/2 - -
2023-11-28 17:15:00.350 +01:00 [DBG] The request path  does not match the path filter
2023-11-28 17:15:00.352 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointofinterests/2'
2023-11-28 17:15:00.359 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)' with route pattern 'api/cities/{cityId}/pointofinterests/{pointOfInterestId}' is valid for the request path '/api/cities/2/pointofinterests/2'
2023-11-28 17:15:00.363 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)'
2023-11-28 17:15:00.365 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)'
2023-11-28 17:15:00.367 +01:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointOfInterests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[NewCityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API).
2023-11-28 17:15:00.377 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-28 17:15:00.379 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-28 17:15:00.383 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-28 17:15:00.387 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-28 17:15:00.390 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-28 17:15:00.393 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 17:15:00.395 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 17:15:00.396 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-28 17:15:00.398 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-28 17:15:00.400 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 17:15:00.401 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 17:15:00.403 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-28 17:15:00.404 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-28 17:15:00.406 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-11-28 17:15:00.408 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-11-28 17:15:00.410 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 17:15:00.411 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 17:15:00.412 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-11-28 17:15:00.414 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 17:15:00.415 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-28 17:15:00.417 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 17:15:00.418 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-28 17:15:00.420 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 17:15:00.421 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 17:15:00.423 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 17:15:00.426 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 17:15:00.429 +01:00 [DBG] A data reader was disposed.
2023-11-28 17:15:00.430 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 17:15:00.431 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 17:15:00.432 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 17:15:00.433 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-28 17:15:00.434 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 17:15:00.435 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 17:15:00.436 +01:00 [DBG] Executing DbCommand [Parameters=[@__pointOfinterestId_0='?' (DbType = Int32), @__cityId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterests" AS "p"
WHERE ("p"."Id" = @__pointOfinterestId_0) AND ("p"."CityId" = @__cityId_1)
ORDER BY "p"."Name"
LIMIT 1
2023-11-28 17:15:00.438 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__pointOfinterestId_0='?' (DbType = Int32), @__cityId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterests" AS "p"
WHERE ("p"."Id" = @__pointOfinterestId_0) AND ("p"."CityId" = @__cityId_1)
ORDER BY "p"."Name"
LIMIT 1
2023-11-28 17:15:00.441 +01:00 [DBG] A data reader was disposed.
2023-11-28 17:15:00.442 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 17:15:00.443 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 17:15:00.444 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-28 17:15:00.447 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-28 17:15:00.448 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-11-28 17:15:00.451 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-11-28 17:15:00.452 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-11-28 17:15:00.453 +01:00 [INF] Executed action NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API) in 60.2962ms
2023-11-28 17:15:00.455 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)'
2023-11-28 17:15:00.456 +01:00 [DBG] Connection id "0HMVG5KF86OTJ" completed keep alive response.
2023-11-28 17:15:00.457 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-28 17:15:00.459 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2/pointofinterests/2 - - - 404 161 application/problem+json;+charset=utf-8 110.4835ms
2023-11-28 18:27:27.458 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-28 18:27:27.563 +01:00 [DBG] Hosting starting
2023-11-28 18:27:27.692 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-28 18:27:27.742 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-28 18:27:27.744 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-28 18:27:27.745 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-28 18:27:27.746 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-28 18:27:27.746 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-28 18:27:27.747 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-28 18:27:27.748 +01:00 [INF] Hosting environment: Development
2023-11-28 18:27:27.749 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-28 18:27:27.749 +01:00 [DBG] Hosting started
2023-11-28 18:27:27.913 +01:00 [DBG] Connection id "0HMVG6T5JNK4A" received FIN.
2023-11-28 18:27:27.923 +01:00 [DBG] Connection id "0HMVG6T5JNK4A" accepted.
2023-11-28 18:27:27.926 +01:00 [DBG] Connection id "0HMVG6T5JNK4A" started.
2023-11-28 18:27:27.946 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 18:27:27.980 +01:00 [DBG] Connection id "0HMVG6T5JNK4A" stopped.
2023-11-28 18:27:27.986 +01:00 [DBG] Connection id "0HMVG6T5JNK4A" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 18:27:28.009 +01:00 [DBG] Connection id "0HMVG6T5JNK4B" accepted.
2023-11-28 18:27:28.011 +01:00 [DBG] Connection id "0HMVG6T5JNK4B" started.
2023-11-28 18:27:28.092 +01:00 [DBG] Connection 0HMVG6T5JNK4B established using the following protocol: "Tls12"
2023-11-28 18:27:28.141 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-28 18:27:28.271 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-28 18:27:28.377 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-28 18:27:28.397 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-28 18:27:28.414 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-28 18:27:28.415 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-28 18:27:28.415 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 276.0397ms
2023-11-28 18:27:28.422 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 7.6758ms
2023-11-28 18:27:28.484 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 69.3058ms
2023-11-28 18:27:28.530 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-28 18:27:28.561 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/favicon-32x32.png - -
2023-11-28 18:27:28.576 +01:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2023-11-28 18:27:28.577 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/favicon-32x32.png - - - 200 628 image/png 15.9312ms
2023-11-28 18:27:28.703 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 173.0638ms
2023-11-28 18:29:11.724 +01:00 [DBG] Connection id "0HMVG6T5JNK4C" accepted.
2023-11-28 18:29:11.728 +01:00 [DBG] Connection id "0HMVG6T5JNK4C" received FIN.
2023-11-28 18:29:11.729 +01:00 [DBG] Connection id "0HMVG6T5JNK4C" started.
2023-11-28 18:29:11.729 +01:00 [DBG] Connection id "0HMVG6T5JNK4D" accepted.
2023-11-28 18:29:11.737 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 18:29:11.738 +01:00 [DBG] Connection id "0HMVG6T5JNK4D" started.
2023-11-28 18:29:11.743 +01:00 [DBG] Connection id "0HMVG6T5JNK4C" stopped.
2023-11-28 18:29:11.745 +01:00 [DBG] Connection id "0HMVG6T5JNK4C" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 18:29:11.750 +01:00 [DBG] Connection 0HMVG6T5JNK4D established using the following protocol: "Tls12"
2023-11-28 18:29:11.759 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7165/api/cities/2/pointofinterests/2 application/json 89
2023-11-28 18:29:11.760 +01:00 [DBG] POST requests are not supported
2023-11-28 18:29:11.789 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointofinterests/2'
2023-11-28 18:29:11.792 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-11-28 18:29:11.795 +01:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2023-11-28 18:29:11.796 +01:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2023-11-28 18:29:11.798 +01:00 [DBG] Connection id "0HMVG6T5JNK4D" completed keep alive response.
2023-11-28 18:29:11.800 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7165/api/cities/2/pointofinterests/2 application/json 89 - 405 0 - 40.7040ms
2023-11-28 18:29:11.801 +01:00 [DBG] Connection id "0HMVG6T5JNK4D", Request id "0HMVG6T5JNK4D:00000002": started reading request body.
2023-11-28 18:29:11.803 +01:00 [DBG] Connection id "0HMVG6T5JNK4D", Request id "0HMVG6T5JNK4D:00000002": done reading request body.
2023-11-28 18:29:27.142 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7165/api/cities/1/pointofinterests application/json 89
2023-11-28 18:29:27.143 +01:00 [DBG] POST requests are not supported
2023-11-28 18:29:27.145 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointofinterests'
2023-11-28 18:29:27.150 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)' with route pattern 'api/cities/{cityId}/pointofinterests' is valid for the request path '/api/cities/1/pointofinterests'
2023-11-28 18:29:27.153 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)'
2023-11-28 18:29:27.155 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)'
2023-11-28 18:29:27.185 +01:00 [INF] Route matched with {action = "CreatPointOfInterets", controller = "PointOfInterests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[NewCityInfo.API.Models.PointOfInterestDto]] CreatPointOfInterets(Int32, NewCityInfo.API.Models.PointOfInterestForPostDto) on controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API).
2023-11-28 18:29:27.190 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-28 18:29:27.192 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-28 18:29:27.193 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-28 18:29:27.195 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-28 18:29:27.197 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-28 18:29:27.199 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 18:29:27.336 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-28 18:29:27.505 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 18:29:27.510 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-28 18:29:27.512 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-28 18:29:27.514 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:29:27.516 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:29:27.518 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-28 18:29:27.521 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:29:27.525 +01:00 [DBG] Attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto' ...
2023-11-28 18:29:27.527 +01:00 [DBG] Attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto' using the name '' in request data ...
2023-11-28 18:29:27.529 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-28 18:29:27.532 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-28 18:29:27.542 +01:00 [DBG] Connection id "0HMVG6T5JNK4D", Request id "0HMVG6T5JNK4D:00000003": started reading request body.
2023-11-28 18:29:27.544 +01:00 [DBG] Connection id "0HMVG6T5JNK4D", Request id "0HMVG6T5JNK4D:00000003": done reading request body.
2023-11-28 18:29:27.666 +01:00 [DBG] Done attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto'.
2023-11-28 18:29:27.669 +01:00 [DBG] Done attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto'.
2023-11-28 18:29:27.672 +01:00 [DBG] Attempting to validate the bound parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto' ...
2023-11-28 18:29:27.681 +01:00 [DBG] Done attempting to validate the bound parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto'.
2023-11-28 18:29:28.537 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-28 18:29:28.595 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2023-11-28 18:29:28.880 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-28 18:29:28.944 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 18:29:29.017 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (68ms).
2023-11-28 18:29:29.036 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:29:29.056 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:29:29.074 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 18:29:29.107 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 18:29:29.127 +01:00 [DBG] A data reader was disposed.
2023-11-28 18:29:29.139 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:29:29.149 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:29:29.166 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-28 18:29:29.214 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0
            ORDER BY c.Name ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-28 18:29:29.229 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 18:29:29.232 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-11-28 18:29:29.234 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:29:29.236 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:29:29.238 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-28 18:29:29.241 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-28 18:29:29.263 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 18:29:29.289 +01:00 [DBG] A data reader was disposed.
2023-11-28 18:29:29.292 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:29:29.296 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:29:29.308 +01:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-11-28 18:29:29.315 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-28 18:29:29.338 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.pointOfInterestsInCity'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 18:29:29.372 +01:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 18:29:29.406 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 18:29:29.413 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-28 18:29:29.436 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:29:29.439 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:29:29.444 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-28 18:29:29.451 +01:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-28 18:29:29.513 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 18:29:29.514 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-28 18:29:29.516 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 20), @p2='?' (Size = 26)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterests" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterests"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-11-28 18:29:29.520 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 20), @p2='?' (Size = 26)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterests" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterests"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-11-28 18:29:29.546 +01:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-11-28 18:29:29.554 +01:00 [DBG] A data reader was disposed.
2023-11-28 18:29:29.561 +01:00 [DBG] Committing transaction.
2023-11-28 18:29:29.578 +01:00 [DBG] Committed transaction.
2023-11-28 18:29:29.584 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:29:29.586 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:29:29.591 +01:00 [DBG] Disposing transaction.
2023-11-28 18:29:29.603 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 18:29:29.607 +01:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-11-28 18:29:29.612 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-28 18:29:29.618 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-28 18:29:29.620 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-28 18:29:29.621 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-28 18:29:29.623 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-28 18:29:29.625 +01:00 [INF] Executing CreatedAtRouteResult, writing value of type 'NewCityInfo.API.Entities.PointOfInterest'.
2023-11-28 18:29:29.647 +01:00 [DBG] Found the endpoints ["NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-11-28 18:29:29.658 +01:00 [DBG] Successfully processed template api/cities/{cityId}/pointofinterests/{pointOfInterestId} for NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API) resulting in /api/cities/1/pointofinterests/7 and 
2023-11-28 18:29:29.662 +01:00 [DBG] Link generation succeeded for endpoints ["NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)"] with result /api/cities/1/pointofinterests/7
2023-11-28 18:29:29.735 +01:00 [INF] Executed action NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API) in 2531.4611ms
2023-11-28 18:29:29.740 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)'
2023-11-28 18:29:29.743 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected with type 'NewCityInfo.API.Entities.PointOfInterest'. Path 'city.pointOfInterestsInCity'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-28 18:29:29.765 +01:00 [DBG] Connection id "0HMVG6T5JNK4D" completed keep alive response.
2023-11-28 18:29:29.772 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-28 18:29:29.777 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7165/api/cities/1/pointofinterests application/json 89 - 500 - text/plain;+charset=utf-8 2634.8961ms
2023-11-28 18:31:05.672 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-28 18:31:05.772 +01:00 [DBG] Hosting starting
2023-11-28 18:31:05.903 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-28 18:31:05.945 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-28 18:31:05.946 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-28 18:31:05.948 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-28 18:31:05.950 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-28 18:31:05.951 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-28 18:31:05.953 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-28 18:31:05.955 +01:00 [INF] Hosting environment: Development
2023-11-28 18:31:05.956 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-28 18:31:05.958 +01:00 [DBG] Hosting started
2023-11-28 18:31:06.389 +01:00 [DBG] Connection id "0HMVG6V6N94J0" received FIN.
2023-11-28 18:31:06.399 +01:00 [DBG] Connection id "0HMVG6V6N94J0" accepted.
2023-11-28 18:31:06.403 +01:00 [DBG] Connection id "0HMVG6V6N94J0" started.
2023-11-28 18:31:06.422 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 18:31:06.456 +01:00 [DBG] Connection id "0HMVG6V6N94J0" stopped.
2023-11-28 18:31:06.461 +01:00 [DBG] Connection id "0HMVG6V6N94J0" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 18:31:08.901 +01:00 [DBG] Connection id "0HMVG6V6N94J1" accepted.
2023-11-28 18:31:08.916 +01:00 [DBG] Connection id "0HMVG6V6N94J1" started.
2023-11-28 18:31:09.006 +01:00 [DBG] Connection 0HMVG6V6N94J1 established using the following protocol: "Tls12"
2023-11-28 18:31:09.081 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-28 18:31:09.226 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-28 18:31:09.321 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-28 18:31:09.344 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-28 18:31:09.350 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 275.2545ms
2023-11-28 18:31:09.363 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-28 18:31:09.363 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-28 18:31:09.371 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 7.2924ms
2023-11-28 18:31:09.442 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 78.9883ms
2023-11-28 18:31:09.489 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-28 18:31:09.646 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 156.6968ms
2023-11-28 18:31:11.312 +01:00 [DBG] Connection id "0HMVG6V6N94J2" accepted.
2023-11-28 18:31:11.313 +01:00 [DBG] Connection id "0HMVG6V6N94J2" received FIN.
2023-11-28 18:31:11.314 +01:00 [DBG] Connection id "0HMVG6V6N94J2" started.
2023-11-28 18:31:11.317 +01:00 [DBG] Connection id "0HMVG6V6N94J3" accepted.
2023-11-28 18:31:11.320 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 18:31:11.321 +01:00 [DBG] Connection id "0HMVG6V6N94J3" started.
2023-11-28 18:31:11.328 +01:00 [DBG] Connection id "0HMVG6V6N94J2" stopped.
2023-11-28 18:31:11.330 +01:00 [DBG] Connection id "0HMVG6V6N94J2" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 18:31:11.334 +01:00 [DBG] Connection 0HMVG6V6N94J3 established using the following protocol: "Tls12"
2023-11-28 18:31:11.344 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7165/api/cities/1/pointofinterests application/json 89
2023-11-28 18:31:11.347 +01:00 [DBG] POST requests are not supported
2023-11-28 18:31:11.375 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointofinterests'
2023-11-28 18:31:11.381 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)' with route pattern 'api/cities/{cityId}/pointofinterests' is valid for the request path '/api/cities/1/pointofinterests'
2023-11-28 18:31:11.384 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)'
2023-11-28 18:31:11.388 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)'
2023-11-28 18:31:11.418 +01:00 [INF] Route matched with {action = "CreatPointOfInterets", controller = "PointOfInterests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[NewCityInfo.API.Models.PointOfInterestDto]] CreatPointOfInterets(Int32, NewCityInfo.API.Models.PointOfInterestForPostDto) on controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API).
2023-11-28 18:31:11.420 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-28 18:31:11.422 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-28 18:31:11.424 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-28 18:31:11.426 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-28 18:31:11.428 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-28 18:31:11.430 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 18:31:11.569 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-28 18:31:11.745 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 18:31:11.752 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-28 18:31:11.756 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-28 18:31:11.759 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:31:11.760 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:31:11.762 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-28 18:31:11.766 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:31:11.770 +01:00 [DBG] Attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto' ...
2023-11-28 18:31:11.772 +01:00 [DBG] Attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto' using the name '' in request data ...
2023-11-28 18:31:11.774 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-28 18:31:11.776 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-28 18:31:11.788 +01:00 [DBG] Connection id "0HMVG6V6N94J3", Request id "0HMVG6V6N94J3:00000002": started reading request body.
2023-11-28 18:31:11.789 +01:00 [DBG] Connection id "0HMVG6V6N94J3", Request id "0HMVG6V6N94J3:00000002": done reading request body.
2023-11-28 18:31:11.921 +01:00 [DBG] Done attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto'.
2023-11-28 18:31:11.923 +01:00 [DBG] Done attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto'.
2023-11-28 18:31:11.924 +01:00 [DBG] Attempting to validate the bound parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto' ...
2023-11-28 18:31:11.931 +01:00 [DBG] Done attempting to validate the bound parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto'.
2023-11-28 18:31:12.852 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-28 18:31:12.918 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2023-11-28 18:31:13.275 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-28 18:31:13.349 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 18:31:13.413 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (61ms).
2023-11-28 18:31:13.432 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:31:13.454 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:31:13.472 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 18:31:13.504 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 18:31:13.518 +01:00 [DBG] A data reader was disposed.
2023-11-28 18:31:13.528 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:31:13.536 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:31:13.553 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-28 18:31:13.607 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0
            ORDER BY c.Name ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-28 18:31:13.625 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 18:31:13.626 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-28 18:31:13.628 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:31:13.629 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:31:13.630 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-28 18:31:13.633 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-28 18:31:13.658 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 18:31:13.685 +01:00 [DBG] A data reader was disposed.
2023-11-28 18:31:13.686 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:31:13.687 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:31:13.698 +01:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-11-28 18:31:13.702 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-28 18:31:13.729 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.pointOfInterestsInCity'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 18:31:13.764 +01:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 18:31:13.795 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 18:31:13.800 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-28 18:31:13.825 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:31:13.826 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:31:13.831 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-28 18:31:13.838 +01:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-28 18:31:13.902 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 18:31:13.904 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-28 18:31:13.906 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 20), @p2='?' (Size = 26)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterests" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterests"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-11-28 18:31:13.911 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 20), @p2='?' (Size = 26)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterests" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterests"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-11-28 18:31:13.938 +01:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-11-28 18:31:13.947 +01:00 [DBG] A data reader was disposed.
2023-11-28 18:31:13.957 +01:00 [DBG] Committing transaction.
2023-11-28 18:31:13.969 +01:00 [DBG] Committed transaction.
2023-11-28 18:31:13.974 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:31:13.976 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:31:13.981 +01:00 [DBG] Disposing transaction.
2023-11-28 18:31:13.992 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 18:31:13.996 +01:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-11-28 18:31:14.002 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-28 18:31:14.007 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-28 18:31:14.008 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-28 18:31:14.009 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-28 18:31:14.011 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-28 18:31:14.013 +01:00 [INF] Executing CreatedAtRouteResult, writing value of type 'NewCityInfo.API.Models.PointOfInterestDto'.
2023-11-28 18:31:14.033 +01:00 [DBG] Found the endpoints ["NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-11-28 18:31:14.045 +01:00 [DBG] Successfully processed template api/cities/{cityId}/pointofinterests/{pointOfInterestId} for NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API) resulting in /api/cities/1/pointofinterests/8 and 
2023-11-28 18:31:14.047 +01:00 [DBG] Link generation succeeded for endpoints ["NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)"] with result /api/cities/1/pointofinterests/8
2023-11-28 18:31:14.104 +01:00 [INF] Executed action NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API) in 2667.6156ms
2023-11-28 18:31:14.107 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)'
2023-11-28 18:31:14.108 +01:00 [DBG] Connection id "0HMVG6V6N94J3" completed keep alive response.
2023-11-28 18:31:14.115 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-28 18:31:14.119 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7165/api/cities/1/pointofinterests application/json 89 - 201 81 application/json;+charset=utf-8 2774.9780ms
2023-11-28 18:32:49.373 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-28 18:32:49.473 +01:00 [DBG] Hosting starting
2023-11-28 18:32:49.602 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-28 18:32:49.646 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-28 18:32:49.647 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-28 18:32:49.648 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-28 18:32:49.649 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-28 18:32:49.651 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-28 18:32:49.652 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-28 18:32:49.653 +01:00 [INF] Hosting environment: Development
2023-11-28 18:32:49.654 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-28 18:32:49.655 +01:00 [DBG] Hosting started
2023-11-28 18:32:49.885 +01:00 [DBG] Connection id "0HMVG705I8QP9" accepted.
2023-11-28 18:32:49.888 +01:00 [DBG] Connection id "0HMVG705I8QP9" started.
2023-11-28 18:32:49.889 +01:00 [DBG] Connection id "0HMVG705I8QPA" accepted.
2023-11-28 18:32:49.892 +01:00 [DBG] Connection id "0HMVG705I8QPA" started.
2023-11-28 18:32:49.894 +01:00 [DBG] Connection id "0HMVG705I8QP9" received FIN.
2023-11-28 18:32:49.894 +01:00 [DBG] Connection id "0HMVG705I8QPA" received FIN.
2023-11-28 18:32:49.914 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 18:32:49.914 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 18:32:49.948 +01:00 [DBG] Connection id "0HMVG705I8QP9" stopped.
2023-11-28 18:32:49.948 +01:00 [DBG] Connection id "0HMVG705I8QPA" stopped.
2023-11-28 18:32:49.953 +01:00 [DBG] Connection id "0HMVG705I8QP9" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 18:32:49.953 +01:00 [DBG] Connection id "0HMVG705I8QPA" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 18:32:52.577 +01:00 [DBG] Connection id "0HMVG705I8QPB" accepted.
2023-11-28 18:32:52.578 +01:00 [DBG] Connection id "0HMVG705I8QPB" started.
2023-11-28 18:32:52.643 +01:00 [DBG] Connection 0HMVG705I8QPB established using the following protocol: "Tls12"
2023-11-28 18:32:52.702 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-28 18:32:52.822 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-28 18:32:52.927 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-28 18:32:52.948 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-28 18:32:52.955 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 256.7795ms
2023-11-28 18:32:52.963 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-28 18:32:52.963 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-28 18:32:52.972 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 8.1976ms
2023-11-28 18:32:53.031 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 67.6307ms
2023-11-28 18:32:53.079 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-28 18:32:53.237 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 157.9610ms
2023-11-28 18:32:54.842 +01:00 [DBG] Connection id "0HMVG705I8QPC" accepted.
2023-11-28 18:32:54.842 +01:00 [DBG] Connection id "0HMVG705I8QPC" received FIN.
2023-11-28 18:32:54.843 +01:00 [DBG] Connection id "0HMVG705I8QPC" started.
2023-11-28 18:32:54.843 +01:00 [DBG] Connection id "0HMVG705I8QPD" accepted.
2023-11-28 18:32:54.846 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 18:32:54.847 +01:00 [DBG] Connection id "0HMVG705I8QPD" started.
2023-11-28 18:32:54.852 +01:00 [DBG] Connection id "0HMVG705I8QPC" stopped.
2023-11-28 18:32:54.855 +01:00 [DBG] Connection id "0HMVG705I8QPC" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 18:32:54.858 +01:00 [DBG] Connection 0HMVG705I8QPD established using the following protocol: "Tls12"
2023-11-28 18:32:54.867 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7165/api/cities/4/pointofinterests application/json 89
2023-11-28 18:32:54.871 +01:00 [DBG] POST requests are not supported
2023-11-28 18:32:54.899 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/4/pointofinterests'
2023-11-28 18:32:54.906 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)' with route pattern 'api/cities/{cityId}/pointofinterests' is valid for the request path '/api/cities/4/pointofinterests'
2023-11-28 18:32:54.909 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)'
2023-11-28 18:32:54.913 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)'
2023-11-28 18:32:54.943 +01:00 [INF] Route matched with {action = "CreatPointOfInterets", controller = "PointOfInterests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[NewCityInfo.API.Models.PointOfInterestDto]] CreatPointOfInterets(Int32, NewCityInfo.API.Models.PointOfInterestForPostDto) on controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API).
2023-11-28 18:32:54.948 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-28 18:32:54.952 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-28 18:32:54.955 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-28 18:32:54.960 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-28 18:32:54.963 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-28 18:32:54.966 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 18:32:55.113 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-28 18:32:55.294 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 18:32:55.300 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-28 18:32:55.303 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-28 18:32:55.305 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:32:55.306 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:32:55.307 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-28 18:32:55.310 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:32:55.313 +01:00 [DBG] Attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto' ...
2023-11-28 18:32:55.315 +01:00 [DBG] Attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto' using the name '' in request data ...
2023-11-28 18:32:55.318 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-28 18:32:55.319 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-28 18:32:55.329 +01:00 [DBG] Connection id "0HMVG705I8QPD", Request id "0HMVG705I8QPD:00000002": started reading request body.
2023-11-28 18:32:55.331 +01:00 [DBG] Connection id "0HMVG705I8QPD", Request id "0HMVG705I8QPD:00000002": done reading request body.
2023-11-28 18:32:55.458 +01:00 [DBG] Done attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto'.
2023-11-28 18:32:55.460 +01:00 [DBG] Done attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto'.
2023-11-28 18:32:55.462 +01:00 [DBG] Attempting to validate the bound parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto' ...
2023-11-28 18:32:55.470 +01:00 [DBG] Done attempting to validate the bound parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto'.
2023-11-28 18:32:56.385 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-28 18:32:56.443 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2023-11-28 18:32:56.779 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-28 18:32:56.854 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 18:32:56.922 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (64ms).
2023-11-28 18:32:56.938 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:32:56.961 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:32:56.979 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 18:32:57.014 +01:00 [INF] Executed DbCommand (39ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 18:32:57.028 +01:00 [DBG] A data reader was disposed.
2023-11-28 18:32:57.037 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:32:57.044 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:32:57.047 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-28 18:32:57.052 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-28 18:32:57.053 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-11-28 18:32:57.055 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-11-28 18:32:57.057 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-11-28 18:32:57.131 +01:00 [INF] Executed action NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API) in 2158.9372ms
2023-11-28 18:32:57.135 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)'
2023-11-28 18:32:57.136 +01:00 [DBG] Connection id "0HMVG705I8QPD" completed keep alive response.
2023-11-28 18:32:57.142 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-28 18:32:57.147 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7165/api/cities/4/pointofinterests application/json 89 - 404 161 application/problem+json;+charset=utf-8 2279.5625ms
2023-11-28 18:33:11.176 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7165/api/cities/4/pointofinterests application/json 53
2023-11-28 18:33:11.178 +01:00 [DBG] POST requests are not supported
2023-11-28 18:33:11.181 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/4/pointofinterests'
2023-11-28 18:33:11.182 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)' with route pattern 'api/cities/{cityId}/pointofinterests' is valid for the request path '/api/cities/4/pointofinterests'
2023-11-28 18:33:11.185 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)'
2023-11-28 18:33:11.189 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)'
2023-11-28 18:33:11.192 +01:00 [INF] Route matched with {action = "CreatPointOfInterets", controller = "PointOfInterests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[NewCityInfo.API.Models.PointOfInterestDto]] CreatPointOfInterets(Int32, NewCityInfo.API.Models.PointOfInterestForPostDto) on controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API).
2023-11-28 18:33:11.196 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-28 18:33:11.198 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-28 18:33:11.200 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-28 18:33:11.204 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-28 18:33:11.207 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-28 18:33:11.210 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 18:33:11.221 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 18:33:11.223 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-28 18:33:11.225 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-28 18:33:11.227 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:33:11.228 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:33:11.229 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-28 18:33:11.231 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:33:11.233 +01:00 [DBG] Attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto' ...
2023-11-28 18:33:11.235 +01:00 [DBG] Attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto' using the name '' in request data ...
2023-11-28 18:33:11.237 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-28 18:33:11.240 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-28 18:33:11.241 +01:00 [DBG] Connection id "0HMVG705I8QPD", Request id "0HMVG705I8QPD:00000003": started reading request body.
2023-11-28 18:33:11.243 +01:00 [DBG] Connection id "0HMVG705I8QPD", Request id "0HMVG705I8QPD:00000003": done reading request body.
2023-11-28 18:33:11.245 +01:00 [DBG] Done attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto'.
2023-11-28 18:33:11.246 +01:00 [DBG] Done attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto'.
2023-11-28 18:33:11.248 +01:00 [DBG] Attempting to validate the bound parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto' ...
2023-11-28 18:33:11.252 +01:00 [DBG] Done attempting to validate the bound parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto'.
2023-11-28 18:33:11.254 +01:00 [DBG] The request has model state errors, returning an error response.
2023-11-28 18:33:11.256 +01:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2023-11-28 18:33:11.258 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-28 18:33:11.263 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-28 18:33:11.264 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-11-28 18:33:11.269 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-11-28 18:33:11.271 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-11-28 18:33:11.301 +01:00 [INF] Executed action NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API) in 91.14ms
2023-11-28 18:33:11.303 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)'
2023-11-28 18:33:11.304 +01:00 [DBG] Connection id "0HMVG705I8QPD" completed keep alive response.
2023-11-28 18:33:11.306 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7165/api/cities/4/pointofinterests application/json 53 - 400 241 application/problem+json;+charset=utf-8 129.1921ms
2023-11-28 18:33:22.055 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7165/api/cities/4/pointofinterests application/json 89
2023-11-28 18:33:22.056 +01:00 [DBG] POST requests are not supported
2023-11-28 18:33:22.057 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/4/pointofinterests'
2023-11-28 18:33:22.059 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)' with route pattern 'api/cities/{cityId}/pointofinterests' is valid for the request path '/api/cities/4/pointofinterests'
2023-11-28 18:33:22.061 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)'
2023-11-28 18:33:22.063 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)'
2023-11-28 18:33:22.065 +01:00 [INF] Route matched with {action = "CreatPointOfInterets", controller = "PointOfInterests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[NewCityInfo.API.Models.PointOfInterestDto]] CreatPointOfInterets(Int32, NewCityInfo.API.Models.PointOfInterestForPostDto) on controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API).
2023-11-28 18:33:22.068 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-28 18:33:22.070 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-28 18:33:22.072 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-28 18:33:22.075 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-28 18:33:22.078 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-28 18:33:22.081 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 18:33:22.085 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 18:33:22.087 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-28 18:33:22.089 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-28 18:33:22.091 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:33:22.093 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:33:22.095 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-28 18:33:22.097 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:33:22.099 +01:00 [DBG] Attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto' ...
2023-11-28 18:33:22.101 +01:00 [DBG] Attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto' using the name '' in request data ...
2023-11-28 18:33:22.103 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-28 18:33:22.106 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-28 18:33:22.109 +01:00 [DBG] Connection id "0HMVG705I8QPD", Request id "0HMVG705I8QPD:00000004": started reading request body.
2023-11-28 18:33:22.112 +01:00 [DBG] Connection id "0HMVG705I8QPD", Request id "0HMVG705I8QPD:00000004": done reading request body.
2023-11-28 18:33:22.114 +01:00 [DBG] Done attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto'.
2023-11-28 18:33:22.116 +01:00 [DBG] Done attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto'.
2023-11-28 18:33:22.118 +01:00 [DBG] Attempting to validate the bound parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto' ...
2023-11-28 18:33:22.121 +01:00 [DBG] Done attempting to validate the bound parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto'.
2023-11-28 18:33:22.130 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-28 18:33:22.136 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 18:33:22.137 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-28 18:33:22.138 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:33:22.140 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:33:22.142 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 18:33:22.146 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 18:33:22.150 +01:00 [DBG] A data reader was disposed.
2023-11-28 18:33:22.152 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:33:22.158 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:33:22.161 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-28 18:33:22.165 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-28 18:33:22.166 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-11-28 18:33:22.170 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-11-28 18:33:22.176 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-11-28 18:33:22.179 +01:00 [INF] Executed action NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API) in 98.7678ms
2023-11-28 18:33:22.182 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)'
2023-11-28 18:33:22.184 +01:00 [DBG] Connection id "0HMVG705I8QPD" completed keep alive response.
2023-11-28 18:33:22.185 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-28 18:33:22.187 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7165/api/cities/4/pointofinterests application/json 89 - 404 161 application/problem+json;+charset=utf-8 132.4263ms
2023-11-28 18:33:27.928 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:7165/api/cities/2/pointofinterests application/json 89
2023-11-28 18:33:27.929 +01:00 [DBG] POST requests are not supported
2023-11-28 18:33:27.930 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointofinterests'
2023-11-28 18:33:27.932 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)' with route pattern 'api/cities/{cityId}/pointofinterests' is valid for the request path '/api/cities/2/pointofinterests'
2023-11-28 18:33:27.934 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)'
2023-11-28 18:33:27.936 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)'
2023-11-28 18:33:27.939 +01:00 [INF] Route matched with {action = "CreatPointOfInterets", controller = "PointOfInterests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[NewCityInfo.API.Models.PointOfInterestDto]] CreatPointOfInterets(Int32, NewCityInfo.API.Models.PointOfInterestForPostDto) on controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API).
2023-11-28 18:33:27.942 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-28 18:33:27.944 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-28 18:33:27.946 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-28 18:33:27.948 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-28 18:33:27.950 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-28 18:33:27.952 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 18:33:27.954 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 18:33:27.956 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-28 18:33:27.958 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-28 18:33:27.960 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:33:27.962 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:33:27.963 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-28 18:33:27.965 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:33:27.966 +01:00 [DBG] Attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto' ...
2023-11-28 18:33:27.968 +01:00 [DBG] Attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto' using the name '' in request data ...
2023-11-28 18:33:27.970 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-28 18:33:27.972 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-28 18:33:27.973 +01:00 [DBG] Connection id "0HMVG705I8QPD", Request id "0HMVG705I8QPD:00000005": started reading request body.
2023-11-28 18:33:27.975 +01:00 [DBG] Connection id "0HMVG705I8QPD", Request id "0HMVG705I8QPD:00000005": done reading request body.
2023-11-28 18:33:27.976 +01:00 [DBG] Done attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto'.
2023-11-28 18:33:27.977 +01:00 [DBG] Done attempting to bind parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto'.
2023-11-28 18:33:27.979 +01:00 [DBG] Attempting to validate the bound parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto' ...
2023-11-28 18:33:27.981 +01:00 [DBG] Done attempting to validate the bound parameter 'postDto' of type 'NewCityInfo.API.Models.PointOfInterestForPostDto'.
2023-11-28 18:33:28.030 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-28 18:33:28.034 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 18:33:28.035 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-28 18:33:28.037 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:33:28.038 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:33:28.040 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 18:33:28.043 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 18:33:28.047 +01:00 [DBG] A data reader was disposed.
2023-11-28 18:33:28.049 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:33:28.051 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:33:28.067 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-28 18:33:28.116 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0
            ORDER BY c.Name ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-28 18:33:28.131 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 18:33:28.132 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-28 18:33:28.134 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:33:28.135 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:33:28.137 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-28 18:33:28.139 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-28 18:33:28.160 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 18:33:28.185 +01:00 [DBG] A data reader was disposed.
2023-11-28 18:33:28.186 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:33:28.190 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:33:28.201 +01:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-11-28 18:33:28.206 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-28 18:33:28.232 +01:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.pointOfInterestsInCity'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 18:33:28.268 +01:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'Id.PointOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 18:33:28.300 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 18:33:28.308 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-28 18:33:28.331 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:33:28.332 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:33:28.338 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-28 18:33:28.346 +01:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-28 18:33:28.402 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 18:33:28.404 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-11-28 18:33:28.407 +01:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 20), @p2='?' (Size = 26)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterests" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterests"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-11-28 18:33:28.415 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 20), @p2='?' (Size = 26)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterests" ("CityId", "Description", "Name")
VALUES (@p0, @p1, @p2);
SELECT "Id"
FROM "PointOfInterests"
WHERE changes() = 1 AND "rowid" = last_insert_rowid();
2023-11-28 18:33:28.443 +01:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-11-28 18:33:28.451 +01:00 [DBG] A data reader was disposed.
2023-11-28 18:33:28.460 +01:00 [DBG] Committing transaction.
2023-11-28 18:33:28.481 +01:00 [DBG] Committed transaction.
2023-11-28 18:33:28.488 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:33:28.493 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:33:28.501 +01:00 [DBG] Disposing transaction.
2023-11-28 18:33:28.514 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 18:33:28.522 +01:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-11-28 18:33:28.529 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-28 18:33:28.535 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-28 18:33:28.538 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-28 18:33:28.541 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-28 18:33:28.543 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-28 18:33:28.547 +01:00 [INF] Executing CreatedAtRouteResult, writing value of type 'NewCityInfo.API.Models.PointOfInterestDto'.
2023-11-28 18:33:28.566 +01:00 [DBG] Found the endpoints ["NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)"] for address Microsoft.AspNetCore.Routing.RouteValuesAddress
2023-11-28 18:33:28.578 +01:00 [DBG] Successfully processed template api/cities/{cityId}/pointofinterests/{pointOfInterestId} for NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API) resulting in /api/cities/2/pointofinterests/9 and 
2023-11-28 18:33:28.583 +01:00 [DBG] Link generation succeeded for endpoints ["NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterest (NewCityInfo.API)"] with result /api/cities/2/pointofinterests/9
2023-11-28 18:33:28.591 +01:00 [INF] Executed action NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API) in 638.3236ms
2023-11-28 18:33:28.593 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.CreatPointOfInterets (NewCityInfo.API)'
2023-11-28 18:33:28.595 +01:00 [DBG] Connection id "0HMVG705I8QPD" completed keep alive response.
2023-11-28 18:33:28.597 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-28 18:33:28.599 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:7165/api/cities/2/pointofinterests application/json 89 - 201 81 application/json;+charset=utf-8 670.4994ms
2023-11-28 18:50:41.946 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-28 18:50:42.059 +01:00 [DBG] Hosting starting
2023-11-28 18:50:42.211 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-28 18:50:42.260 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-28 18:50:42.262 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-28 18:50:42.263 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-28 18:50:42.264 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-28 18:50:42.265 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-28 18:50:42.266 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-28 18:50:42.267 +01:00 [INF] Hosting environment: Development
2023-11-28 18:50:42.268 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-28 18:50:42.268 +01:00 [DBG] Hosting started
2023-11-28 18:50:42.597 +01:00 [DBG] Connection id "0HMVG7A58EGV3" accepted.
2023-11-28 18:50:42.600 +01:00 [DBG] Connection id "0HMVG7A58EGV4" accepted.
2023-11-28 18:50:42.601 +01:00 [DBG] Connection id "0HMVG7A58EGV3" started.
2023-11-28 18:50:42.602 +01:00 [DBG] Connection id "0HMVG7A58EGV4" started.
2023-11-28 18:50:42.636 +01:00 [DBG] Connection id "0HMVG7A58EGV4" received FIN.
2023-11-28 18:50:42.636 +01:00 [DBG] Connection id "0HMVG7A58EGV3" received FIN.
2023-11-28 18:50:42.655 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 18:50:42.655 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 18:50:42.692 +01:00 [DBG] Connection id "0HMVG7A58EGV3" stopped.
2023-11-28 18:50:42.692 +01:00 [DBG] Connection id "0HMVG7A58EGV4" stopped.
2023-11-28 18:50:42.696 +01:00 [DBG] Connection id "0HMVG7A58EGV4" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 18:50:42.696 +01:00 [DBG] Connection id "0HMVG7A58EGV3" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 18:50:45.329 +01:00 [DBG] Connection id "0HMVG7A58EGV5" accepted.
2023-11-28 18:50:45.331 +01:00 [DBG] Connection id "0HMVG7A58EGV5" started.
2023-11-28 18:50:45.388 +01:00 [DBG] Connection 0HMVG7A58EGV5 established using the following protocol: "Tls12"
2023-11-28 18:50:45.450 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-28 18:50:45.579 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-28 18:50:45.689 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-28 18:50:45.711 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-28 18:50:45.722 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 272.0550ms
2023-11-28 18:50:45.725 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-28 18:50:45.730 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-28 18:50:45.742 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 11.9393ms
2023-11-28 18:50:45.805 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 80.3007ms
2023-11-28 18:50:45.856 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-28 18:50:46.039 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 183.2260ms
2023-11-28 18:51:32.630 +01:00 [DBG] Connection id "0HMVG7A58EGV6" accepted.
2023-11-28 18:51:32.634 +01:00 [DBG] Connection id "0HMVG7A58EGV6" received FIN.
2023-11-28 18:51:32.635 +01:00 [DBG] Connection id "0HMVG7A58EGV6" started.
2023-11-28 18:51:32.635 +01:00 [DBG] Connection id "0HMVG7A58EGV7" accepted.
2023-11-28 18:51:32.646 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 18:51:32.646 +01:00 [DBG] Connection id "0HMVG7A58EGV7" started.
2023-11-28 18:51:32.649 +01:00 [DBG] Connection id "0HMVG7A58EGV6" stopped.
2023-11-28 18:51:32.651 +01:00 [DBG] Connection id "0HMVG7A58EGV6" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 18:51:32.655 +01:00 [DBG] Connection 0HMVG7A58EGV7 established using the following protocol: "Tls12"
2023-11-28 18:51:32.667 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7165/api/cities/2/pointofinterests application/json 87
2023-11-28 18:51:32.670 +01:00 [DBG] PUT requests are not supported
2023-11-28 18:51:32.695 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointofinterests'
2023-11-28 18:51:32.698 +01:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2023-11-28 18:51:32.702 +01:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2023-11-28 18:51:32.703 +01:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2023-11-28 18:51:32.706 +01:00 [DBG] Connection id "0HMVG7A58EGV7" completed keep alive response.
2023-11-28 18:51:32.708 +01:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7165/api/cities/2/pointofinterests application/json 87 - 405 0 - 40.8145ms
2023-11-28 18:51:32.710 +01:00 [DBG] Connection id "0HMVG7A58EGV7", Request id "0HMVG7A58EGV7:00000002": started reading request body.
2023-11-28 18:51:32.712 +01:00 [DBG] Connection id "0HMVG7A58EGV7", Request id "0HMVG7A58EGV7:00000002": done reading request body.
2023-11-28 18:51:54.759 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7165/api/cities/2/pointofinterests/4 application/json 87
2023-11-28 18:51:54.761 +01:00 [DBG] PUT requests are not supported
2023-11-28 18:51:54.763 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointofinterests/4'
2023-11-28 18:51:54.768 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.UpdatePointOfInterest (NewCityInfo.API)' with route pattern 'api/cities/{cityId}/pointofinterests/{pointOfInterestId}' is valid for the request path '/api/cities/2/pointofinterests/4'
2023-11-28 18:51:54.772 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.UpdatePointOfInterest (NewCityInfo.API)'
2023-11-28 18:51:54.774 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.UpdatePointOfInterest (NewCityInfo.API)'
2023-11-28 18:51:54.803 +01:00 [INF] Route matched with {action = "UpdatePointOfInterest", controller = "PointOfInterests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdatePointOfInterest(Int32, Int32, NewCityInfo.API.Models.PointOfInterestForUpdateDto) on controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API).
2023-11-28 18:51:54.807 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-28 18:51:54.810 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-28 18:51:54.812 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-28 18:51:54.815 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-28 18:51:54.817 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-28 18:51:54.819 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 18:51:54.961 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-28 18:51:55.133 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 18:51:55.139 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-28 18:51:55.142 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-28 18:51:55.147 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:51:55.149 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:51:55.152 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-28 18:51:55.156 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:51:55.161 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-11-28 18:51:55.164 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-11-28 18:51:55.167 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 18:51:55.170 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 18:51:55.173 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-11-28 18:51:55.176 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 18:51:55.178 +01:00 [DBG] Attempting to bind parameter 'updateDto' of type 'NewCityInfo.API.Models.PointOfInterestForUpdateDto' ...
2023-11-28 18:51:55.180 +01:00 [DBG] Attempting to bind parameter 'updateDto' of type 'NewCityInfo.API.Models.PointOfInterestForUpdateDto' using the name '' in request data ...
2023-11-28 18:51:55.184 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-28 18:51:55.186 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-28 18:51:55.196 +01:00 [DBG] Connection id "0HMVG7A58EGV7", Request id "0HMVG7A58EGV7:00000003": started reading request body.
2023-11-28 18:51:55.202 +01:00 [DBG] Connection id "0HMVG7A58EGV7", Request id "0HMVG7A58EGV7:00000003": done reading request body.
2023-11-28 18:51:55.327 +01:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'NewCityInfo.API.Models.PointOfInterestForUpdateDto'.
2023-11-28 18:51:55.329 +01:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'NewCityInfo.API.Models.PointOfInterestForUpdateDto'.
2023-11-28 18:51:55.330 +01:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'NewCityInfo.API.Models.PointOfInterestForUpdateDto' ...
2023-11-28 18:51:55.339 +01:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'NewCityInfo.API.Models.PointOfInterestForUpdateDto'.
2023-11-28 18:51:56.187 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-28 18:51:56.243 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2023-11-28 18:51:56.531 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-28 18:51:56.593 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 18:51:56.658 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (61ms).
2023-11-28 18:51:56.675 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:51:56.695 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:51:56.714 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 18:51:56.749 +01:00 [INF] Executed DbCommand (42ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 18:51:56.765 +01:00 [DBG] A data reader was disposed.
2023-11-28 18:51:56.774 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:51:56.782 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:51:56.793 +01:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .OrderBy(p => p.Name)
    .Where(p => p.Id == __pointOfinterestId_0 && p.CityId == __cityId_1)
    .FirstOrDefault()'
2023-11-28 18:51:56.842 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterest>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) Required MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointOfInterests AS p
            WHERE (p.Id == @__pointOfinterestId_0) && (p.CityId == @__cityId_1)
            ORDER BY p.Name ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-28 18:51:56.858 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 18:51:56.861 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-11-28 18:51:56.864 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:51:56.867 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:51:56.870 +01:00 [DBG] Executing DbCommand [Parameters=[@__pointOfinterestId_0='?' (DbType = Int32), @__cityId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterests" AS "p"
WHERE ("p"."Id" = @__pointOfinterestId_0) AND ("p"."CityId" = @__cityId_1)
ORDER BY "p"."Name"
LIMIT 1
2023-11-28 18:51:56.874 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__pointOfinterestId_0='?' (DbType = Int32), @__cityId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterests" AS "p"
WHERE ("p"."Id" = @__pointOfinterestId_0) AND ("p"."CityId" = @__cityId_1)
ORDER BY "p"."Name"
LIMIT 1
2023-11-28 18:51:56.895 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 18:51:56.923 +01:00 [DBG] A data reader was disposed.
2023-11-28 18:51:56.924 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:51:56.926 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:51:57.042 +01:00 [INF] Executed action NewCityInfo.API.Controllers.PointOfInterestsController.UpdatePointOfInterest (NewCityInfo.API) in 2218.6287ms
2023-11-28 18:51:57.046 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.UpdatePointOfInterest (NewCityInfo.API)'
2023-11-28 18:51:57.049 +01:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
ActionResult`1 -> PointOfInterest
Microsoft.AspNetCore.Mvc.ActionResult`1[[NewCityInfo.API.Models.PointOfInterestDto, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> NewCityInfo.API.Entities.PointOfInterest
   at lambda_method63(Closure , Object , PointOfInterest , ResolutionContext )
   at NewCityInfo.API.Controllers.PointOfInterestsController.UpdatePointOfInterest(Int32 cityId, Int32 pointOfInterestId, PointOfInterestForUpdateDto updateDto) in C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\Controllers\PointOfInterestsController.cs:line 91
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-28 18:51:57.091 +01:00 [DBG] Connection id "0HMVG7A58EGV7" completed keep alive response.
2023-11-28 18:51:57.098 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-28 18:51:57.106 +01:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7165/api/cities/2/pointofinterests/4 application/json 87 - 500 - text/plain;+charset=utf-8 2346.6154ms
2023-11-28 18:55:17.654 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-28 18:55:17.754 +01:00 [DBG] Hosting starting
2023-11-28 18:55:17.878 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-28 18:55:17.927 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-28 18:55:17.929 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-28 18:55:17.930 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-28 18:55:17.932 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-28 18:55:17.933 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-28 18:55:17.935 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-28 18:55:17.936 +01:00 [INF] Hosting environment: Development
2023-11-28 18:55:17.938 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-28 18:55:17.940 +01:00 [DBG] Hosting started
2023-11-28 18:55:18.202 +01:00 [DBG] Connection id "0HMVG7CNCQGTL" accepted.
2023-11-28 18:55:18.206 +01:00 [DBG] Connection id "0HMVG7CNCQGTM" accepted.
2023-11-28 18:55:18.206 +01:00 [DBG] Connection id "0HMVG7CNCQGTL" started.
2023-11-28 18:55:18.207 +01:00 [DBG] Connection id "0HMVG7CNCQGTM" started.
2023-11-28 18:55:18.249 +01:00 [DBG] Connection id "0HMVG7CNCQGTL" received FIN.
2023-11-28 18:55:18.249 +01:00 [DBG] Connection id "0HMVG7CNCQGTM" received FIN.
2023-11-28 18:55:18.266 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 18:55:18.266 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 18:55:18.303 +01:00 [DBG] Connection id "0HMVG7CNCQGTL" stopped.
2023-11-28 18:55:18.303 +01:00 [DBG] Connection id "0HMVG7CNCQGTM" stopped.
2023-11-28 18:55:18.308 +01:00 [DBG] Connection id "0HMVG7CNCQGTM" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 18:55:18.308 +01:00 [DBG] Connection id "0HMVG7CNCQGTL" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 18:55:20.889 +01:00 [DBG] Connection id "0HMVG7CNCQGTN" accepted.
2023-11-28 18:55:20.895 +01:00 [DBG] Connection id "0HMVG7CNCQGTN" started.
2023-11-28 18:55:20.941 +01:00 [DBG] Connection 0HMVG7CNCQGTN established using the following protocol: "Tls12"
2023-11-28 18:55:21.000 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-28 18:55:21.135 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-28 18:55:21.259 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-28 18:55:21.286 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-28 18:55:21.292 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 296.0529ms
2023-11-28 18:55:21.307 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-28 18:55:21.312 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 5.7547ms
2023-11-28 18:55:21.319 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-28 18:55:21.389 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 69.5322ms
2023-11-28 18:55:21.433 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-28 18:55:21.572 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 139.6983ms
2023-11-28 18:55:24.689 +01:00 [DBG] Connection id "0HMVG7CNCQGTO" accepted.
2023-11-28 18:55:24.690 +01:00 [DBG] Connection id "0HMVG7CNCQGTO" received FIN.
2023-11-28 18:55:24.690 +01:00 [DBG] Connection id "0HMVG7CNCQGTO" started.
2023-11-28 18:55:24.691 +01:00 [DBG] Connection id "0HMVG7CNCQGTP" accepted.
2023-11-28 18:55:24.694 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 18:55:24.694 +01:00 [DBG] Connection id "0HMVG7CNCQGTP" started.
2023-11-28 18:55:24.699 +01:00 [DBG] Connection id "0HMVG7CNCQGTO" stopped.
2023-11-28 18:55:24.701 +01:00 [DBG] Connection id "0HMVG7CNCQGTO" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 18:55:24.705 +01:00 [DBG] Connection 0HMVG7CNCQGTP established using the following protocol: "Tls12"
2023-11-28 18:55:24.714 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7165/api/cities/1/pointofinterests/7 application/json 87
2023-11-28 18:55:24.717 +01:00 [DBG] PUT requests are not supported
2023-11-28 18:55:24.745 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointofinterests/7'
2023-11-28 18:55:24.752 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.UpdatePointOfInterest (NewCityInfo.API)' with route pattern 'api/cities/{cityId}/pointofinterests/{pointOfInterestId}' is valid for the request path '/api/cities/1/pointofinterests/7'
2023-11-28 18:55:24.755 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.UpdatePointOfInterest (NewCityInfo.API)'
2023-11-28 18:55:24.758 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.UpdatePointOfInterest (NewCityInfo.API)'
2023-11-28 18:55:24.788 +01:00 [INF] Route matched with {action = "UpdatePointOfInterest", controller = "PointOfInterests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdatePointOfInterest(Int32, Int32, NewCityInfo.API.Models.PointOfInterestForUpdateDto) on controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API).
2023-11-28 18:55:24.791 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-28 18:55:24.792 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-28 18:55:24.793 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-28 18:55:24.795 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-28 18:55:24.797 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-28 18:55:24.799 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 18:55:24.944 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-28 18:55:25.156 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 18:55:25.163 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-28 18:55:25.166 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-28 18:55:25.168 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:55:25.169 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:55:25.171 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-28 18:55:25.173 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:55:25.177 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-11-28 18:55:25.178 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-11-28 18:55:25.180 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 18:55:25.182 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 18:55:25.183 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-11-28 18:55:25.185 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 18:55:25.186 +01:00 [DBG] Attempting to bind parameter 'updateDto' of type 'NewCityInfo.API.Models.PointOfInterestForUpdateDto' ...
2023-11-28 18:55:25.188 +01:00 [DBG] Attempting to bind parameter 'updateDto' of type 'NewCityInfo.API.Models.PointOfInterestForUpdateDto' using the name '' in request data ...
2023-11-28 18:55:25.191 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-28 18:55:25.194 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-28 18:55:25.206 +01:00 [DBG] Connection id "0HMVG7CNCQGTP", Request id "0HMVG7CNCQGTP:00000002": started reading request body.
2023-11-28 18:55:25.207 +01:00 [DBG] Connection id "0HMVG7CNCQGTP", Request id "0HMVG7CNCQGTP:00000002": done reading request body.
2023-11-28 18:55:25.353 +01:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'NewCityInfo.API.Models.PointOfInterestForUpdateDto'.
2023-11-28 18:55:25.354 +01:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'NewCityInfo.API.Models.PointOfInterestForUpdateDto'.
2023-11-28 18:55:25.356 +01:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'NewCityInfo.API.Models.PointOfInterestForUpdateDto' ...
2023-11-28 18:55:25.365 +01:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'NewCityInfo.API.Models.PointOfInterestForUpdateDto'.
2023-11-28 18:55:26.399 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-28 18:55:26.478 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2023-11-28 18:55:26.824 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-28 18:55:26.892 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 18:55:26.980 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (81ms).
2023-11-28 18:55:27.003 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:55:27.028 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:55:27.053 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 18:55:27.089 +01:00 [INF] Executed DbCommand (44ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 18:55:27.108 +01:00 [DBG] A data reader was disposed.
2023-11-28 18:55:27.119 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:55:27.128 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:55:27.134 +01:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .OrderBy(p => p.Name)
    .Where(p => p.Id == __pointOfinterestId_0 && p.CityId == __cityId_1)
    .FirstOrDefault()'
2023-11-28 18:55:27.194 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterest>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) Required MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointOfInterests AS p
            WHERE (p.Id == @__pointOfinterestId_0) && (p.CityId == @__cityId_1)
            ORDER BY p.Name ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-28 18:55:27.212 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 18:55:27.213 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-28 18:55:27.215 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:55:27.216 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:55:27.217 +01:00 [DBG] Executing DbCommand [Parameters=[@__pointOfinterestId_0='?' (DbType = Int32), @__cityId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterests" AS "p"
WHERE ("p"."Id" = @__pointOfinterestId_0) AND ("p"."CityId" = @__cityId_1)
ORDER BY "p"."Name"
LIMIT 1
2023-11-28 18:55:27.221 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__pointOfinterestId_0='?' (DbType = Int32), @__cityId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterests" AS "p"
WHERE ("p"."Id" = @__pointOfinterestId_0) AND ("p"."CityId" = @__cityId_1)
ORDER BY "p"."Name"
LIMIT 1
2023-11-28 18:55:27.240 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 18:55:27.273 +01:00 [DBG] A data reader was disposed.
2023-11-28 18:55:27.274 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:55:27.275 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:55:27.430 +01:00 [INF] Executed action NewCityInfo.API.Controllers.PointOfInterestsController.UpdatePointOfInterest (NewCityInfo.API) in 2625.5527ms
2023-11-28 18:55:27.434 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.UpdatePointOfInterest (NewCityInfo.API)'
2023-11-28 18:55:27.437 +01:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
PointOfInterestForUpdateDto -> PointOfInterest
NewCityInfo.API.Models.PointOfInterestForUpdateDto -> NewCityInfo.API.Entities.PointOfInterest
   at lambda_method62(Closure , PointOfInterestForUpdateDto , PointOfInterest , ResolutionContext )
   at NewCityInfo.API.Controllers.PointOfInterestsController.UpdatePointOfInterest(Int32 cityId, Int32 pointOfInterestId, PointOfInterestForUpdateDto updateDto) in C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\Controllers\PointOfInterestsController.cs:line 98
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-28 18:55:27.469 +01:00 [DBG] Connection id "0HMVG7CNCQGTP" completed keep alive response.
2023-11-28 18:55:27.476 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-28 18:55:27.482 +01:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7165/api/cities/1/pointofinterests/7 application/json 87 - 500 - text/plain;+charset=utf-8 2767.3525ms
2023-11-28 18:56:12.108 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-28 18:56:12.247 +01:00 [DBG] Hosting starting
2023-11-28 18:56:12.483 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-28 18:56:12.541 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-28 18:56:12.543 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-28 18:56:12.544 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-28 18:56:12.546 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-28 18:56:12.547 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-28 18:56:12.548 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-28 18:56:12.550 +01:00 [INF] Hosting environment: Development
2023-11-28 18:56:12.553 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-28 18:56:12.558 +01:00 [DBG] Hosting started
2023-11-28 18:56:12.573 +01:00 [DBG] Connection id "0HMVG7D7JC404" received FIN.
2023-11-28 18:56:12.592 +01:00 [DBG] Connection id "0HMVG7D7JC404" accepted.
2023-11-28 18:56:12.603 +01:00 [DBG] Connection id "0HMVG7D7JC404" started.
2023-11-28 18:56:12.643 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 18:56:12.728 +01:00 [DBG] Connection id "0HMVG7D7JC404" stopped.
2023-11-28 18:56:12.738 +01:00 [DBG] Connection id "0HMVG7D7JC405" accepted.
2023-11-28 18:56:12.740 +01:00 [DBG] Connection id "0HMVG7D7JC404" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 18:56:12.748 +01:00 [DBG] Connection id "0HMVG7D7JC405" started.
2023-11-28 18:56:12.826 +01:00 [DBG] Connection 0HMVG7D7JC405 established using the following protocol: "Tls12"
2023-11-28 18:56:12.902 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-28 18:56:13.055 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-28 18:56:13.183 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-28 18:56:13.210 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-28 18:56:13.218 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 319.2314ms
2023-11-28 18:56:13.232 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-28 18:56:13.238 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 6.1303ms
2023-11-28 18:56:13.241 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-28 18:56:13.318 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 77.5077ms
2023-11-28 18:56:13.373 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-28 18:56:13.602 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 229.1413ms
2023-11-28 18:56:17.711 +01:00 [DBG] Connection id "0HMVG7D7JC406" accepted.
2023-11-28 18:56:17.712 +01:00 [DBG] Connection id "0HMVG7D7JC406" received FIN.
2023-11-28 18:56:17.712 +01:00 [DBG] Connection id "0HMVG7D7JC406" started.
2023-11-28 18:56:17.716 +01:00 [DBG] Connection id "0HMVG7D7JC407" accepted.
2023-11-28 18:56:17.719 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-28 18:56:17.721 +01:00 [DBG] Connection id "0HMVG7D7JC407" started.
2023-11-28 18:56:17.727 +01:00 [DBG] Connection id "0HMVG7D7JC406" stopped.
2023-11-28 18:56:17.731 +01:00 [DBG] Connection id "0HMVG7D7JC406" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-28 18:56:17.733 +01:00 [DBG] Connection 0HMVG7D7JC407 established using the following protocol: "Tls12"
2023-11-28 18:56:17.745 +01:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7165/api/cities/1/pointofinterests/7 application/json 87
2023-11-28 18:56:17.748 +01:00 [DBG] PUT requests are not supported
2023-11-28 18:56:17.777 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointofinterests/7'
2023-11-28 18:56:17.783 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.UpdatePointOfInterest (NewCityInfo.API)' with route pattern 'api/cities/{cityId}/pointofinterests/{pointOfInterestId}' is valid for the request path '/api/cities/1/pointofinterests/7'
2023-11-28 18:56:17.785 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.UpdatePointOfInterest (NewCityInfo.API)'
2023-11-28 18:56:17.789 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.UpdatePointOfInterest (NewCityInfo.API)'
2023-11-28 18:56:17.819 +01:00 [INF] Route matched with {action = "UpdatePointOfInterest", controller = "PointOfInterests"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdatePointOfInterest(Int32, Int32, NewCityInfo.API.Models.PointOfInterestForUpdateDto) on controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API).
2023-11-28 18:56:17.823 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-28 18:56:17.825 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-28 18:56:17.827 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-28 18:56:17.830 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-28 18:56:17.832 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-28 18:56:17.835 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 18:56:17.996 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-28 18:56:18.223 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-28 18:56:18.231 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-28 18:56:18.234 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-28 18:56:18.238 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:56:18.240 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:56:18.242 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-28 18:56:18.245 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-28 18:56:18.249 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-11-28 18:56:18.250 +01:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2023-11-28 18:56:18.253 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 18:56:18.254 +01:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 18:56:18.257 +01:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2023-11-28 18:56:18.259 +01:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2023-11-28 18:56:18.261 +01:00 [DBG] Attempting to bind parameter 'updateDto' of type 'NewCityInfo.API.Models.PointOfInterestForUpdateDto' ...
2023-11-28 18:56:18.263 +01:00 [DBG] Attempting to bind parameter 'updateDto' of type 'NewCityInfo.API.Models.PointOfInterestForUpdateDto' using the name '' in request data ...
2023-11-28 18:56:18.266 +01:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-11-28 18:56:18.269 +01:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-11-28 18:56:18.280 +01:00 [DBG] Connection id "0HMVG7D7JC407", Request id "0HMVG7D7JC407:00000002": started reading request body.
2023-11-28 18:56:18.282 +01:00 [DBG] Connection id "0HMVG7D7JC407", Request id "0HMVG7D7JC407:00000002": done reading request body.
2023-11-28 18:56:18.445 +01:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'NewCityInfo.API.Models.PointOfInterestForUpdateDto'.
2023-11-28 18:56:18.447 +01:00 [DBG] Done attempting to bind parameter 'updateDto' of type 'NewCityInfo.API.Models.PointOfInterestForUpdateDto'.
2023-11-28 18:56:18.448 +01:00 [DBG] Attempting to validate the bound parameter 'updateDto' of type 'NewCityInfo.API.Models.PointOfInterestForUpdateDto' ...
2023-11-28 18:56:18.459 +01:00 [DBG] Done attempting to validate the bound parameter 'updateDto' of type 'NewCityInfo.API.Models.PointOfInterestForUpdateDto'.
2023-11-28 18:56:19.593 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-28 18:56:19.662 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2023-11-28 18:56:20.005 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-28 18:56:20.086 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 18:56:20.163 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (72ms).
2023-11-28 18:56:20.183 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:56:20.205 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:56:20.229 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 18:56:20.262 +01:00 [INF] Executed DbCommand (41ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0)
2023-11-28 18:56:20.279 +01:00 [DBG] A data reader was disposed.
2023-11-28 18:56:20.291 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:56:20.298 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:56:20.305 +01:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .OrderBy(p => p.Name)
    .Where(p => p.Id == __pointOfinterestId_0 && p.CityId == __cityId_1)
    .FirstOrDefault()'
2023-11-28 18:56:20.362 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterest>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) Required MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointOfInterests AS p
            WHERE (p.Id == @__pointOfinterestId_0) && (p.CityId == @__cityId_1)
            ORDER BY p.Name ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-28 18:56:20.385 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 18:56:20.386 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-28 18:56:20.387 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:56:20.389 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:56:20.391 +01:00 [DBG] Executing DbCommand [Parameters=[@__pointOfinterestId_0='?' (DbType = Int32), @__cityId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterests" AS "p"
WHERE ("p"."Id" = @__pointOfinterestId_0) AND ("p"."CityId" = @__cityId_1)
ORDER BY "p"."Name"
LIMIT 1
2023-11-28 18:56:20.394 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__pointOfinterestId_0='?' (DbType = Int32), @__cityId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM "PointOfInterests" AS "p"
WHERE ("p"."Id" = @__pointOfinterestId_0) AND ("p"."CityId" = @__cityId_1)
ORDER BY "p"."Name"
LIMIT 1
2023-11-28 18:56:20.416 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 18:56:20.448 +01:00 [DBG] A data reader was disposed.
2023-11-28 18:56:20.449 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:56:20.450 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:56:20.472 +01:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-11-28 18:56:20.477 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-28 18:56:20.495 +01:00 [DBG] The unchanged property 'PointOfInterest.Description' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-11-28 18:56:20.510 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 18:56:20.512 +01:00 [DBG] The unchanged property 'PointOfInterest.Name' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-11-28 18:56:20.519 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-28 18:56:20.548 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:56:20.549 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:56:20.554 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-28 18:56:20.562 +01:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-28 18:56:20.622 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-28 18:56:20.623 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-28 18:56:20.626 +01:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 19), @p1='?' (Size = 25)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointOfInterests" SET "Description" = @p0, "Name" = @p1
WHERE "Id" = @p2;
SELECT changes();
2023-11-28 18:56:20.633 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 19), @p1='?' (Size = 25)], CommandType='"Text"', CommandTimeout='30']
UPDATE "PointOfInterests" SET "Description" = @p0, "Name" = @p1
WHERE "Id" = @p2;
SELECT changes();
2023-11-28 18:56:20.646 +01:00 [DBG] A data reader was disposed.
2023-11-28 18:56:20.653 +01:00 [DBG] Committing transaction.
2023-11-28 18:56:20.664 +01:00 [DBG] Committed transaction.
2023-11-28 18:56:20.673 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-28 18:56:20.674 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-28 18:56:20.683 +01:00 [DBG] Disposing transaction.
2023-11-28 18:56:20.693 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-28 18:56:20.697 +01:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2023-11-28 18:56:20.704 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2023-11-28 18:56:20.710 +01:00 [INF] Executed action NewCityInfo.API.Controllers.PointOfInterestsController.UpdatePointOfInterest (NewCityInfo.API) in 2870.726ms
2023-11-28 18:56:20.713 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.UpdatePointOfInterest (NewCityInfo.API)'
2023-11-28 18:56:20.715 +01:00 [DBG] Connection id "0HMVG7D7JC407" completed keep alive response.
2023-11-28 18:56:20.722 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-28 18:56:20.730 +01:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7165/api/cities/1/pointofinterests/7 application/json 87 - 204 - - 2984.2363ms
