2023-11-27 09:50:28.913 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 09:50:29.587 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 09:50:29.693 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-27 09:50:29.696 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-27 09:50:29.698 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-27 09:50:29.699 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-27 09:50:29.706 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-27 09:50:29.706 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-27 09:50:29.706 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-27 09:50:29.706 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-27 09:50:29.766 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 09:50:38.551 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 09:50:39.240 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 09:50:39.302 +01:00 [DBG] Migrating using database 'main' on server 'NewCityInfo.db'.
2023-11-27 09:50:39.309 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 09:50:39.326 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 09:50:39.346 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-11-27 09:50:39.353 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (5ms).
2023-11-27 09:50:39.356 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 09:50:39.358 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 09:50:39.365 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 09:50:39.385 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 09:50:39.387 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 09:50:39.391 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 09:50:39.392 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 09:50:39.393 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 09:50:39.393 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-11-27 09:50:39.393 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2023-11-27 09:50:39.393 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 09:50:39.393 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 09:50:39.393 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 09:50:39.393 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 09:50:39.393 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 09:50:39.393 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 09:50:39.410 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 09:50:39.410 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-27 09:50:39.410 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 09:50:39.410 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 09:50:39.410 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-11-27 09:50:39.411 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-11-27 09:50:39.414 +01:00 [DBG] A data reader was disposed.
2023-11-27 09:50:39.414 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 09:50:39.414 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 09:50:39.426 +01:00 [INF] Applying migration '20231127085029_NewCityInfoSecondMigration'.
2023-11-27 09:50:39.479 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 09:50:39.479 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 09:50:39.481 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-27 09:50:39.484 +01:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-27 09:50:39.485 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-27 09:50:39.485 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-27 09:50:39.486 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "PointOfInterests" ADD "Description" TEXT NOT NULL DEFAULT '';
2023-11-27 09:50:39.487 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "PointOfInterests" ADD "Description" TEXT NOT NULL DEFAULT '';
2023-11-27 09:50:39.487 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-27 09:50:39.487 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-27 09:50:39.487 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20231127085029_NewCityInfoSecondMigration', '6.0.0');
2023-11-27 09:50:39.487 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20231127085029_NewCityInfoSecondMigration', '6.0.0');
2023-11-27 09:50:39.499 +01:00 [DBG] Committing transaction.
2023-11-27 09:50:39.515 +01:00 [DBG] Committed transaction.
2023-11-27 09:50:39.516 +01:00 [DBG] Disposing transaction.
2023-11-27 09:50:39.517 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 09:50:39.517 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 09:50:39.518 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 10:20:44.656 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 10:20:45.379 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 10:20:45.503 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.504 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.504 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.517 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.517 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.517 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.517 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.517 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.517 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.538 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-27 10:20:45.540 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-27 10:20:45.540 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-27 10:20:45.545 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-27 10:20:45.587 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.587 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.588 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.588 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.588 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.588 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.588 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.588 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.588 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.599 +01:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.605 +01:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.605 +01:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.605 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.605 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.605 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.605 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.605 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.606 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 10:20:45.606 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-27 10:20:45.606 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-27 10:20:45.613 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-27 10:20:45.613 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-27 10:20:45.799 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 10:20:55.491 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 10:20:56.165 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 10:20:56.207 +01:00 [DBG] Migrating using database 'main' on server 'NewCityInfo.db'.
2023-11-27 10:20:56.213 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 10:20:56.223 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 10:20:56.236 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-11-27 10:20:56.243 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (5ms).
2023-11-27 10:20:56.245 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 10:20:56.247 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 10:20:56.253 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 10:20:56.275 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 10:20:56.277 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 10:20:56.281 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 10:20:56.282 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 10:20:56.283 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 10:20:56.283 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-11-27 10:20:56.283 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2023-11-27 10:20:56.283 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 10:20:56.283 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 10:20:56.283 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 10:20:56.284 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 10:20:56.284 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 10:20:56.284 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 10:20:56.299 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 10:20:56.299 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-27 10:20:56.299 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 10:20:56.299 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 10:20:56.300 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-11-27 10:20:56.300 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-11-27 10:20:56.303 +01:00 [DBG] A data reader was disposed.
2023-11-27 10:20:56.303 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 10:20:56.303 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 10:20:56.313 +01:00 [INF] Applying migration '20231127092045_DataSeed'.
2023-11-27 10:20:56.360 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 10:20:56.360 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 10:20:56.361 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-27 10:20:56.363 +01:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-27 10:20:56.364 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-27 10:20:56.364 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-27 10:20:56.365 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Cities" ("Id", "Description", "Name")
VALUES (1, 'city description 1', 'city1');
2023-11-27 10:20:56.365 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Cities" ("Id", "Description", "Name")
VALUES (1, 'city description 1', 'city1');
2023-11-27 10:20:56.365 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-27 10:20:56.365 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-27 10:20:56.365 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Cities" ("Id", "Description", "Name")
VALUES (2, 'city description 2', 'city2');
2023-11-27 10:20:56.365 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Cities" ("Id", "Description", "Name")
VALUES (2, 'city description 2', 'city2');
2023-11-27 10:20:56.365 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-27 10:20:56.365 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-27 10:20:56.365 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Cities" ("Id", "Description", "Name")
VALUES (3, 'city description 3', 'city3');
2023-11-27 10:20:56.366 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Cities" ("Id", "Description", "Name")
VALUES (3, 'city description 3', 'city3');
2023-11-27 10:20:56.366 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-27 10:20:56.366 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-27 10:20:56.366 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterests" ("Id", "CityId", "Description", "Name")
VALUES (1, 1, 'point of interest description 1', 'pointOfInterest1');
2023-11-27 10:20:56.366 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterests" ("Id", "CityId", "Description", "Name")
VALUES (1, 1, 'point of interest description 1', 'pointOfInterest1');
2023-11-27 10:20:56.366 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-27 10:20:56.366 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-27 10:20:56.366 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterests" ("Id", "CityId", "Description", "Name")
VALUES (2, 1, 'point of interest description 2', 'pointOfInterest2');
2023-11-27 10:20:56.366 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterests" ("Id", "CityId", "Description", "Name")
VALUES (2, 1, 'point of interest description 2', 'pointOfInterest2');
2023-11-27 10:20:56.366 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-27 10:20:57.017 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (651ms).
2023-11-27 10:20:57.018 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterests" ("Id", "CityId", "Description", "Name")
VALUES (3, 2, 'point of interest description 3', 'pointOfInterest3');
2023-11-27 10:20:57.018 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterests" ("Id", "CityId", "Description", "Name")
VALUES (3, 2, 'point of interest description 3', 'pointOfInterest3');
2023-11-27 10:20:57.018 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-27 10:20:57.018 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-27 10:20:57.018 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterests" ("Id", "CityId", "Description", "Name")
VALUES (4, 2, 'point of interest description 4', 'pointOfInterest4');
2023-11-27 10:20:57.018 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterests" ("Id", "CityId", "Description", "Name")
VALUES (4, 2, 'point of interest description 4', 'pointOfInterest4');
2023-11-27 10:20:57.018 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-27 10:20:57.018 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-27 10:20:57.018 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterests" ("Id", "CityId", "Description", "Name")
VALUES (5, 3, 'point of interest description 5', 'pointOfInterest5');
2023-11-27 10:20:57.018 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterests" ("Id", "CityId", "Description", "Name")
VALUES (5, 3, 'point of interest description 5', 'pointOfInterest5');
2023-11-27 10:20:57.018 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-27 10:20:57.018 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-27 10:20:57.019 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterests" ("Id", "CityId", "Description", "Name")
VALUES (6, 3, 'point of interest description 6', 'pointOfInterest6');
2023-11-27 10:20:57.019 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PointOfInterests" ("Id", "CityId", "Description", "Name")
VALUES (6, 3, 'point of interest description 6', 'pointOfInterest6');
2023-11-27 10:20:57.019 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-27 10:20:57.019 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-27 10:20:57.019 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20231127092045_DataSeed', '6.0.0');
2023-11-27 10:20:57.019 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20231127092045_DataSeed', '6.0.0');
2023-11-27 10:20:57.020 +01:00 [DBG] Committing transaction.
2023-11-27 10:20:57.039 +01:00 [DBG] Committed transaction.
2023-11-27 10:20:57.040 +01:00 [DBG] Disposing transaction.
2023-11-27 10:20:57.040 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 10:20:57.040 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 10:20:57.041 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 10:45:40.885 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 10:45:41.254 +01:00 [DBG] Hosting starting
2023-11-27 10:45:41.885 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 10:45:41.954 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 10:45:41.956 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 10:45:41.958 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 10:45:41.959 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 10:45:41.960 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 10:45:41.963 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 10:45:41.965 +01:00 [INF] Hosting environment: Development
2023-11-27 10:45:41.967 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 10:45:41.969 +01:00 [DBG] Hosting started
2023-11-27 10:45:42.289 +01:00 [DBG] Connection id "0HMVF5MFFJCQ5" accepted.
2023-11-27 10:45:42.293 +01:00 [DBG] Connection id "0HMVF5MFFJCQ5" received FIN.
2023-11-27 10:45:42.293 +01:00 [DBG] Connection id "0HMVF5MFFJCQ5" started.
2023-11-27 10:45:42.323 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 10:45:42.468 +01:00 [DBG] Connection id "0HMVF5MFFJCQ5" stopped.
2023-11-27 10:45:42.473 +01:00 [DBG] Connection id "0HMVF5MFFJCQ5" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 10:45:42.781 +01:00 [DBG] Connection id "0HMVF5MFFJCQ6" accepted.
2023-11-27 10:45:42.782 +01:00 [DBG] Connection id "0HMVF5MFFJCQ6" started.
2023-11-27 10:45:42.847 +01:00 [DBG] Connection id "0HMVF5MFFJCQ7" accepted.
2023-11-27 10:45:42.848 +01:00 [DBG] Connection id "0HMVF5MFFJCQ7" started.
2023-11-27 10:45:42.867 +01:00 [DBG] Connection 0HMVF5MFFJCQ6 established using the following protocol: "Tls12"
2023-11-27 10:45:42.867 +01:00 [DBG] Connection 0HMVF5MFFJCQ7 established using the following protocol: "Tls12"
2023-11-27 10:45:42.926 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 10:45:43.148 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 10:45:43.262 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 10:45:43.283 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 10:45:43.289 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 366.0979ms
2023-11-27 10:45:43.306 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 10:45:43.306 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 10:45:43.315 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 9.7297ms
2023-11-27 10:45:43.406 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 99.9239ms
2023-11-27 10:45:43.483 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 10:45:43.654 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 171.1080ms
2023-11-27 10:50:41.983 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 10:50:42.150 +01:00 [DBG] Hosting starting
2023-11-27 10:50:42.344 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 10:50:42.411 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 10:50:42.411 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 10:50:42.412 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 10:50:42.413 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 10:50:42.414 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 10:50:42.414 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 10:50:42.415 +01:00 [INF] Hosting environment: Development
2023-11-27 10:50:42.416 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 10:50:42.416 +01:00 [DBG] Hosting started
2023-11-27 10:50:42.621 +01:00 [DBG] Connection id "0HMVF5P8VRSFN" accepted.
2023-11-27 10:50:42.624 +01:00 [DBG] Connection id "0HMVF5P8VRSFN" started.
2023-11-27 10:50:42.625 +01:00 [DBG] Connection id "0HMVF5P8VRSFO" received FIN.
2023-11-27 10:50:42.627 +01:00 [DBG] Connection id "0HMVF5P8VRSFO" accepted.
2023-11-27 10:50:42.628 +01:00 [DBG] Connection id "0HMVF5P8VRSFN" received FIN.
2023-11-27 10:50:42.629 +01:00 [DBG] Connection id "0HMVF5P8VRSFO" started.
2023-11-27 10:50:42.646 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 10:50:42.646 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 10:50:42.686 +01:00 [DBG] Connection id "0HMVF5P8VRSFO" stopped.
2023-11-27 10:50:42.686 +01:00 [DBG] Connection id "0HMVF5P8VRSFN" stopped.
2023-11-27 10:50:42.690 +01:00 [DBG] Connection id "0HMVF5P8VRSFO" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 10:50:42.690 +01:00 [DBG] Connection id "0HMVF5P8VRSFN" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 10:50:45.315 +01:00 [DBG] Connection id "0HMVF5P8VRSFP" accepted.
2023-11-27 10:50:45.317 +01:00 [DBG] Connection id "0HMVF5P8VRSFP" started.
2023-11-27 10:50:45.380 +01:00 [DBG] Connection 0HMVF5P8VRSFP established using the following protocol: "Tls12"
2023-11-27 10:50:45.441 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 10:50:45.566 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 10:50:45.674 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 10:50:45.698 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 10:50:45.704 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 267.3283ms
2023-11-27 10:50:45.722 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 10:50:45.722 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 10:50:45.729 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 7.0634ms
2023-11-27 10:50:45.788 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 65.7460ms
2023-11-27 10:50:45.920 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 10:50:46.083 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 163.0610ms
2023-11-27 15:42:54.892 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 15:42:55.020 +01:00 [DBG] Hosting starting
2023-11-27 15:42:55.201 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 15:42:55.709 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 15:42:55.711 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 15:42:55.712 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 15:42:55.713 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 15:42:55.716 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 15:42:55.717 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 15:42:55.720 +01:00 [DBG] Connection id "0HMVFASI8G7V4" accepted.
2023-11-27 15:42:55.720 +01:00 [DBG] Connection id "0HMVFASI8G7V5" accepted.
2023-11-27 15:42:55.719 +01:00 [INF] Hosting environment: Development
2023-11-27 15:42:55.723 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 15:42:55.724 +01:00 [DBG] Hosting started
2023-11-27 15:42:55.736 +01:00 [DBG] Connection id "0HMVFASI8G7V4" started.
2023-11-27 15:42:55.736 +01:00 [DBG] Connection id "0HMVFASI8G7V5" started.
2023-11-27 15:43:02.512 +01:00 [DBG] Connection id "0HMVFASI8G7V6" accepted.
2023-11-27 15:43:02.584 +01:00 [DBG] Connection id "0HMVFASI8G7V6" started.
2023-11-27 15:43:02.759 +01:00 [DBG] Connection 0HMVFASI8G7V6 established using the following protocol: "Tls12"
2023-11-27 15:43:02.873 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 15:43:03.198 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 15:43:03.369 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 15:43:03.409 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 15:43:03.422 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 557.1823ms
2023-11-27 15:43:03.461 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 15:43:03.461 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 15:43:03.477 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 15.4536ms
2023-11-27 15:43:03.625 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 164.3497ms
2023-11-27 15:43:03.728 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 15:43:04.116 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 387.5441ms
2023-11-27 15:43:05.768 +01:00 [DBG] Authentication of the HTTPS connection timed out.
2023-11-27 15:43:05.768 +01:00 [DBG] Authentication of the HTTPS connection timed out.
2023-11-27 15:43:05.778 +01:00 [DBG] Connection id "0HMVFASI8G7V5" stopped.
2023-11-27 15:43:05.778 +01:00 [DBG] Connection id "0HMVFASI8G7V4" stopped.
2023-11-27 15:43:05.781 +01:00 [DBG] Connection id "0HMVFASI8G7V4" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 15:43:05.781 +01:00 [DBG] Connection id "0HMVFASI8G7V5" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 15:45:55.783 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 15:45:56.448 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 15:45:56.578 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.578 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.578 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.591 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.592 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.592 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.592 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.592 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.592 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.610 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.610 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.610 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.623 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.623 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.623 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.624 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.624 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.624 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.642 +01:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.648 +01:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.648 +01:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.649 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.650 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.650 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.651 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.651 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.651 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:45:56.660 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-27 15:45:56.667 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-27 15:45:56.668 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-27 15:45:56.668 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-27 15:45:56.741 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 15:46:04.447 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 15:46:05.093 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 15:46:05.133 +01:00 [DBG] Migrating using database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:46:05.138 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:46:05.151 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:46:05.170 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-11-27 15:46:05.176 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (5ms).
2023-11-27 15:46:05.178 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:46:05.181 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:46:05.190 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 15:46:05.209 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 15:46:05.212 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:46:05.215 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:46:05.217 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:46:05.217 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:46:05.218 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-11-27 15:46:05.218 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2023-11-27 15:46:05.218 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:46:05.218 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:46:05.218 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 15:46:05.218 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 15:46:05.218 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:46:05.218 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:46:05.233 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 15:46:05.233 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-27 15:46:05.233 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:46:05.233 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:46:05.233 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-11-27 15:46:05.234 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-11-27 15:46:05.236 +01:00 [DBG] A data reader was disposed.
2023-11-27 15:46:05.236 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:46:05.236 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:46:05.251 +01:00 [INF] Applying migration '20231127144556_FourthMigration'.
2023-11-27 15:46:05.297 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:46:05.297 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:46:05.298 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-27 15:46:05.301 +01:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-27 15:46:05.302 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-27 15:46:05.302 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-27 15:46:05.302 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20231127144556_FourthMigration', '6.0.0');
2023-11-27 15:46:05.302 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20231127144556_FourthMigration', '6.0.0');
2023-11-27 15:46:05.304 +01:00 [DBG] Committing transaction.
2023-11-27 15:46:05.323 +01:00 [DBG] Committed transaction.
2023-11-27 15:46:05.324 +01:00 [DBG] Disposing transaction.
2023-11-27 15:46:05.324 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:46:05.324 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:46:05.325 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 15:46:41.524 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 15:46:41.644 +01:00 [DBG] Hosting starting
2023-11-27 15:46:41.802 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 15:46:41.898 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 15:46:41.901 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 15:46:41.902 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 15:46:41.904 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 15:46:41.905 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 15:46:41.907 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 15:46:41.908 +01:00 [INF] Hosting environment: Development
2023-11-27 15:46:41.909 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 15:46:41.911 +01:00 [DBG] Hosting started
2023-11-27 15:46:42.122 +01:00 [DBG] Connection id "0HMVFAULNMAUH" received FIN.
2023-11-27 15:46:42.133 +01:00 [DBG] Connection id "0HMVFAULNMAUI" received FIN.
2023-11-27 15:46:42.165 +01:00 [DBG] Connection id "0HMVFAULNMAUI" accepted.
2023-11-27 15:46:42.172 +01:00 [DBG] Connection id "0HMVFAULNMAUH" accepted.
2023-11-27 15:46:42.175 +01:00 [DBG] Connection id "0HMVFAULNMAUI" started.
2023-11-27 15:46:42.175 +01:00 [DBG] Connection id "0HMVFAULNMAUH" started.
2023-11-27 15:46:42.201 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 15:46:42.201 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 15:46:42.256 +01:00 [DBG] Connection id "0HMVFAULNMAUH" stopped.
2023-11-27 15:46:42.256 +01:00 [DBG] Connection id "0HMVFAULNMAUI" stopped.
2023-11-27 15:46:42.263 +01:00 [DBG] Connection id "0HMVFAULNMAUH" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 15:46:42.264 +01:00 [DBG] Connection id "0HMVFAULNMAUI" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 15:46:49.890 +01:00 [DBG] Connection id "0HMVFAULNMAUJ" accepted.
2023-11-27 15:46:50.012 +01:00 [DBG] Connection id "0HMVFAULNMAUJ" started.
2023-11-27 15:46:50.097 +01:00 [DBG] Connection 0HMVFAULNMAUJ established using the following protocol: "Tls12"
2023-11-27 15:46:50.193 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 15:46:50.411 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 15:46:50.578 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 15:46:50.618 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 15:46:50.631 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 443.3687ms
2023-11-27 15:46:50.704 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 15:46:50.720 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 16.4840ms
2023-11-27 15:46:50.782 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 15:46:50.932 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 149.7312ms
2023-11-27 15:46:51.104 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 15:46:51.323 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 218.6210ms
2023-11-27 15:47:03.484 +01:00 [DBG] Connection id "0HMVFAULNMAUK" accepted.
2023-11-27 15:47:03.487 +01:00 [DBG] Connection id "0HMVFAULNMAUK" received FIN.
2023-11-27 15:47:03.487 +01:00 [DBG] Connection id "0HMVFAULNMAUK" started.
2023-11-27 15:47:03.488 +01:00 [DBG] Connection id "0HMVFAULNMAUL" accepted.
2023-11-27 15:47:03.493 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 15:47:03.495 +01:00 [DBG] Connection id "0HMVFAULNMAUL" started.
2023-11-27 15:47:03.512 +01:00 [DBG] Connection id "0HMVFAULNMAUK" stopped.
2023-11-27 15:47:03.514 +01:00 [DBG] Connection id "0HMVFAULNMAUK" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 15:47:03.527 +01:00 [DBG] Connection 0HMVFAULNMAUL established using the following protocol: "Tls12"
2023-11-27 15:47:03.541 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities - -
2023-11-27 15:47:03.543 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 15:47:03.574 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-11-27 15:47:03.582 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCitiesAsync (NewCityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-11-27 15:47:03.586 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCitiesAsync (NewCityInfo.API)'
2023-11-27 15:47:03.589 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCitiesAsync (NewCityInfo.API)'
2023-11-27 15:47:03.610 +01:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[NewCityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCitiesAsync() on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 15:47:03.617 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 15:47:03.618 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 15:47:03.621 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 15:47:03.624 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 15:47:03.627 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 15:47:03.633 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:47:04.106 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 15:47:04.399 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:47:05.475 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 15:47:05.552 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)'
2023-11-27 15:47:06.106 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    NewCityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-11-27 15:47:06.191 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 15:47:06.596 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (402ms).
2023-11-27 15:47:06.612 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:47:06.635 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:47:06.656 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2023-11-27 15:47:06.705 +01:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2023-11-27 15:47:06.738 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:47:06.772 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:47:06.775 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:47:06.787 +01:00 [DBG] A data reader was disposed.
2023-11-27 15:47:06.799 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:47:06.810 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:47:06.840 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 15:47:06.847 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 15:47:06.848 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 15:47:06.853 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 15:47:06.856 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 15:47:06.858 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Models.CityWithoutPointOfInterestDto, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-27 15:47:07.124 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCitiesAsync (NewCityInfo.API) in 3484.0125ms
2023-11-27 15:47:07.127 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCitiesAsync (NewCityInfo.API)'
2023-11-27 15:47:07.128 +01:00 [DBG] Connection id "0HMVFAULNMAUL" completed keep alive response.
2023-11-27 15:47:07.136 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 15:47:07.141 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities - - - 200 178 application/json;+charset=utf-8 3600.5092ms
2023-11-27 15:47:34.540 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePointOfInterets=true - -
2023-11-27 15:47:34.541 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 15:47:34.544 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 15:47:34.546 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 15:47:34.549 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:47:34.550 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:47:34.566 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 15:47:34.568 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 15:47:34.570 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 15:47:34.572 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 15:47:34.575 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 15:47:34.579 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 15:47:34.581 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:47:34.591 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:47:34.603 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:47:34.605 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 15:47:34.609 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:47:34.610 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:47:34.611 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:47:34.614 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:47:34.616 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:47:34.618 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-27 15:47:34.620 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:47:34.626 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:47:34.627 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:47:34.628 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:47:34.629 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:47:34.638 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 15:47:34.650 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 15:47:34.690 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0
            ORDER BY c.Name ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 15:47:34.707 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 15:47:34.709 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 15:47:34.713 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:47:34.714 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:47:34.721 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 15:47:34.728 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 15:47:34.732 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:47:34.740 +01:00 [DBG] A data reader was disposed.
2023-11-27 15:47:34.741 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:47:34.743 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:47:34.749 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 15:47:34.757 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 15:47:34.759 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 15:47:34.761 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 15:47:34.763 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 15:47:34.768 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityWithoutPointOfInterestDto'.
2023-11-27 15:47:34.771 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 190.4013ms
2023-11-27 15:47:34.773 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:47:34.774 +01:00 [DBG] Connection id "0HMVFAULNMAUL" completed keep alive response.
2023-11-27 15:47:34.776 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 15:47:34.778 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePointOfInterets=true - - - 200 58 application/json;+charset=utf-8 238.2635ms
2023-11-27 15:47:46.590 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePointOfInterest=true - -
2023-11-27 15:47:46.591 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 15:47:46.594 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 15:47:46.596 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 15:47:46.604 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:47:46.609 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:47:46.612 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 15:47:46.621 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 15:47:46.624 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 15:47:46.627 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 15:47:46.637 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 15:47:46.641 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 15:47:46.648 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:47:46.655 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:47:46.656 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:47:46.658 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 15:47:46.664 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:47:46.666 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:47:46.668 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:47:46.671 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:47:46.673 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:47:46.679 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-27 15:47:46.682 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:47:46.684 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:47:46.686 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:47:46.688 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:47:46.694 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:47:46.749 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 15:47:46.755 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 15:47:46.756 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 15:47:46.758 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:47:46.760 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:47:46.762 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 15:47:46.766 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 15:47:46.776 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:47:46.778 +01:00 [DBG] A data reader was disposed.
2023-11-27 15:47:46.780 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:47:46.782 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:47:46.787 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 15:47:46.792 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 15:47:46.793 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 15:47:46.795 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 15:47:46.796 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 15:47:46.798 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityWithoutPointOfInterestDto'.
2023-11-27 15:47:46.803 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 155.0906ms
2023-11-27 15:47:46.805 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:47:46.807 +01:00 [DBG] Connection id "0HMVFAULNMAUL" completed keep alive response.
2023-11-27 15:47:46.809 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 15:47:46.811 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePointOfInterest=true - - - 200 58 application/json;+charset=utf-8 221.1795ms
2023-11-27 15:47:48.481 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePointOfInterest=true - -
2023-11-27 15:47:48.482 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 15:47:48.483 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 15:47:48.485 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 15:47:48.488 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:47:48.490 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:47:48.492 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 15:47:48.495 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 15:47:48.500 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 15:47:48.502 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 15:47:48.505 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 15:47:48.507 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 15:47:48.510 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:47:48.517 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:47:48.518 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:47:48.520 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 15:47:48.521 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:47:48.523 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:47:48.525 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:47:48.527 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:47:48.532 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:47:48.533 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-27 15:47:48.535 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:47:48.537 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:47:48.538 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:47:48.540 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:47:48.542 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:47:48.546 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 15:47:48.549 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 15:47:48.550 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 15:47:48.551 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:47:48.553 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:47:48.554 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 15:47:48.562 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 15:47:48.565 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:47:48.567 +01:00 [DBG] A data reader was disposed.
2023-11-27 15:47:48.568 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:47:48.569 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:47:48.571 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 15:47:48.579 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 15:47:48.580 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 15:47:48.582 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 15:47:48.583 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 15:47:48.585 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityWithoutPointOfInterestDto'.
2023-11-27 15:47:48.587 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 77.3258ms
2023-11-27 15:47:48.593 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:47:48.595 +01:00 [DBG] Connection id "0HMVFAULNMAUL" completed keep alive response.
2023-11-27 15:47:48.596 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 15:47:48.598 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePointOfInterest=true - - - 200 58 application/json;+charset=utf-8 116.6582ms
2023-11-27 15:48:01.485 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2 - -
2023-11-27 15:48:01.486 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 15:48:01.488 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 15:48:01.490 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 15:48:01.493 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:48:01.495 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:48:01.497 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 15:48:01.501 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 15:48:01.504 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 15:48:01.511 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 15:48:01.514 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 15:48:01.516 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 15:48:01.520 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:48:01.527 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:48:01.529 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:48:01.530 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 15:48:01.532 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:48:01.533 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:48:01.534 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:48:01.536 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:48:01.540 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:48:01.542 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-27 15:48:01.545 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:48:01.547 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:48:01.548 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:48:01.550 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:48:01.551 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:48:01.556 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 15:48:01.558 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 15:48:01.559 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 15:48:01.561 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:48:01.563 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:48:01.564 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 15:48:01.571 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 15:48:01.575 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:48:01.577 +01:00 [DBG] A data reader was disposed.
2023-11-27 15:48:01.578 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:48:01.580 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:48:01.581 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 15:48:01.589 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 15:48:01.590 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 15:48:01.591 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 15:48:01.592 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 15:48:01.595 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityWithoutPointOfInterestDto'.
2023-11-27 15:48:01.596 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 76.2786ms
2023-11-27 15:48:01.597 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:48:01.598 +01:00 [DBG] Connection id "0HMVFAULNMAUL" completed keep alive response.
2023-11-27 15:48:01.605 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 15:48:01.607 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2 - - - 200 58 application/json;+charset=utf-8 121.9321ms
2023-11-27 15:48:38.852 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 15:48:38.854 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 15:48:38.856 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 15:48:38.859 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 15:48:38.862 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:48:38.864 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:48:38.866 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 15:48:38.878 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 15:48:38.882 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 15:48:38.889 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 15:48:38.898 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 15:48:38.905 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 15:48:38.912 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:48:38.919 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:48:38.924 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:48:38.928 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 15:48:38.935 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:48:38.940 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:48:38.945 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:48:38.950 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:48:38.956 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:48:38.960 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 15:48:38.967 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:48:38.972 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:48:38.980 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:48:38.988 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:48:38.994 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 15:48:39.009 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .Include(c => c.pointOfInterests)
    .FirstOrDefault()'
2023-11-27 15:48:39.164 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 252.629ms
2023-11-27 15:48:39.170 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:48:39.173 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The expression 'c.pointOfInterests' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see http://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.PopulateIncludeTree(IncludeTreeNode includeTreeNode, Expression expression, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at NewCityInfo.API.Models.CityInfoRepository.GetCityAsyn(Int32 cityId, Boolean includepointOfInterest) in C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\Models\CityInfoRepository.cs:line 24
   at NewCityInfo.API.Controllers.CitiesController.GetCity(Int32 cityId, Boolean includePopintOfInterest) in C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\Controllers\CitiesController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-27 15:48:39.241 +01:00 [DBG] Connection id "0HMVFAULNMAUL" completed keep alive response.
2023-11-27 15:48:39.243 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 15:48:39.245 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 500 - text/plain;+charset=utf-8 393.8908ms
2023-11-27 15:50:08.223 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities - -
2023-11-27 15:50:08.228 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 15:50:08.231 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-11-27 15:50:08.234 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCitiesAsync (NewCityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-11-27 15:50:08.236 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCitiesAsync (NewCityInfo.API)'
2023-11-27 15:50:08.238 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCitiesAsync (NewCityInfo.API)'
2023-11-27 15:50:08.241 +01:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[NewCityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCitiesAsync() on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 15:50:08.246 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 15:50:08.251 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 15:50:08.254 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 15:50:08.260 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 15:50:08.267 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 15:50:08.269 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:50:08.274 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:50:08.277 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 15:50:08.283 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 15:50:08.284 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 15:50:08.286 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:50:08.289 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:50:08.291 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2023-11-27 15:50:08.299 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2023-11-27 15:50:08.305 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:50:08.308 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:50:08.314 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:50:08.317 +01:00 [DBG] A data reader was disposed.
2023-11-27 15:50:08.320 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:50:08.325 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:50:08.333 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 15:50:08.346 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 15:50:08.349 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 15:50:08.354 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 15:50:08.361 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 15:50:08.371 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Models.CityWithoutPointOfInterestDto, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-27 15:50:08.379 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCitiesAsync (NewCityInfo.API) in 109.3248ms
2023-11-27 15:50:08.383 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCitiesAsync (NewCityInfo.API)'
2023-11-27 15:50:08.386 +01:00 [DBG] Connection id "0HMVFAULNMAUL" completed keep alive response.
2023-11-27 15:50:08.392 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 15:50:08.394 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities - - - 200 178 application/json;+charset=utf-8 170.6315ms
2023-11-27 15:51:52.913 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 15:51:53.032 +01:00 [DBG] Hosting starting
2023-11-27 15:51:53.155 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 15:51:53.205 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 15:51:53.207 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 15:51:53.209 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 15:51:53.210 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 15:51:53.212 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 15:51:53.214 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 15:51:53.215 +01:00 [INF] Hosting environment: Development
2023-11-27 15:51:53.217 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 15:51:53.219 +01:00 [DBG] Hosting started
2023-11-27 15:51:53.536 +01:00 [DBG] Connection id "0HMVFB1IHHD1F" accepted.
2023-11-27 15:51:53.536 +01:00 [DBG] Connection id "0HMVFB1IHHD1E" accepted.
2023-11-27 15:51:53.539 +01:00 [DBG] Connection id "0HMVFB1IHHD1F" started.
2023-11-27 15:51:53.539 +01:00 [DBG] Connection id "0HMVFB1IHHD1E" started.
2023-11-27 15:51:53.549 +01:00 [DBG] Connection id "0HMVFB1IHHD1E" received FIN.
2023-11-27 15:51:53.549 +01:00 [DBG] Connection id "0HMVFB1IHHD1F" received FIN.
2023-11-27 15:51:53.557 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 15:51:53.557 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 15:51:53.594 +01:00 [DBG] Connection id "0HMVFB1IHHD1E" stopped.
2023-11-27 15:51:53.595 +01:00 [DBG] Connection id "0HMVFB1IHHD1F" stopped.
2023-11-27 15:51:53.598 +01:00 [DBG] Connection id "0HMVFB1IHHD1E" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 15:51:53.598 +01:00 [DBG] Connection id "0HMVFB1IHHD1F" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 15:52:00.808 +01:00 [DBG] Connection id "0HMVFB1IHHD1G" accepted.
2023-11-27 15:52:00.824 +01:00 [DBG] Connection id "0HMVFB1IHHD1G" started.
2023-11-27 15:52:00.921 +01:00 [DBG] Connection 0HMVFB1IHHD1G established using the following protocol: "Tls12"
2023-11-27 15:52:00.971 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 15:52:01.098 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 15:52:01.218 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 15:52:01.243 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 15:52:01.269 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 304.3304ms
2023-11-27 15:52:01.275 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 15:52:01.280 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 15:52:01.292 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 12.9038ms
2023-11-27 15:52:01.371 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 96.0919ms
2023-11-27 15:52:01.429 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 15:52:01.642 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 213.5895ms
2023-11-27 15:52:02.714 +01:00 [DBG] Connection id "0HMVFB1IHHD1H" accepted.
2023-11-27 15:52:02.715 +01:00 [DBG] Connection id "0HMVFB1IHHD1H" received FIN.
2023-11-27 15:52:02.715 +01:00 [DBG] Connection id "0HMVFB1IHHD1H" started.
2023-11-27 15:52:02.716 +01:00 [DBG] Connection id "0HMVFB1IHHD1I" accepted.
2023-11-27 15:52:02.719 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 15:52:02.721 +01:00 [DBG] Connection id "0HMVFB1IHHD1I" started.
2023-11-27 15:52:02.729 +01:00 [DBG] Connection id "0HMVFB1IHHD1H" stopped.
2023-11-27 15:52:02.731 +01:00 [DBG] Connection id "0HMVFB1IHHD1H" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 15:52:02.738 +01:00 [DBG] Connection 0HMVFB1IHHD1I established using the following protocol: "Tls12"
2023-11-27 15:52:02.753 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities - -
2023-11-27 15:52:02.756 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 15:52:02.788 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-11-27 15:52:02.794 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCitiesAsync (NewCityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-11-27 15:52:02.796 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCitiesAsync (NewCityInfo.API)'
2023-11-27 15:52:02.800 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCitiesAsync (NewCityInfo.API)'
2023-11-27 15:52:02.824 +01:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[NewCityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCitiesAsync() on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 15:52:02.828 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 15:52:02.829 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 15:52:02.833 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 15:52:02.835 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 15:52:02.837 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 15:52:02.840 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:52:02.998 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 15:52:03.239 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:52:04.241 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 15:52:04.310 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)'
2023-11-27 15:52:04.675 +01:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    NewCityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-11-27 15:52:04.728 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 15:52:04.798 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (65ms).
2023-11-27 15:52:04.812 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:52:04.834 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:52:04.848 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2023-11-27 15:52:04.871 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
ORDER BY "c"."Name"
2023-11-27 15:52:04.895 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:52:04.920 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:52:04.923 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:52:04.932 +01:00 [DBG] A data reader was disposed.
2023-11-27 15:52:04.941 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:52:04.948 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:52:04.970 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 15:52:04.976 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 15:52:04.977 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 15:52:04.978 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 15:52:04.980 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 15:52:04.985 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Models.CityWithoutPointOfInterestDto, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-27 15:52:05.150 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCitiesAsync (NewCityInfo.API) in 2303.7051ms
2023-11-27 15:52:05.155 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCitiesAsync (NewCityInfo.API)'
2023-11-27 15:52:05.156 +01:00 [DBG] Connection id "0HMVFB1IHHD1I" completed keep alive response.
2023-11-27 15:52:05.161 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 15:52:05.167 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities - - - 200 178 application/json;+charset=utf-8 2414.3379ms
2023-11-27 15:52:08.466 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2 - -
2023-11-27 15:52:08.467 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 15:52:08.470 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 15:52:08.471 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 15:52:08.475 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:52:08.480 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:52:08.496 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 15:52:08.499 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 15:52:08.502 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 15:52:08.504 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 15:52:08.512 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 15:52:08.515 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 15:52:08.517 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:52:08.531 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:52:08.538 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:52:08.541 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 15:52:08.543 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:52:08.544 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:52:08.546 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:52:08.549 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:52:08.553 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:52:08.556 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-27 15:52:08.559 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:52:08.562 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:52:08.564 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:52:08.566 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:52:08.570 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:52:08.576 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 15:52:08.589 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 15:52:08.636 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0
            ORDER BY c.Name ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 15:52:08.659 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 15:52:08.661 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 15:52:08.666 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:52:08.668 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:52:08.677 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 15:52:08.689 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 15:52:08.696 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:52:08.698 +01:00 [DBG] A data reader was disposed.
2023-11-27 15:52:08.700 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:52:08.702 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:52:08.708 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 15:52:08.714 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 15:52:08.716 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 15:52:08.718 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 15:52:08.719 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 15:52:08.726 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityWithoutPointOfInterestDto'.
2023-11-27 15:52:08.729 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 211.8378ms
2023-11-27 15:52:08.731 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:52:08.733 +01:00 [DBG] Connection id "0HMVFB1IHHD1I" completed keep alive response.
2023-11-27 15:52:08.735 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 15:52:08.741 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2 - - - 200 58 application/json;+charset=utf-8 274.5653ms
2023-11-27 15:52:12.729 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/4 - -
2023-11-27 15:52:12.730 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 15:52:12.732 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/4'
2023-11-27 15:52:12.733 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/4'
2023-11-27 15:52:12.736 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:52:12.737 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:52:12.739 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 15:52:12.742 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 15:52:12.744 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 15:52:12.750 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 15:52:12.753 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 15:52:12.755 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 15:52:12.758 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:52:12.763 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:52:12.766 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:52:12.768 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 15:52:12.770 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:52:12.772 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:52:12.774 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:52:12.781 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:52:12.783 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:52:12.784 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-27 15:52:12.787 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:52:12.790 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:52:12.796 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:52:12.797 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:52:12.798 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:52:12.854 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 15:52:12.862 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 15:52:12.863 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 15:52:12.864 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:52:12.866 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:52:12.868 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 15:52:12.875 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 15:52:12.880 +01:00 [DBG] A data reader was disposed.
2023-11-27 15:52:12.881 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:52:12.883 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:52:12.885 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 15:52:12.892 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 15:52:12.894 +01:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-11-27 15:52:12.897 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-11-27 15:52:12.899 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-11-27 15:52:12.921 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 163.2219ms
2023-11-27 15:52:12.922 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:52:12.924 +01:00 [DBG] Connection id "0HMVFB1IHHD1I" completed keep alive response.
2023-11-27 15:52:12.925 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 15:52:12.927 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/4 - - - 404 161 application/problem+json;+charset=utf-8 198.2849ms
2023-11-27 15:53:11.263 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?.includePointOfInterest=true - -
2023-11-27 15:53:11.268 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 15:53:11.270 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 15:53:11.272 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 15:53:11.275 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:53:11.279 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:53:11.281 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 15:53:11.293 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 15:53:11.297 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 15:53:11.302 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 15:53:11.313 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 15:53:11.316 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 15:53:11.325 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:53:11.330 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:53:11.338 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:53:11.344 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 15:53:11.348 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:53:11.353 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:53:11.360 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:53:11.364 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:53:11.371 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:53:11.377 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-27 15:53:11.381 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:53:11.389 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:53:11.394 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:53:11.398 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:53:11.405 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:53:11.409 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 15:53:11.413 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 15:53:11.417 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2023-11-27 15:53:11.420 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:53:11.423 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:53:11.426 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 15:53:11.436 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 15:53:11.445 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:53:11.454 +01:00 [DBG] A data reader was disposed.
2023-11-27 15:53:11.458 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:53:11.465 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:53:11.470 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 15:53:11.484 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 15:53:11.488 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 15:53:11.492 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 15:53:11.496 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 15:53:11.501 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityWithoutPointOfInterestDto'.
2023-11-27 15:53:11.506 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 181.3447ms
2023-11-27 15:53:11.512 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:53:11.515 +01:00 [DBG] Connection id "0HMVFB1IHHD1I" completed keep alive response.
2023-11-27 15:53:11.519 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 15:53:11.523 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?.includePointOfInterest=true - - - 200 58 application/json;+charset=utf-8 259.7435ms
2023-11-27 15:53:17.653 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePointOfInterest=true - -
2023-11-27 15:53:17.654 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 15:53:17.655 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 15:53:17.657 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 15:53:17.660 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:53:17.665 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:53:17.668 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 15:53:17.673 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 15:53:17.677 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 15:53:17.683 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 15:53:17.689 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 15:53:17.692 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 15:53:17.699 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:53:17.702 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:53:17.706 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:53:17.711 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 15:53:17.715 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:53:17.718 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:53:17.723 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:53:17.730 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:53:17.733 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:53:17.739 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-27 15:53:17.746 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:53:17.750 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:53:17.757 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:53:17.759 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:53:17.763 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:53:17.766 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 15:53:17.769 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 15:53:17.774 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2023-11-27 15:53:17.778 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:53:17.782 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:53:17.789 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 15:53:17.797 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 15:53:17.807 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 15:53:17.813 +01:00 [DBG] A data reader was disposed.
2023-11-27 15:53:17.815 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 15:53:17.823 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 15:53:17.828 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 15:53:17.839 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 15:53:17.842 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 15:53:17.845 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 15:53:17.848 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 15:53:17.856 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityWithoutPointOfInterestDto'.
2023-11-27 15:53:17.862 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 163.2957ms
2023-11-27 15:53:17.867 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:53:17.871 +01:00 [DBG] Connection id "0HMVFB1IHHD1I" completed keep alive response.
2023-11-27 15:53:17.875 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 15:53:17.881 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePointOfInterest=true - - - 200 58 application/json;+charset=utf-8 228.6926ms
2023-11-27 15:53:43.762 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 15:53:43.765 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 15:53:43.767 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 15:53:43.770 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 15:53:43.775 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:53:43.778 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:53:43.781 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 15:53:43.787 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 15:53:43.790 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 15:53:43.796 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 15:53:43.803 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 15:53:43.807 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 15:53:43.813 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:53:43.817 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:53:43.822 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:53:43.825 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 15:53:43.829 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:53:43.831 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:53:43.833 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:53:43.837 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:53:43.842 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:53:43.846 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 15:53:43.851 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:53:43.853 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:53:43.855 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:53:43.858 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:53:43.865 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 15:53:43.874 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterests)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 15:53:44.018 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 205.4608ms
2023-11-27 15:53:44.021 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:53:44.024 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The expression 'c.pointOfInterests' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see http://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.PopulateIncludeTree(IncludeTreeNode includeTreeNode, Expression expression, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at NewCityInfo.API.Models.CityInfoRepository.GetCityAsyn(Int32 cityId, Boolean includepointOfInterest) in C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\Models\CityInfoRepository.cs:line 24
   at NewCityInfo.API.Controllers.CitiesController.GetCity(Int32 cityId, Boolean includePopintOfInterest) in C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\Controllers\CitiesController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-27 15:53:44.084 +01:00 [DBG] Connection id "0HMVFB1IHHD1I" completed keep alive response.
2023-11-27 15:53:44.086 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 15:53:44.088 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 500 - text/plain;+charset=utf-8 325.9578ms
2023-11-27 15:56:47.978 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 15:56:48.091 +01:00 [DBG] Hosting starting
2023-11-27 15:56:48.211 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 15:56:48.254 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 15:56:48.256 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 15:56:48.257 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 15:56:48.259 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 15:56:48.261 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 15:56:48.263 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 15:56:48.264 +01:00 [INF] Hosting environment: Development
2023-11-27 15:56:48.266 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 15:56:48.268 +01:00 [DBG] Hosting started
2023-11-27 15:56:48.382 +01:00 [DBG] Connection id "0HMVFB4ADE154" received FIN.
2023-11-27 15:56:48.382 +01:00 [DBG] Connection id "0HMVFB4ADE153" received FIN.
2023-11-27 15:56:48.400 +01:00 [DBG] Connection id "0HMVFB4ADE154" accepted.
2023-11-27 15:56:48.400 +01:00 [DBG] Connection id "0HMVFB4ADE153" accepted.
2023-11-27 15:56:48.405 +01:00 [DBG] Connection id "0HMVFB4ADE154" started.
2023-11-27 15:56:48.405 +01:00 [DBG] Connection id "0HMVFB4ADE153" started.
2023-11-27 15:56:48.425 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 15:56:48.425 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 15:56:48.459 +01:00 [DBG] Connection id "0HMVFB4ADE154" stopped.
2023-11-27 15:56:48.459 +01:00 [DBG] Connection id "0HMVFB4ADE153" stopped.
2023-11-27 15:56:48.468 +01:00 [DBG] Connection id "0HMVFB4ADE153" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 15:56:48.468 +01:00 [DBG] Connection id "0HMVFB4ADE154" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 15:56:48.541 +01:00 [DBG] Connection id "0HMVFB4ADE155" accepted.
2023-11-27 15:56:48.544 +01:00 [DBG] Connection id "0HMVFB4ADE155" started.
2023-11-27 15:56:48.608 +01:00 [DBG] Connection 0HMVFB4ADE155 established using the following protocol: "Tls12"
2023-11-27 15:56:48.670 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 15:56:48.791 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 15:56:48.888 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 15:56:48.908 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 15:56:48.914 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 248.3202ms
2023-11-27 15:56:48.928 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 15:56:48.928 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 15:56:48.936 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 7.6421ms
2023-11-27 15:56:49.006 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 77.3346ms
2023-11-27 15:56:49.053 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 15:56:49.208 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 155.0286ms
2023-11-27 15:57:05.103 +01:00 [DBG] Connection id "0HMVFB4ADE156" accepted.
2023-11-27 15:57:05.105 +01:00 [DBG] Connection id "0HMVFB4ADE156" started.
2023-11-27 15:57:05.105 +01:00 [DBG] Connection id "0HMVFB4ADE156" received FIN.
2023-11-27 15:57:05.105 +01:00 [DBG] Connection id "0HMVFB4ADE157" accepted.
2023-11-27 15:57:05.109 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 15:57:05.110 +01:00 [DBG] Connection id "0HMVFB4ADE157" started.
2023-11-27 15:57:05.120 +01:00 [DBG] Connection id "0HMVFB4ADE156" stopped.
2023-11-27 15:57:05.121 +01:00 [DBG] Connection id "0HMVFB4ADE156" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 15:57:05.128 +01:00 [DBG] Connection 0HMVFB4ADE157 established using the following protocol: "Tls12"
2023-11-27 15:57:05.145 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 15:57:05.148 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 15:57:05.178 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 15:57:05.184 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 15:57:05.186 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:57:05.189 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:57:05.218 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 15:57:05.221 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 15:57:05.222 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 15:57:05.223 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 15:57:05.225 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 15:57:05.227 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 15:57:05.229 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:57:05.372 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 15:57:05.574 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:57:05.583 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:57:05.585 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 15:57:05.587 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:57:05.588 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:57:05.589 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:57:05.592 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:57:05.595 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:57:05.596 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 15:57:05.598 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:57:05.600 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:57:05.601 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:57:05.603 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:57:06.563 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 15:57:06.658 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterests)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 15:57:06.902 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 1667.4881ms
2023-11-27 15:57:06.906 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:57:06.908 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The expression 'c.pointOfInterests' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see http://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.PopulateIncludeTree(IncludeTreeNode includeTreeNode, Expression expression, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at NewCityInfo.API.Models.CityInfoRepository.GetCityAsyn(Int32 cityId, Boolean includepointOfInterest) in C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\Models\CityInfoRepository.cs:line 24
   at NewCityInfo.API.Controllers.CitiesController.GetCity(Int32 cityId, Boolean includePopintOfInterest) in C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\Controllers\CitiesController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-27 15:57:06.941 +01:00 [DBG] Connection id "0HMVFB4ADE157" completed keep alive response.
2023-11-27 15:57:06.949 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 15:57:06.954 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 500 - text/plain;+charset=utf-8 1809.6876ms
2023-11-27 15:58:18.231 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 15:58:18.338 +01:00 [DBG] Hosting starting
2023-11-27 15:58:18.464 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 15:58:18.504 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 15:58:18.505 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 15:58:18.506 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 15:58:18.507 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 15:58:18.508 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 15:58:18.509 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 15:58:18.509 +01:00 [INF] Hosting environment: Development
2023-11-27 15:58:18.510 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 15:58:18.511 +01:00 [DBG] Hosting started
2023-11-27 15:58:18.653 +01:00 [DBG] Connection id "0HMVFB55A9MUO" accepted.
2023-11-27 15:58:18.653 +01:00 [DBG] Connection id "0HMVFB55A9MUN" accepted.
2023-11-27 15:58:18.660 +01:00 [DBG] Connection id "0HMVFB55A9MUO" started.
2023-11-27 15:58:18.661 +01:00 [DBG] Connection id "0HMVFB55A9MUN" started.
2023-11-27 15:58:18.662 +01:00 [DBG] Connection id "0HMVFB55A9MUO" received FIN.
2023-11-27 15:58:18.662 +01:00 [DBG] Connection id "0HMVFB55A9MUN" received FIN.
2023-11-27 15:58:18.683 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 15:58:18.683 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 15:58:18.716 +01:00 [DBG] Connection id "0HMVFB55A9MUO" stopped.
2023-11-27 15:58:18.716 +01:00 [DBG] Connection id "0HMVFB55A9MUN" stopped.
2023-11-27 15:58:18.720 +01:00 [DBG] Connection id "0HMVFB55A9MUO" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 15:58:18.720 +01:00 [DBG] Connection id "0HMVFB55A9MUN" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 15:58:18.984 +01:00 [DBG] Connection id "0HMVFB55A9MUP" accepted.
2023-11-27 15:58:18.986 +01:00 [DBG] Connection id "0HMVFB55A9MUP" started.
2023-11-27 15:58:19.053 +01:00 [DBG] Connection 0HMVFB55A9MUP established using the following protocol: "Tls12"
2023-11-27 15:58:19.118 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 15:58:19.235 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 15:58:19.344 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 15:58:19.365 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 15:58:19.371 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 256.4666ms
2023-11-27 15:58:19.381 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 15:58:19.381 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 15:58:19.390 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 8.5858ms
2023-11-27 15:58:19.454 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 73.0339ms
2023-11-27 15:58:19.501 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 15:58:19.667 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 166.1408ms
2023-11-27 15:58:23.058 +01:00 [DBG] Connection id "0HMVFB55A9MUQ" accepted.
2023-11-27 15:58:23.058 +01:00 [DBG] Connection id "0HMVFB55A9MUQ" received FIN.
2023-11-27 15:58:23.059 +01:00 [DBG] Connection id "0HMVFB55A9MUQ" started.
2023-11-27 15:58:23.060 +01:00 [DBG] Connection id "0HMVFB55A9MUR" accepted.
2023-11-27 15:58:23.062 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 15:58:23.063 +01:00 [DBG] Connection id "0HMVFB55A9MUR" started.
2023-11-27 15:58:23.067 +01:00 [DBG] Connection id "0HMVFB55A9MUQ" stopped.
2023-11-27 15:58:23.069 +01:00 [DBG] Connection id "0HMVFB55A9MUQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 15:58:23.075 +01:00 [DBG] Connection 0HMVFB55A9MUR established using the following protocol: "Tls12"
2023-11-27 15:58:23.088 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 15:58:23.091 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 15:58:23.117 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 15:58:23.123 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 15:58:23.126 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:58:23.130 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:58:23.158 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 15:58:23.162 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 15:58:23.163 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 15:58:23.166 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 15:58:23.170 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 15:58:23.172 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 15:58:23.176 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:58:23.323 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 15:58:23.548 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 15:58:23.560 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:58:23.563 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 15:58:23.565 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:58:23.567 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:58:23.568 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 15:58:23.571 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 15:58:23.574 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:58:23.576 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 15:58:23.578 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:58:23.580 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:58:23.581 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 15:58:23.583 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 15:58:24.549 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 15:58:24.663 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterests)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 15:58:24.937 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 1755.2389ms
2023-11-27 15:58:24.941 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 15:58:24.942 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The expression 'c.pointOfInterests' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see http://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.PopulateIncludeTree(IncludeTreeNode includeTreeNode, Expression expression, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at NewCityInfo.API.Models.CityInfoRepository.GetCityAsyn(Int32 cityId, Boolean includepointOfInterest) in C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\Models\CityInfoRepository.cs:line 24
   at NewCityInfo.API.Controllers.CitiesController.GetCity(Int32 cityId, Boolean includePopintOfInterest) in C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\Controllers\CitiesController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-27 15:58:24.978 +01:00 [DBG] Connection id "0HMVFB55A9MUR" completed keep alive response.
2023-11-27 15:58:24.984 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 15:58:24.990 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 500 - text/plain;+charset=utf-8 1902.2805ms
2023-11-27 16:08:26.265 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 16:08:26.372 +01:00 [DBG] Hosting starting
2023-11-27 16:08:26.544 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 16:08:26.622 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 16:08:26.623 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 16:08:26.624 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 16:08:26.625 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 16:08:26.626 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 16:08:26.627 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 16:08:26.629 +01:00 [INF] Hosting environment: Development
2023-11-27 16:08:26.630 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 16:08:26.630 +01:00 [DBG] Hosting started
2023-11-27 16:08:26.694 +01:00 [DBG] Connection id "0HMVFBAQH1RHG" received FIN.
2023-11-27 16:08:26.694 +01:00 [DBG] Connection id "0HMVFBAQH1RHF" received FIN.
2023-11-27 16:08:26.698 +01:00 [DBG] Connection id "0HMVFBAQH1RHG" accepted.
2023-11-27 16:08:26.698 +01:00 [DBG] Connection id "0HMVFBAQH1RHF" accepted.
2023-11-27 16:08:26.701 +01:00 [DBG] Connection id "0HMVFBAQH1RHF" started.
2023-11-27 16:08:26.701 +01:00 [DBG] Connection id "0HMVFBAQH1RHG" started.
2023-11-27 16:08:26.724 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 16:08:26.724 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 16:08:26.763 +01:00 [DBG] Connection id "0HMVFBAQH1RHF" stopped.
2023-11-27 16:08:26.763 +01:00 [DBG] Connection id "0HMVFBAQH1RHG" stopped.
2023-11-27 16:08:26.767 +01:00 [DBG] Connection id "0HMVFBAQH1RHG" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 16:08:26.767 +01:00 [DBG] Connection id "0HMVFBAQH1RHF" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 16:08:26.853 +01:00 [DBG] Connection id "0HMVFBAQH1RHH" accepted.
2023-11-27 16:08:26.861 +01:00 [DBG] Connection id "0HMVFBAQH1RHH" started.
2023-11-27 16:08:26.921 +01:00 [DBG] Connection 0HMVFBAQH1RHH established using the following protocol: "Tls12"
2023-11-27 16:08:26.972 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 16:08:27.090 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 16:08:27.194 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 16:08:27.213 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 16:08:27.220 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 251.4709ms
2023-11-27 16:08:27.233 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 16:08:27.233 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 16:08:27.239 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 6.3487ms
2023-11-27 16:08:27.300 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 66.9785ms
2023-11-27 16:08:27.341 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 16:08:27.519 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 177.6792ms
2023-11-27 16:08:31.027 +01:00 [DBG] Connection id "0HMVFBAQH1RHI" accepted.
2023-11-27 16:08:31.028 +01:00 [DBG] Connection id "0HMVFBAQH1RHI" received FIN.
2023-11-27 16:08:31.028 +01:00 [DBG] Connection id "0HMVFBAQH1RHI" started.
2023-11-27 16:08:31.029 +01:00 [DBG] Connection id "0HMVFBAQH1RHJ" accepted.
2023-11-27 16:08:31.032 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 16:08:31.033 +01:00 [DBG] Connection id "0HMVFBAQH1RHJ" started.
2023-11-27 16:08:31.038 +01:00 [DBG] Connection id "0HMVFBAQH1RHI" stopped.
2023-11-27 16:08:31.040 +01:00 [DBG] Connection id "0HMVFBAQH1RHI" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 16:08:31.045 +01:00 [DBG] Connection 0HMVFBAQH1RHJ established using the following protocol: "Tls12"
2023-11-27 16:08:31.056 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 16:08:31.059 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 16:08:31.088 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 16:08:31.095 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 16:08:31.097 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:08:31.100 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:08:31.129 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 16:08:31.132 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 16:08:31.134 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 16:08:31.135 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 16:08:31.137 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 16:08:31.139 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 16:08:31.141 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 16:08:31.284 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 16:08:31.531 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 16:08:31.542 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 16:08:31.545 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 16:08:31.547 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:08:31.548 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:08:31.550 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 16:08:31.552 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:08:31.555 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 16:08:31.556 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 16:08:31.559 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:08:31.560 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:08:31.561 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 16:08:31.563 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:08:32.548 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 16:08:32.666 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 16:08:32.941 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 1795.9401ms
2023-11-27 16:08:32.945 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:08:32.947 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The expression 'c.pointOfInterestsInCity' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see http://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.PopulateIncludeTree(IncludeTreeNode includeTreeNode, Expression expression, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at NewCityInfo.API.Models.CityInfoRepository.GetCityAsyn(Int32 cityId, Boolean includepointOfInterest) in C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\Models\CityInfoRepository.cs:line 24
   at NewCityInfo.API.Controllers.CitiesController.GetCity(Int32 cityId, Boolean includePopintOfInterest) in C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\Controllers\CitiesController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-27 16:08:32.988 +01:00 [DBG] Connection id "0HMVFBAQH1RHJ" completed keep alive response.
2023-11-27 16:08:32.995 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 16:08:33.001 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 500 - text/plain;+charset=utf-8 1945.0109ms
2023-11-27 16:08:35.280 +01:00 [DBG] Connection id "0HMVFBAQH1RHJ" received FIN.
2023-11-27 16:08:35.284 +01:00 [DBG] Connection id "0HMVFBAQH1RHJ" disconnecting.
2023-11-27 16:08:35.290 +01:00 [DBG] Connection id "0HMVFBAQH1RHJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 16:08:35.295 +01:00 [DBG] Connection id "0HMVFBAQH1RHJ" stopped.
2023-11-27 16:16:48.320 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 16:16:48.429 +01:00 [DBG] Hosting starting
2023-11-27 16:16:48.548 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 16:16:48.602 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 16:16:48.603 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 16:16:48.604 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 16:16:48.605 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 16:16:48.606 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 16:16:48.607 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 16:16:48.609 +01:00 [INF] Hosting environment: Development
2023-11-27 16:16:48.610 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 16:16:48.611 +01:00 [DBG] Hosting started
2023-11-27 16:16:48.776 +01:00 [DBG] Connection id "0HMVFBFG58E55" accepted.
2023-11-27 16:16:48.776 +01:00 [DBG] Connection id "0HMVFBFG58E56" accepted.
2023-11-27 16:16:48.778 +01:00 [DBG] Connection id "0HMVFBFG58E56" started.
2023-11-27 16:16:48.778 +01:00 [DBG] Connection id "0HMVFBFG58E55" started.
2023-11-27 16:16:48.784 +01:00 [DBG] Connection id "0HMVFBFG58E55" received FIN.
2023-11-27 16:16:48.784 +01:00 [DBG] Connection id "0HMVFBFG58E56" received FIN.
2023-11-27 16:16:48.799 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 16:16:48.799 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 16:16:48.843 +01:00 [DBG] Connection id "0HMVFBFG58E55" stopped.
2023-11-27 16:16:48.843 +01:00 [DBG] Connection id "0HMVFBFG58E56" stopped.
2023-11-27 16:16:48.847 +01:00 [DBG] Connection id "0HMVFBFG58E56" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 16:16:48.847 +01:00 [DBG] Connection id "0HMVFBFG58E55" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 16:16:48.937 +01:00 [DBG] Connection id "0HMVFBFG58E57" accepted.
2023-11-27 16:16:48.938 +01:00 [DBG] Connection id "0HMVFBFG58E57" started.
2023-11-27 16:16:49.028 +01:00 [DBG] Connection 0HMVFBFG58E57 established using the following protocol: "Tls12"
2023-11-27 16:16:49.079 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 16:16:49.213 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 16:16:49.341 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 16:16:49.370 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 16:16:49.391 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 313.5777ms
2023-11-27 16:16:49.398 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 16:16:49.398 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 16:16:49.408 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 10.4919ms
2023-11-27 16:16:49.515 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 117.2345ms
2023-11-27 16:16:49.574 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 16:16:49.751 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 176.6297ms
2023-11-27 16:17:00.708 +01:00 [DBG] Connection id "0HMVFBFG58E58" accepted.
2023-11-27 16:17:00.709 +01:00 [DBG] Connection id "0HMVFBFG58E58" started.
2023-11-27 16:17:00.710 +01:00 [DBG] Connection id "0HMVFBFG58E59" accepted.
2023-11-27 16:17:00.710 +01:00 [DBG] Connection id "0HMVFBFG58E58" received FIN.
2023-11-27 16:17:00.712 +01:00 [DBG] Connection id "0HMVFBFG58E59" started.
2023-11-27 16:17:00.715 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 16:17:00.722 +01:00 [DBG] Connection id "0HMVFBFG58E58" stopped.
2023-11-27 16:17:00.724 +01:00 [DBG] Connection id "0HMVFBFG58E58" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 16:17:00.729 +01:00 [DBG] Connection 0HMVFBFG58E59 established using the following protocol: "Tls12"
2023-11-27 16:17:00.741 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 16:17:00.745 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 16:17:00.774 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 16:17:00.781 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 16:17:00.783 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:17:00.786 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:17:00.813 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 16:17:00.815 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 16:17:00.817 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 16:17:00.818 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 16:17:00.820 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 16:17:00.821 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 16:17:00.823 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 16:17:00.974 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 16:17:01.215 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 16:17:01.226 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 16:17:01.228 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 16:17:01.231 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:17:01.232 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:17:01.234 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 16:17:01.237 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:17:01.241 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 16:17:01.244 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 16:17:01.246 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:17:01.247 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:17:01.248 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 16:17:01.250 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:17:02.203 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 16:17:02.295 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 16:17:02.557 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 1727.4308ms
2023-11-27 16:17:02.560 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:17:02.562 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The expression 'c.pointOfInterestsInCity' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see http://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.PopulateIncludeTree(IncludeTreeNode includeTreeNode, Expression expression, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at NewCityInfo.API.Models.CityInfoRepository.GetCityAsyn(Int32 cityId, Boolean includepointOfInterest) in C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\Models\CityInfoRepository.cs:line 24
   at NewCityInfo.API.Controllers.CitiesController.GetCity(Int32 cityId, Boolean includePopintOfInterest) in C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\Controllers\CitiesController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-27 16:17:02.601 +01:00 [DBG] Connection id "0HMVFBFG58E59" completed keep alive response.
2023-11-27 16:17:02.610 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 16:17:02.618 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 500 - text/plain;+charset=utf-8 1876.1977ms
2023-11-27 16:17:27.699 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2/pointofinterests - -
2023-11-27 16:17:27.700 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 16:17:27.702 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2/pointofinterests'
2023-11-27 16:17:27.704 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterests (NewCityInfo.API)' with route pattern 'api/cities/{cityId}/pointofinterests' is valid for the request path '/api/cities/2/pointofinterests'
2023-11-27 16:17:27.706 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterests (NewCityInfo.API)'
2023-11-27 16:17:27.707 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterests (NewCityInfo.API)'
2023-11-27 16:17:27.710 +01:00 [INF] Route matched with {action = "GetPointOfInterests", controller = "PointOfInterests"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[NewCityInfo.API.Models.PointOfInterestDto]] GetPointOfInterests(Int32) on controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API).
2023-11-27 16:17:27.713 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 16:17:27.714 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 16:17:27.715 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 16:17:27.717 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 16:17:27.719 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 16:17:27.721 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-27 16:17:27.725 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.PointOfInterestsController (NewCityInfo.API)
2023-11-27 16:17:27.727 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 16:17:27.728 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 16:17:27.730 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:17:27.731 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:17:27.733 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 16:17:27.734 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:17:27.739 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 16:17:27.746 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 16:17:27.747 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 16:17:27.749 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 16:17:27.751 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 16:17:27.753 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Models.PointOfInterestDto, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-27 16:17:27.924 +01:00 [INF] Executed action NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterests (NewCityInfo.API) in 202.5753ms
2023-11-27 16:17:27.925 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.PointOfInterestsController.GetPointOfInterests (NewCityInfo.API)'
2023-11-27 16:17:27.927 +01:00 [DBG] Connection id "0HMVFBFG58E59" completed keep alive response.
2023-11-27 16:17:27.928 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2/pointofinterests - - - 200 137 application/json;+charset=utf-8 229.3949ms
2023-11-27 16:17:35.967 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2 - -
2023-11-27 16:17:35.968 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 16:17:35.970 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 16:17:35.973 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 16:17:35.975 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:17:35.977 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:17:35.979 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 16:17:35.983 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 16:17:35.986 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 16:17:35.989 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 16:17:35.995 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 16:17:35.997 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 16:17:35.999 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 16:17:36.011 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 16:17:36.018 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 16:17:36.020 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 16:17:36.024 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:17:36.026 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:17:36.027 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 16:17:36.029 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:17:36.032 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 16:17:36.034 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-27 16:17:36.038 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:17:36.040 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:17:36.044 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:17:36.045 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 16:17:36.047 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:17:36.055 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 16:17:36.058 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 16:17:36.333 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0
            ORDER BY c.Name ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 16:17:36.397 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 16:17:36.462 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (61ms).
2023-11-27 16:17:36.478 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:17:36.501 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:17:36.525 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 16:17:36.563 +01:00 [INF] Executed DbCommand (45ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 16:17:36.599 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:17:36.644 +01:00 [DBG] A data reader was disposed.
2023-11-27 16:17:36.655 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:17:36.665 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:17:36.684 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 16:17:36.687 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 16:17:36.688 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 16:17:36.690 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 16:17:36.691 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 16:17:36.692 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityWithoutPointOfInterestDto'.
2023-11-27 16:17:36.696 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 696.8941ms
2023-11-27 16:17:36.697 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:17:36.698 +01:00 [DBG] Connection id "0HMVFBFG58E59" completed keep alive response.
2023-11-27 16:17:36.700 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 16:17:36.701 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2 - - - 200 58 application/json;+charset=utf-8 734.4298ms
2023-11-27 16:17:52.126 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 16:17:52.127 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 16:17:52.129 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 16:17:52.131 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 16:17:52.134 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:17:52.136 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:17:52.138 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 16:17:52.142 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 16:17:52.144 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 16:17:52.147 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 16:17:52.150 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 16:17:52.153 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 16:17:52.156 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 16:17:52.160 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 16:17:52.162 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 16:17:52.164 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 16:17:52.167 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:17:52.170 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:17:52.174 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 16:17:52.176 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:17:52.178 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 16:17:52.180 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 16:17:52.183 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:17:52.188 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:17:52.191 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 16:17:52.193 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:17:52.248 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 16:17:52.250 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 16:17:52.322 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 165.7054ms
2023-11-27 16:17:52.324 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:17:52.326 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The expression 'c.pointOfInterestsInCity' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see http://go.microsoft.com/fwlink/?LinkID=746393.
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.PopulateIncludeTree(IncludeTreeNode includeTreeNode, Expression expression, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at System.Linq.Expressions.MethodCallExpression.Accept(ExpressionVisitor visitor)
   at System.Linq.Expressions.ExpressionVisitor.Visit(Expression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at NewCityInfo.API.Models.CityInfoRepository.GetCityAsyn(Int32 cityId, Boolean includepointOfInterest) in C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\Models\CityInfoRepository.cs:line 24
   at NewCityInfo.API.Controllers.CitiesController.GetCity(Int32 cityId, Boolean includePopintOfInterest) in C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\Controllers\CitiesController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-27 16:17:52.347 +01:00 [DBG] Connection id "0HMVFBFG58E59" completed keep alive response.
2023-11-27 16:17:52.349 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 16:17:52.350 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 500 - text/plain;+charset=utf-8 224.5143ms
2023-11-27 16:19:20.619 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 16:19:20.762 +01:00 [DBG] Hosting starting
2023-11-27 16:19:20.884 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 16:19:20.937 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 16:19:20.938 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 16:19:20.939 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 16:19:20.940 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 16:19:20.940 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 16:19:20.941 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 16:19:20.942 +01:00 [INF] Hosting environment: Development
2023-11-27 16:19:20.943 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 16:19:20.944 +01:00 [DBG] Hosting started
2023-11-27 16:19:21.143 +01:00 [DBG] Connection id "0HMVFBGTIC26D" received FIN.
2023-11-27 16:19:21.143 +01:00 [DBG] Connection id "0HMVFBGTIC26E" received FIN.
2023-11-27 16:19:21.156 +01:00 [DBG] Connection id "0HMVFBGTIC26E" accepted.
2023-11-27 16:19:21.156 +01:00 [DBG] Connection id "0HMVFBGTIC26D" accepted.
2023-11-27 16:19:21.159 +01:00 [DBG] Connection id "0HMVFBGTIC26D" started.
2023-11-27 16:19:21.159 +01:00 [DBG] Connection id "0HMVFBGTIC26E" started.
2023-11-27 16:19:21.176 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 16:19:21.176 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 16:19:21.206 +01:00 [DBG] Connection id "0HMVFBGTIC26E" stopped.
2023-11-27 16:19:21.206 +01:00 [DBG] Connection id "0HMVFBGTIC26D" stopped.
2023-11-27 16:19:21.210 +01:00 [DBG] Connection id "0HMVFBGTIC26D" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 16:19:21.210 +01:00 [DBG] Connection id "0HMVFBGTIC26E" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 16:19:24.537 +01:00 [DBG] Connection id "0HMVFBGTIC26F" accepted.
2023-11-27 16:19:24.537 +01:00 [DBG] Connection id "0HMVFBGTIC26F" received FIN.
2023-11-27 16:19:24.539 +01:00 [DBG] Connection id "0HMVFBGTIC26F" started.
2023-11-27 16:19:24.540 +01:00 [DBG] Connection id "0HMVFBGTIC26G" accepted.
2023-11-27 16:19:24.544 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 16:19:24.544 +01:00 [DBG] Connection id "0HMVFBGTIC26G" started.
2023-11-27 16:19:24.549 +01:00 [DBG] Connection id "0HMVFBGTIC26F" stopped.
2023-11-27 16:19:24.550 +01:00 [DBG] Connection id "0HMVFBGTIC26F" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 16:19:24.593 +01:00 [DBG] Connection 0HMVFBGTIC26G established using the following protocol: "Tls12"
2023-11-27 16:19:24.635 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 16:19:24.652 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 16:19:24.701 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 16:19:24.735 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 16:19:24.741 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 16:19:24.743 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:19:24.746 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:19:24.776 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 16:19:24.779 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 16:19:24.781 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 16:19:24.782 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 16:19:24.785 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 16:19:24.786 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 16:19:24.789 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 16:19:24.945 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 16:19:25.178 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 16:19:25.187 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 16:19:25.191 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 16:19:25.193 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:19:25.196 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:19:25.198 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 16:19:25.202 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:19:25.206 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 16:19:25.209 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 16:19:25.211 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:19:25.213 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:19:25.214 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 16:19:25.216 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:19:26.152 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 16:19:26.245 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 16:19:26.357 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 16:19:26.758 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 16:19:26.826 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 16:19:26.898 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (67ms).
2023-11-27 16:19:26.915 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:19:26.934 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:19:26.952 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 16:19:26.978 +01:00 [INF] Executed DbCommand (33ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 16:19:27.001 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:19:27.033 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:19:27.051 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:19:27.059 +01:00 [DBG] A data reader was disposed.
2023-11-27 16:19:27.068 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:19:27.077 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:19:27.099 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 16:19:27.105 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 16:19:27.106 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 16:19:27.107 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 16:19:27.109 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 16:19:27.111 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 16:19:27.275 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2481.3517ms
2023-11-27 16:19:27.277 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:19:27.278 +01:00 [DBG] Connection id "0HMVFBGTIC26G" completed keep alive response.
2023-11-27 16:19:27.285 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 16:19:27.291 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 2658.8453ms
2023-11-27 16:19:28.678 +01:00 [DBG] Connection id "0HMVFBGTIC26H" accepted.
2023-11-27 16:19:28.683 +01:00 [DBG] Connection id "0HMVFBGTIC26H" started.
2023-11-27 16:19:28.693 +01:00 [DBG] Connection 0HMVFBGTIC26H established using the following protocol: "Tls12"
2023-11-27 16:19:28.758 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 16:19:28.954 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 16:19:28.981 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 16:19:28.986 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 228.5731ms
2023-11-27 16:19:29.007 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 16:19:29.014 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 16:19:29.022 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 14.7177ms
2023-11-27 16:19:29.087 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 73.5340ms
2023-11-27 16:19:29.133 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 16:19:29.303 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 169.6057ms
2023-11-27 16:20:06.974 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 16:20:07.759 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 16:20:07.808 +01:00 [DBG] Migrating using database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:20:07.815 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:20:07.827 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:20:07.842 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-11-27 16:20:07.851 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (7ms).
2023-11-27 16:20:07.853 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:20:07.856 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:20:07.865 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 16:20:07.893 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 16:20:07.896 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:20:07.904 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:20:07.906 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:20:07.907 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:20:07.907 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-11-27 16:20:07.907 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2023-11-27 16:20:07.907 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:20:07.907 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:20:07.907 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 16:20:07.907 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 16:20:07.908 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:20:07.908 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:20:07.921 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 16:20:07.922 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-27 16:20:07.922 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:20:07.922 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:20:07.922 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-11-27 16:20:07.922 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-11-27 16:20:07.925 +01:00 [DBG] A data reader was disposed.
2023-11-27 16:20:07.925 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:20:07.925 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:20:07.937 +01:00 [INF] No migrations were applied. The database is already up to date.
2023-11-27 16:20:07.938 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 16:20:13.531 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 16:20:13.648 +01:00 [DBG] Hosting starting
2023-11-27 16:20:13.792 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 16:20:13.860 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 16:20:13.862 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 16:20:13.863 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 16:20:13.864 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 16:20:13.865 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 16:20:13.866 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 16:20:13.867 +01:00 [INF] Hosting environment: Development
2023-11-27 16:20:13.867 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 16:20:13.868 +01:00 [DBG] Hosting started
2023-11-27 16:20:14.024 +01:00 [DBG] Connection id "0HMVFBHDAIPF8" accepted.
2023-11-27 16:20:14.024 +01:00 [DBG] Connection id "0HMVFBHDAIPF9" accepted.
2023-11-27 16:20:14.027 +01:00 [DBG] Connection id "0HMVFBHDAIPF9" started.
2023-11-27 16:20:14.027 +01:00 [DBG] Connection id "0HMVFBHDAIPF8" started.
2023-11-27 16:20:14.028 +01:00 [DBG] Connection id "0HMVFBHDAIPF8" received FIN.
2023-11-27 16:20:14.028 +01:00 [DBG] Connection id "0HMVFBHDAIPF9" received FIN.
2023-11-27 16:20:14.051 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 16:20:14.051 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 16:20:14.092 +01:00 [DBG] Connection id "0HMVFBHDAIPF9" stopped.
2023-11-27 16:20:14.092 +01:00 [DBG] Connection id "0HMVFBHDAIPF8" stopped.
2023-11-27 16:20:14.096 +01:00 [DBG] Connection id "0HMVFBHDAIPF8" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 16:20:14.096 +01:00 [DBG] Connection id "0HMVFBHDAIPF9" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 16:20:21.810 +01:00 [DBG] Connection id "0HMVFBHDAIPFA" accepted.
2023-11-27 16:20:21.819 +01:00 [DBG] Connection id "0HMVFBHDAIPFA" started.
2023-11-27 16:20:21.881 +01:00 [DBG] Connection 0HMVFBHDAIPFA established using the following protocol: "Tls12"
2023-11-27 16:20:21.955 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 16:20:22.110 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 16:20:22.238 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 16:20:22.267 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 16:20:22.276 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 326.8773ms
2023-11-27 16:20:22.284 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 16:20:22.285 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 16:20:22.296 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 11.3937ms
2023-11-27 16:20:22.376 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 91.4871ms
2023-11-27 16:20:22.429 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 16:20:22.627 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 198.5769ms
2023-11-27 16:20:24.948 +01:00 [DBG] Connection id "0HMVFBHDAIPFB" accepted.
2023-11-27 16:20:24.949 +01:00 [DBG] Connection id "0HMVFBHDAIPFB" received FIN.
2023-11-27 16:20:24.950 +01:00 [DBG] Connection id "0HMVFBHDAIPFB" started.
2023-11-27 16:20:24.951 +01:00 [DBG] Connection id "0HMVFBHDAIPFC" accepted.
2023-11-27 16:20:24.954 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 16:20:24.955 +01:00 [DBG] Connection id "0HMVFBHDAIPFC" started.
2023-11-27 16:20:24.961 +01:00 [DBG] Connection id "0HMVFBHDAIPFB" stopped.
2023-11-27 16:20:24.963 +01:00 [DBG] Connection id "0HMVFBHDAIPFB" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 16:20:24.980 +01:00 [DBG] Connection 0HMVFBHDAIPFC established using the following protocol: "Tls12"
2023-11-27 16:20:24.997 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 16:20:25.001 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 16:20:25.037 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 16:20:25.046 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 16:20:25.048 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:20:25.053 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:20:25.090 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 16:20:25.093 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 16:20:25.094 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 16:20:25.097 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 16:20:25.100 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 16:20:25.102 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 16:20:25.104 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 16:20:25.308 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 16:20:25.569 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 16:20:25.578 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 16:20:25.581 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 16:20:25.584 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:20:25.585 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:20:25.586 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 16:20:25.589 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:20:25.592 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 16:20:25.594 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 16:20:25.596 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:20:25.597 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:20:25.599 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 16:20:25.601 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:20:26.674 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 16:20:26.795 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 16:20:26.920 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 16:20:27.379 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 16:20:27.452 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 16:20:27.521 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (63ms).
2023-11-27 16:20:27.538 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:20:27.557 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:20:27.581 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 16:20:27.620 +01:00 [INF] Executed DbCommand (48ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 16:20:27.644 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:27.675 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:27.694 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:27.704 +01:00 [DBG] A data reader was disposed.
2023-11-27 16:20:27.713 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:20:27.720 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:20:27.738 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 16:20:27.744 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 16:20:27.745 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 16:20:27.746 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 16:20:27.748 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 16:20:27.750 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 16:20:27.911 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2801.3978ms
2023-11-27 16:20:27.914 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:20:27.915 +01:00 [DBG] Connection id "0HMVFBHDAIPFC" completed keep alive response.
2023-11-27 16:20:27.920 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 16:20:27.925 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 2928.1132ms
2023-11-27 16:20:57.265 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 16:20:58.041 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 16:20:58.188 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.189 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.189 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.213 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.213 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.213 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.213 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.213 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.213 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.235 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.235 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.235 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.252 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.253 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.253 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.253 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.253 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.253 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.280 +01:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.287 +01:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.287 +01:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.287 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.290 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.290 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.290 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.290 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.290 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:20:58.299 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-27 16:20:58.307 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-27 16:20:58.308 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-27 16:20:58.308 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-27 16:20:58.379 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 16:21:08.047 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 16:21:08.753 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 16:21:08.808 +01:00 [DBG] Migrating using database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:21:08.816 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:21:08.831 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:21:08.850 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-11-27 16:21:08.859 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (7ms).
2023-11-27 16:21:08.862 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:21:08.866 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:21:08.875 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 16:21:08.894 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 16:21:08.896 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:21:08.899 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:21:08.900 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:21:08.901 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:21:08.901 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-11-27 16:21:08.901 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2023-11-27 16:21:08.901 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:21:08.901 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:21:08.901 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 16:21:08.901 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 16:21:08.901 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:21:08.901 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:21:08.915 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 16:21:08.915 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-27 16:21:08.915 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:21:08.916 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:21:08.916 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-11-27 16:21:08.916 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-11-27 16:21:08.919 +01:00 [DBG] A data reader was disposed.
2023-11-27 16:21:08.919 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:21:08.919 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:21:08.931 +01:00 [INF] Applying migration '20231127152058_FifthUpdate'.
2023-11-27 16:21:08.976 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:21:08.976 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:21:08.977 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-27 16:21:08.981 +01:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-27 16:21:08.982 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-27 16:21:08.982 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-27 16:21:08.983 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20231127152058_FifthUpdate', '6.0.0');
2023-11-27 16:21:08.984 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20231127152058_FifthUpdate', '6.0.0');
2023-11-27 16:21:08.985 +01:00 [DBG] Committing transaction.
2023-11-27 16:21:08.994 +01:00 [DBG] Committed transaction.
2023-11-27 16:21:08.996 +01:00 [DBG] Disposing transaction.
2023-11-27 16:21:08.996 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:21:08.996 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:21:08.997 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 16:21:15.312 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 16:21:15.419 +01:00 [DBG] Hosting starting
2023-11-27 16:21:15.543 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 16:21:15.587 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 16:21:15.589 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 16:21:15.589 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 16:21:15.591 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 16:21:15.591 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 16:21:15.592 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 16:21:15.593 +01:00 [INF] Hosting environment: Development
2023-11-27 16:21:15.594 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 16:21:15.595 +01:00 [DBG] Hosting started
2023-11-27 16:21:16.037 +01:00 [DBG] Connection id "0HMVFBHVQ1QO2" accepted.
2023-11-27 16:21:16.037 +01:00 [DBG] Connection id "0HMVFBHVQ1QO3" accepted.
2023-11-27 16:21:16.039 +01:00 [DBG] Connection id "0HMVFBHVQ1QO2" started.
2023-11-27 16:21:16.039 +01:00 [DBG] Connection id "0HMVFBHVQ1QO3" started.
2023-11-27 16:21:16.056 +01:00 [DBG] Connection id "0HMVFBHVQ1QO3" received FIN.
2023-11-27 16:21:16.056 +01:00 [DBG] Connection id "0HMVFBHVQ1QO2" received FIN.
2023-11-27 16:21:16.070 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 16:21:16.070 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 16:21:16.109 +01:00 [DBG] Connection id "0HMVFBHVQ1QO2" stopped.
2023-11-27 16:21:16.109 +01:00 [DBG] Connection id "0HMVFBHVQ1QO3" stopped.
2023-11-27 16:21:16.113 +01:00 [DBG] Connection id "0HMVFBHVQ1QO2" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 16:21:16.113 +01:00 [DBG] Connection id "0HMVFBHVQ1QO3" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 16:21:22.041 +01:00 [DBG] Connection id "0HMVFBHVQ1QO4" accepted.
2023-11-27 16:21:22.043 +01:00 [DBG] Connection id "0HMVFBHVQ1QO4" started.
2023-11-27 16:21:22.121 +01:00 [DBG] Connection 0HMVFBHVQ1QO4 established using the following protocol: "Tls12"
2023-11-27 16:21:22.188 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 16:21:22.337 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 16:21:22.469 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 16:21:22.499 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 16:21:22.514 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 330.0488ms
2023-11-27 16:21:22.522 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 16:21:22.522 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 16:21:22.534 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 11.5003ms
2023-11-27 16:21:22.619 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 96.8908ms
2023-11-27 16:21:22.690 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 16:21:23.042 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 351.5936ms
2023-11-27 16:21:24.319 +01:00 [DBG] Connection id "0HMVFBHVQ1QO5" accepted.
2023-11-27 16:21:24.320 +01:00 [DBG] Connection id "0HMVFBHVQ1QO5" received FIN.
2023-11-27 16:21:24.321 +01:00 [DBG] Connection id "0HMVFBHVQ1QO5" started.
2023-11-27 16:21:24.321 +01:00 [DBG] Connection id "0HMVFBHVQ1QO6" accepted.
2023-11-27 16:21:24.326 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 16:21:24.326 +01:00 [DBG] Connection id "0HMVFBHVQ1QO6" started.
2023-11-27 16:21:24.332 +01:00 [DBG] Connection id "0HMVFBHVQ1QO5" stopped.
2023-11-27 16:21:24.334 +01:00 [DBG] Connection id "0HMVFBHVQ1QO5" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 16:21:24.340 +01:00 [DBG] Connection 0HMVFBHVQ1QO6 established using the following protocol: "Tls12"
2023-11-27 16:21:24.352 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 16:21:24.357 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 16:21:24.395 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 16:21:24.400 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 16:21:24.402 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:21:24.406 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:21:24.438 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 16:21:24.441 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 16:21:24.442 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 16:21:24.443 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 16:21:24.445 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 16:21:24.446 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 16:21:24.448 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 16:21:24.607 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 16:21:24.859 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 16:21:24.871 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 16:21:24.874 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 16:21:24.877 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:21:24.878 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:21:24.879 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 16:21:24.882 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:21:24.884 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 16:21:24.887 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 16:21:24.890 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:21:24.891 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:21:24.892 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 16:21:24.894 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:21:25.926 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 16:21:26.043 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 16:21:26.212 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 16:21:26.710 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 16:21:26.784 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 16:21:26.853 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (64ms).
2023-11-27 16:21:26.873 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:21:26.895 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:21:26.918 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 16:21:26.963 +01:00 [INF] Executed DbCommand (52ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 16:21:26.994 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:21:27.030 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:21:27.050 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:21:27.063 +01:00 [DBG] A data reader was disposed.
2023-11-27 16:21:27.076 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:21:27.084 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:21:27.105 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 16:21:27.110 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 16:21:27.111 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 16:21:27.112 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 16:21:27.114 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 16:21:27.115 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 16:21:27.301 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2848.6841ms
2023-11-27 16:21:27.304 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:21:27.306 +01:00 [DBG] Connection id "0HMVFBHVQ1QO6" completed keep alive response.
2023-11-27 16:21:27.313 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 16:21:27.319 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 2966.4784ms
2023-11-27 16:21:29.647 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 16:21:29.648 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 16:21:29.649 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 16:21:29.650 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 16:21:29.652 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:21:29.653 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:21:29.654 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 16:21:29.656 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 16:21:29.658 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 16:21:29.660 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 16:21:29.661 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 16:21:29.662 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 16:21:29.664 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 16:21:29.673 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 16:21:29.675 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 16:21:29.676 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 16:21:29.678 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:21:29.679 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:21:29.680 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 16:21:29.681 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:21:29.682 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 16:21:29.683 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 16:21:29.685 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:21:29.686 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:21:29.687 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 16:21:29.688 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:21:29.692 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 16:21:29.705 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 16:21:29.706 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 16:21:29.708 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:21:29.709 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:21:29.710 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 16:21:29.713 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 16:21:29.716 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:21:29.718 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:21:29.719 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:21:29.721 +01:00 [DBG] A data reader was disposed.
2023-11-27 16:21:29.722 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:21:29.724 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:21:29.725 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 16:21:29.728 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 16:21:29.728 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 16:21:29.729 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 16:21:29.730 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 16:21:29.731 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 16:21:29.733 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 69.2768ms
2023-11-27 16:21:29.734 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:21:29.735 +01:00 [DBG] Connection id "0HMVFBHVQ1QO6" completed keep alive response.
2023-11-27 16:21:29.736 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 16:21:29.738 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 91.0388ms
2023-11-27 16:24:19.036 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 16:24:19.190 +01:00 [DBG] Hosting starting
2023-11-27 16:24:19.333 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 16:24:19.387 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 16:24:19.388 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 16:24:19.388 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 16:24:19.389 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 16:24:19.390 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 16:24:19.391 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 16:24:19.392 +01:00 [INF] Hosting environment: Development
2023-11-27 16:24:19.393 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 16:24:19.394 +01:00 [DBG] Hosting started
2023-11-27 16:24:19.413 +01:00 [DBG] Connection id "0HMVFBJMEPT01" accepted.
2023-11-27 16:24:19.413 +01:00 [DBG] Connection id "0HMVFBJMEPT02" accepted.
2023-11-27 16:24:19.413 +01:00 [DBG] Connection id "0HMVFBJMEPT01" received FIN.
2023-11-27 16:24:19.413 +01:00 [DBG] Connection id "0HMVFBJMEPT02" received FIN.
2023-11-27 16:24:19.415 +01:00 [DBG] Connection id "0HMVFBJMEPT02" started.
2023-11-27 16:24:19.415 +01:00 [DBG] Connection id "0HMVFBJMEPT01" started.
2023-11-27 16:24:19.454 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 16:24:19.454 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 16:24:19.489 +01:00 [DBG] Connection id "0HMVFBJMEPT01" stopped.
2023-11-27 16:24:19.489 +01:00 [DBG] Connection id "0HMVFBJMEPT02" stopped.
2023-11-27 16:24:19.492 +01:00 [DBG] Connection id "0HMVFBJMEPT01" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 16:24:19.492 +01:00 [DBG] Connection id "0HMVFBJMEPT02" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 16:24:19.552 +01:00 [DBG] Connection id "0HMVFBJMEPT03" accepted.
2023-11-27 16:24:19.557 +01:00 [DBG] Connection id "0HMVFBJMEPT03" started.
2023-11-27 16:24:19.621 +01:00 [DBG] Connection 0HMVFBJMEPT03 established using the following protocol: "Tls12"
2023-11-27 16:24:19.672 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 16:24:19.793 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 16:24:19.901 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 16:24:19.921 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 16:24:19.929 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 260.5325ms
2023-11-27 16:24:19.940 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 16:24:19.940 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 16:24:19.950 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 9.8666ms
2023-11-27 16:24:20.021 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 80.9192ms
2023-11-27 16:24:20.072 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 16:24:20.233 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 160.6309ms
2023-11-27 16:24:22.707 +01:00 [DBG] Connection id "0HMVFBJMEPT04" accepted.
2023-11-27 16:24:22.707 +01:00 [DBG] Connection id "0HMVFBJMEPT04" received FIN.
2023-11-27 16:24:22.708 +01:00 [DBG] Connection id "0HMVFBJMEPT04" started.
2023-11-27 16:24:22.708 +01:00 [DBG] Connection id "0HMVFBJMEPT05" accepted.
2023-11-27 16:24:22.711 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 16:24:22.711 +01:00 [DBG] Connection id "0HMVFBJMEPT05" started.
2023-11-27 16:24:22.716 +01:00 [DBG] Connection id "0HMVFBJMEPT04" stopped.
2023-11-27 16:24:22.720 +01:00 [DBG] Connection id "0HMVFBJMEPT04" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 16:24:22.723 +01:00 [DBG] Connection 0HMVFBJMEPT05 established using the following protocol: "Tls12"
2023-11-27 16:24:22.735 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 16:24:22.738 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 16:24:22.767 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 16:24:22.772 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 16:24:22.774 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:24:22.777 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:24:22.807 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 16:24:22.811 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 16:24:22.813 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 16:24:22.815 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 16:24:22.818 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 16:24:22.821 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 16:24:22.824 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 16:24:22.976 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 16:24:23.204 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 16:24:23.214 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 16:24:23.217 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 16:24:23.218 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:24:23.219 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:24:23.221 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 16:24:23.223 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 16:24:23.225 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 16:24:23.228 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 16:24:23.230 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:24:23.232 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:24:23.233 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 16:24:23.235 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 16:24:24.128 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 16:24:24.222 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 16:24:24.341 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 16:24:24.696 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 16:24:24.759 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 16:24:24.840 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (73ms).
2023-11-27 16:24:24.856 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:24:24.880 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:24:24.896 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 16:24:24.923 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 16:24:24.945 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:24:24.978 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:24:24.996 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 16:24:25.005 +01:00 [DBG] A data reader was disposed.
2023-11-27 16:24:25.014 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 16:24:25.021 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 16:24:52.848 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 16:24:52.857 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 16:24:52.858 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 16:24:52.860 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 16:24:52.862 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 16:24:52.865 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 16:25:00.390 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 37558.4901ms
2023-11-27 16:25:00.392 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 16:25:00.393 +01:00 [DBG] Connection id "0HMVFBJMEPT05" completed keep alive response.
2023-11-27 16:25:00.398 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 16:25:00.402 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 37667.2639ms
2023-11-27 17:14:36.774 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 17:14:36.903 +01:00 [DBG] Hosting starting
2023-11-27 17:14:37.047 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 17:14:37.106 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 17:14:37.107 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 17:14:37.108 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 17:14:37.109 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 17:14:37.110 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 17:14:37.111 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 17:14:37.112 +01:00 [INF] Hosting environment: Development
2023-11-27 17:14:37.113 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 17:14:37.114 +01:00 [DBG] Hosting started
2023-11-27 17:14:37.471 +01:00 [DBG] Connection id "0HMVFCFPTAQP0" received FIN.
2023-11-27 17:14:37.471 +01:00 [DBG] Connection id "0HMVFCFPTAQOV" received FIN.
2023-11-27 17:14:37.482 +01:00 [DBG] Connection id "0HMVFCFPTAQP0" accepted.
2023-11-27 17:14:37.482 +01:00 [DBG] Connection id "0HMVFCFPTAQOV" accepted.
2023-11-27 17:14:37.484 +01:00 [DBG] Connection id "0HMVFCFPTAQP0" started.
2023-11-27 17:14:37.485 +01:00 [DBG] Connection id "0HMVFCFPTAQOV" started.
2023-11-27 17:14:37.503 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:14:37.503 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:14:37.534 +01:00 [DBG] Connection id "0HMVFCFPTAQP0" stopped.
2023-11-27 17:14:37.534 +01:00 [DBG] Connection id "0HMVFCFPTAQOV" stopped.
2023-11-27 17:14:37.539 +01:00 [DBG] Connection id "0HMVFCFPTAQP0" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:14:37.539 +01:00 [DBG] Connection id "0HMVFCFPTAQOV" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:14:45.474 +01:00 [DBG] Connection id "0HMVFCFPTAQP1" accepted.
2023-11-27 17:14:45.479 +01:00 [DBG] Connection id "0HMVFCFPTAQP1" started.
2023-11-27 17:14:45.585 +01:00 [DBG] Connection 0HMVFCFPTAQP1 established using the following protocol: "Tls12"
2023-11-27 17:14:45.635 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 17:14:45.773 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 17:14:45.876 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 17:14:45.905 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 17:14:45.914 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 282.0184ms
2023-11-27 17:14:45.918 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 17:14:45.929 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 17:14:45.942 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 23.7289ms
2023-11-27 17:14:46.005 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 75.5342ms
2023-11-27 17:14:46.052 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 17:14:46.249 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 197.3405ms
2023-11-27 17:14:49.123 +01:00 [DBG] Connection id "0HMVFCFPTAQP2" accepted.
2023-11-27 17:14:49.124 +01:00 [DBG] Connection id "0HMVFCFPTAQP2" received FIN.
2023-11-27 17:14:49.124 +01:00 [DBG] Connection id "0HMVFCFPTAQP2" started.
2023-11-27 17:14:49.125 +01:00 [DBG] Connection id "0HMVFCFPTAQP3" accepted.
2023-11-27 17:14:49.128 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:14:49.129 +01:00 [DBG] Connection id "0HMVFCFPTAQP3" started.
2023-11-27 17:14:49.138 +01:00 [DBG] Connection id "0HMVFCFPTAQP2" stopped.
2023-11-27 17:14:49.141 +01:00 [DBG] Connection id "0HMVFCFPTAQP2" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:14:49.148 +01:00 [DBG] Connection 0HMVFCFPTAQP3 established using the following protocol: "Tls12"
2023-11-27 17:14:49.160 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:14:49.164 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:14:49.200 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:14:49.208 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:14:49.211 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:14:49.216 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:14:49.255 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:14:49.259 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:14:49.261 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:14:49.262 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:14:49.266 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:14:49.267 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:14:49.270 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:14:49.429 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 17:14:49.698 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:14:49.709 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:14:49.712 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:14:49.715 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:14:49.716 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:14:49.718 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:14:49.721 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:14:49.724 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:14:49.727 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:14:49.729 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:14:49.731 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:14:49.732 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:14:49.734 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:14:50.797 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:14:50.889 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 17:14:51.013 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 17:14:51.414 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 17:14:51.490 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:14:51.565 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (68ms).
2023-11-27 17:14:51.588 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:14:51.609 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:14:51.627 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:14:51.659 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:14:51.686 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:14:51.728 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:14:51.750 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:14:51.758 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:14:51.767 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:14:51.773 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:14:51.791 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:14:51.796 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:14:51.796 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:14:51.798 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:14:51.800 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:14:51.802 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 17:14:51.971 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2695.1286ms
2023-11-27 17:14:51.974 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:14:51.976 +01:00 [DBG] Connection id "0HMVFCFPTAQP3" completed keep alive response.
2023-11-27 17:14:51.983 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:14:51.988 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 2828.3397ms
2023-11-27 17:19:12.214 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 17:19:12.338 +01:00 [DBG] Hosting starting
2023-11-27 17:19:12.495 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 17:19:12.548 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 17:19:12.549 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 17:19:12.550 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 17:19:12.551 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 17:19:12.552 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 17:19:12.553 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 17:19:12.554 +01:00 [INF] Hosting environment: Development
2023-11-27 17:19:12.556 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 17:19:12.556 +01:00 [DBG] Hosting started
2023-11-27 17:19:12.946 +01:00 [DBG] Connection id "0HMVFCIC0ED42" accepted.
2023-11-27 17:19:12.948 +01:00 [DBG] Connection id "0HMVFCIC0ED42" started.
2023-11-27 17:19:12.957 +01:00 [DBG] Connection id "0HMVFCIC0ED42" received FIN.
2023-11-27 17:19:12.966 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:19:12.998 +01:00 [DBG] Connection id "0HMVFCIC0ED42" stopped.
2023-11-27 17:19:13.001 +01:00 [DBG] Connection id "0HMVFCIC0ED42" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:19:20.482 +01:00 [DBG] Connection id "0HMVFCIC0ED43" accepted.
2023-11-27 17:19:20.494 +01:00 [DBG] Connection id "0HMVFCIC0ED43" started.
2023-11-27 17:19:20.577 +01:00 [DBG] Connection 0HMVFCIC0ED43 established using the following protocol: "Tls12"
2023-11-27 17:19:20.649 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 17:19:20.798 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 17:19:20.959 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 17:19:20.989 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 17:19:20.999 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 354.4542ms
2023-11-27 17:19:21.022 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 17:19:21.031 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 17:19:21.037 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 15.9061ms
2023-11-27 17:19:21.123 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 94.0078ms
2023-11-27 17:19:21.181 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 17:19:21.406 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 224.7927ms
2023-11-27 17:30:31.845 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 17:30:32.004 +01:00 [DBG] Hosting starting
2023-11-27 17:30:32.138 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 17:30:32.187 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 17:30:32.188 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 17:30:32.189 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 17:30:32.190 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 17:30:32.191 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 17:30:32.192 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 17:30:32.193 +01:00 [INF] Hosting environment: Development
2023-11-27 17:30:32.194 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 17:30:32.195 +01:00 [DBG] Hosting started
2023-11-27 17:30:32.230 +01:00 [DBG] Connection id "0HMVFCOMEJBDU" accepted.
2023-11-27 17:30:32.230 +01:00 [DBG] Connection id "0HMVFCOMEJBDT" accepted.
2023-11-27 17:30:32.239 +01:00 [DBG] Connection id "0HMVFCOMEJBDU" started.
2023-11-27 17:30:32.239 +01:00 [DBG] Connection id "0HMVFCOMEJBDT" started.
2023-11-27 17:30:32.241 +01:00 [DBG] Connection id "0HMVFCOMEJBDT" received FIN.
2023-11-27 17:30:32.241 +01:00 [DBG] Connection id "0HMVFCOMEJBDU" received FIN.
2023-11-27 17:30:32.267 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:30:32.267 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:30:32.305 +01:00 [DBG] Connection id "0HMVFCOMEJBDU" stopped.
2023-11-27 17:30:32.305 +01:00 [DBG] Connection id "0HMVFCOMEJBDT" stopped.
2023-11-27 17:30:32.309 +01:00 [DBG] Connection id "0HMVFCOMEJBDT" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:30:32.309 +01:00 [DBG] Connection id "0HMVFCOMEJBDU" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:30:32.464 +01:00 [DBG] Connection id "0HMVFCOMEJBDV" accepted.
2023-11-27 17:30:32.467 +01:00 [DBG] Connection id "0HMVFCOMEJBDV" started.
2023-11-27 17:30:32.545 +01:00 [DBG] Connection 0HMVFCOMEJBDV established using the following protocol: "Tls12"
2023-11-27 17:30:32.609 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 17:30:32.732 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 17:30:32.829 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 17:30:32.855 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 17:30:32.862 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 256.1183ms
2023-11-27 17:30:32.867 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 17:30:32.867 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 17:30:32.877 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 9.8841ms
2023-11-27 17:30:32.935 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 67.6769ms
2023-11-27 17:30:32.983 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 17:30:33.151 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 168.5216ms
2023-11-27 17:30:35.152 +01:00 [DBG] Connection id "0HMVFCOMEJBE0" accepted.
2023-11-27 17:30:35.152 +01:00 [DBG] Connection id "0HMVFCOMEJBE0" received FIN.
2023-11-27 17:30:35.153 +01:00 [DBG] Connection id "0HMVFCOMEJBE0" started.
2023-11-27 17:30:35.154 +01:00 [DBG] Connection id "0HMVFCOMEJBE1" accepted.
2023-11-27 17:30:35.158 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:30:35.159 +01:00 [DBG] Connection id "0HMVFCOMEJBE1" started.
2023-11-27 17:30:35.164 +01:00 [DBG] Connection id "0HMVFCOMEJBE0" stopped.
2023-11-27 17:30:35.166 +01:00 [DBG] Connection id "0HMVFCOMEJBE0" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:30:35.170 +01:00 [DBG] Connection 0HMVFCOMEJBE1 established using the following protocol: "Tls12"
2023-11-27 17:30:35.182 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:30:35.185 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:30:35.211 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:30:35.218 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:30:35.221 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:30:35.224 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:30:35.253 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:30:35.256 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:30:35.258 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:30:35.260 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:30:35.263 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:30:35.264 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:30:35.266 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:30:35.416 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 17:30:35.718 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:30:35.728 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:30:35.731 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:30:35.734 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:30:35.735 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:30:35.737 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:30:35.741 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:30:35.744 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:30:35.746 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:30:35.748 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:30:35.750 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:30:35.751 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:30:35.753 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:30:36.711 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:30:36.828 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 17:30:36.965 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 17:30:37.382 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 17:30:37.447 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:30:37.521 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (67ms).
2023-11-27 17:30:37.541 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:30:37.562 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:30:37.587 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:30:37.620 +01:00 [INF] Executed DbCommand (45ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:30:37.648 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:30:37.688 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:30:37.711 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:30:37.722 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:30:37.732 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:30:37.739 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:30:37.761 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:30:37.767 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:30:37.768 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:30:37.769 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:30:37.770 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:30:37.772 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 17:30:37.937 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2664.9217ms
2023-11-27 17:30:37.941 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:30:37.942 +01:00 [DBG] Connection id "0HMVFCOMEJBE1" completed keep alive response.
2023-11-27 17:30:37.950 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:30:37.956 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 2773.6736ms
2023-11-27 17:30:46.256 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2 - -
2023-11-27 17:30:46.257 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:30:46.259 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:30:46.260 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:30:46.263 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:30:46.264 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:30:46.267 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:30:46.270 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:30:46.273 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:30:46.275 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:30:46.278 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:30:46.281 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:30:46.285 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:30:46.303 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:30:46.304 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:30:46.306 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:30:46.308 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:30:46.310 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:30:46.312 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:30:46.315 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:30:46.317 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:30:46.319 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-27 17:30:46.322 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:30:46.325 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:30:46.326 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:30:46.328 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:30:46.330 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:30:46.335 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:30:46.338 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 17:30:46.344 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0
            ORDER BY c.Name ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 17:30:46.351 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:30:46.353 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 17:30:46.355 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:30:46.357 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:30:46.359 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 17:30:46.364 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 17:30:46.370 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:30:46.373 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:30:46.374 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:30:46.376 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:30:46.381 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:30:46.385 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:30:46.386 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:30:46.388 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:30:46.389 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:30:46.391 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityWithoutPointOfInterestDto'.
2023-11-27 17:30:46.394 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 109.7541ms
2023-11-27 17:30:46.395 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:30:46.397 +01:00 [DBG] Connection id "0HMVFCOMEJBE1" completed keep alive response.
2023-11-27 17:30:46.398 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:30:46.399 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2 - - - 200 58 application/json;+charset=utf-8 142.8495ms
2023-11-27 17:30:49.949 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:30:49.953 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:30:49.954 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:30:49.957 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:30:49.960 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:30:49.966 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:30:49.968 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:30:49.971 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:30:49.973 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:30:49.976 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:30:49.980 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:30:49.983 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:30:49.986 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:30:49.990 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:30:49.992 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:30:49.993 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:30:49.995 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:30:49.997 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:30:49.998 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:30:50.001 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:30:50.003 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:30:50.005 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:30:50.007 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:30:50.008 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:30:50.009 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:30:50.011 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:30:50.066 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:30:50.072 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:30:50.073 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-27 17:30:50.074 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:30:50.075 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:30:50.076 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:30:50.079 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:30:50.082 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:30:50.083 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:30:50.085 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:30:50.086 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:30:50.087 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:30:50.088 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:30:50.089 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:30:50.092 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:30:50.094 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:30:50.094 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:30:50.096 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:30:50.097 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 17:30:50.099 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 113.3665ms
2023-11-27 17:30:50.100 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:30:50.101 +01:00 [DBG] Connection id "0HMVFCOMEJBE1" completed keep alive response.
2023-11-27 17:30:50.102 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:30:50.104 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 154.8497ms
2023-11-27 17:31:35.392 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 17:31:35.533 +01:00 [DBG] Hosting starting
2023-11-27 17:31:35.678 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 17:31:35.723 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 17:31:35.724 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 17:31:35.726 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 17:31:35.727 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 17:31:35.727 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 17:31:35.729 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 17:31:35.730 +01:00 [INF] Hosting environment: Development
2023-11-27 17:31:35.731 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 17:31:35.731 +01:00 [DBG] Hosting started
2023-11-27 17:31:36.054 +01:00 [DBG] Connection id "0HMVFCP9F9UG4" received FIN.
2023-11-27 17:31:36.054 +01:00 [DBG] Connection id "0HMVFCP9F9UG3" received FIN.
2023-11-27 17:31:36.067 +01:00 [DBG] Connection id "0HMVFCP9F9UG3" accepted.
2023-11-27 17:31:36.067 +01:00 [DBG] Connection id "0HMVFCP9F9UG4" accepted.
2023-11-27 17:31:36.070 +01:00 [DBG] Connection id "0HMVFCP9F9UG3" started.
2023-11-27 17:31:36.070 +01:00 [DBG] Connection id "0HMVFCP9F9UG4" started.
2023-11-27 17:31:36.088 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:31:36.088 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:31:36.119 +01:00 [DBG] Connection id "0HMVFCP9F9UG4" stopped.
2023-11-27 17:31:36.119 +01:00 [DBG] Connection id "0HMVFCP9F9UG3" stopped.
2023-11-27 17:31:36.124 +01:00 [DBG] Connection id "0HMVFCP9F9UG4" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:31:36.124 +01:00 [DBG] Connection id "0HMVFCP9F9UG3" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:31:37.281 +01:00 [DBG] Connection id "0HMVFCP9F9UG5" accepted.
2023-11-27 17:31:37.282 +01:00 [DBG] Connection id "0HMVFCP9F9UG5" started.
2023-11-27 17:31:37.281 +01:00 [DBG] Connection id "0HMVFCP9F9UG5" received FIN.
2023-11-27 17:31:37.283 +01:00 [DBG] Connection id "0HMVFCP9F9UG6" accepted.
2023-11-27 17:31:37.286 +01:00 [DBG] Connection id "0HMVFCP9F9UG6" started.
2023-11-27 17:31:37.290 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:31:37.301 +01:00 [DBG] Connection id "0HMVFCP9F9UG5" stopped.
2023-11-27 17:31:37.303 +01:00 [DBG] Connection id "0HMVFCP9F9UG5" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:31:37.338 +01:00 [DBG] Connection 0HMVFCP9F9UG6 established using the following protocol: "Tls12"
2023-11-27 17:31:37.376 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:31:37.392 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 17:31:37.441 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:31:37.472 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:31:37.479 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:31:37.481 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:31:37.484 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:31:37.513 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:31:37.515 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:31:37.516 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:31:37.519 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:31:37.521 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:31:37.523 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:31:37.526 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:31:37.665 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 17:31:37.888 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:31:37.898 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:31:37.901 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:31:37.904 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:31:37.905 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:31:37.906 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:31:37.909 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:31:37.912 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:31:37.914 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:31:37.916 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:31:37.917 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:31:37.918 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:31:37.919 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:31:38.819 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:31:38.928 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 17:31:39.085 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 17:31:39.504 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 17:31:39.579 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:31:39.659 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (71ms).
2023-11-27 17:31:39.682 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:31:39.709 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:31:39.735 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:31:39.790 +01:00 [INF] Executed DbCommand (58ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:31:39.820 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:31:39.868 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:31:39.889 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:31:39.898 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:31:39.910 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:31:39.921 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:31:39.938 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:31:39.943 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:31:39.943 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:31:39.944 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:31:39.945 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:31:39.947 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 17:31:40.126 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2594.9291ms
2023-11-27 17:31:40.129 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:31:40.130 +01:00 [DBG] Connection id "0HMVFCP9F9UG6" completed keep alive response.
2023-11-27 17:31:40.136 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:31:40.143 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 2770.0030ms
2023-11-27 17:31:44.593 +01:00 [DBG] Connection id "0HMVFCP9F9UG7" accepted.
2023-11-27 17:31:44.599 +01:00 [DBG] Connection id "0HMVFCP9F9UG7" started.
2023-11-27 17:31:44.611 +01:00 [DBG] Connection 0HMVFCP9F9UG7 established using the following protocol: "Tls12"
2023-11-27 17:31:44.686 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 17:31:44.883 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 17:31:44.907 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 17:31:44.913 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 227.6784ms
2023-11-27 17:31:44.932 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 17:31:44.938 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 17:31:44.956 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 19.7733ms
2023-11-27 17:31:45.033 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 100.5125ms
2023-11-27 17:31:45.092 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 17:31:45.312 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 219.3446ms
2023-11-27 17:32:25.161 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 17:32:25.306 +01:00 [DBG] Hosting starting
2023-11-27 17:32:25.533 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 17:32:25.610 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 17:32:25.636 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 17:32:25.638 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 17:32:25.639 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 17:32:25.640 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 17:32:25.642 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 17:32:25.644 +01:00 [INF] Hosting environment: Development
2023-11-27 17:32:25.646 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 17:32:25.647 +01:00 [DBG] Hosting started
2023-11-27 17:32:25.818 +01:00 [DBG] Connection id "0HMVFCPO9SHC5" received FIN.
2023-11-27 17:32:25.818 +01:00 [DBG] Connection id "0HMVFCPO9SHC6" received FIN.
2023-11-27 17:32:25.833 +01:00 [DBG] Connection id "0HMVFCPO9SHC5" accepted.
2023-11-27 17:32:25.833 +01:00 [DBG] Connection id "0HMVFCPO9SHC6" accepted.
2023-11-27 17:32:25.836 +01:00 [DBG] Connection id "0HMVFCPO9SHC5" started.
2023-11-27 17:32:25.836 +01:00 [DBG] Connection id "0HMVFCPO9SHC6" started.
2023-11-27 17:32:25.872 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:32:25.872 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:32:25.926 +01:00 [DBG] Connection id "0HMVFCPO9SHC5" stopped.
2023-11-27 17:32:25.926 +01:00 [DBG] Connection id "0HMVFCPO9SHC6" stopped.
2023-11-27 17:32:25.932 +01:00 [DBG] Connection id "0HMVFCPO9SHC6" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:32:25.932 +01:00 [DBG] Connection id "0HMVFCPO9SHC5" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:32:27.122 +01:00 [DBG] Connection id "0HMVFCPO9SHC7" accepted.
2023-11-27 17:32:27.122 +01:00 [DBG] Connection id "0HMVFCPO9SHC7" received FIN.
2023-11-27 17:32:27.123 +01:00 [DBG] Connection id "0HMVFCPO9SHC7" started.
2023-11-27 17:32:27.128 +01:00 [DBG] Connection id "0HMVFCPO9SHC8" accepted.
2023-11-27 17:32:27.129 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:32:27.129 +01:00 [DBG] Connection id "0HMVFCPO9SHC8" started.
2023-11-27 17:32:27.133 +01:00 [DBG] Connection id "0HMVFCPO9SHC7" stopped.
2023-11-27 17:32:27.134 +01:00 [DBG] Connection id "0HMVFCPO9SHC7" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:32:27.178 +01:00 [DBG] Connection 0HMVFCPO9SHC8 established using the following protocol: "Tls12"
2023-11-27 17:32:27.222 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:32:27.239 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 17:32:27.286 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:32:27.319 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:32:27.325 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:32:27.328 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:32:27.332 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:32:27.365 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:32:27.369 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:32:27.370 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:32:27.372 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:32:27.375 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:32:27.377 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:32:27.380 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:32:27.560 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 17:32:27.841 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:32:27.851 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:32:27.854 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:32:27.857 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:32:27.858 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:32:27.859 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:32:27.862 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:32:27.865 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:32:27.867 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:32:27.869 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:32:27.870 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:32:27.872 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:32:27.873 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:32:28.873 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:32:28.987 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 17:32:29.123 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 17:32:29.564 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 17:32:29.642 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:32:29.717 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (67ms).
2023-11-27 17:32:29.735 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:32:29.758 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:32:29.776 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:32:29.806 +01:00 [INF] Executed DbCommand (35ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:32:29.833 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:32:29.877 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:32:29.896 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:32:29.905 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:32:29.914 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:32:29.922 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:32:29.945 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:32:29.951 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:32:29.952 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:32:29.953 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:32:29.955 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:32:29.957 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 17:32:30.129 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2742.345ms
2023-11-27 17:32:30.132 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:32:30.133 +01:00 [DBG] Connection id "0HMVFCPO9SHC8" completed keep alive response.
2023-11-27 17:32:30.140 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:32:30.146 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 2928.9228ms
2023-11-27 17:32:34.368 +01:00 [DBG] Connection id "0HMVFCPO9SHC9" accepted.
2023-11-27 17:32:34.370 +01:00 [DBG] Connection id "0HMVFCPO9SHC9" started.
2023-11-27 17:32:34.391 +01:00 [DBG] Connection 0HMVFCPO9SHC9 established using the following protocol: "Tls12"
2023-11-27 17:32:34.479 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 17:32:34.724 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 17:32:34.755 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 17:32:34.762 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 282.8038ms
2023-11-27 17:32:34.768 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 17:32:34.773 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 17:32:34.790 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 21.9298ms
2023-11-27 17:32:34.897 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 124.8990ms
2023-11-27 17:32:34.973 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 17:32:35.224 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 251.4389ms
2023-11-27 17:33:42.138 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 17:33:42.247 +01:00 [DBG] Hosting starting
2023-11-27 17:33:42.378 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 17:33:42.430 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 17:33:42.431 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 17:33:42.432 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 17:33:42.433 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 17:33:42.434 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 17:33:42.435 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 17:33:42.436 +01:00 [INF] Hosting environment: Development
2023-11-27 17:33:42.437 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 17:33:42.438 +01:00 [DBG] Hosting started
2023-11-27 17:33:42.508 +01:00 [DBG] Connection id "0HMVFCQF58CU1" received FIN.
2023-11-27 17:33:42.508 +01:00 [DBG] Connection id "0HMVFCQF58CU2" received FIN.
2023-11-27 17:33:42.516 +01:00 [DBG] Connection id "0HMVFCQF58CU2" accepted.
2023-11-27 17:33:42.516 +01:00 [DBG] Connection id "0HMVFCQF58CU1" accepted.
2023-11-27 17:33:42.519 +01:00 [DBG] Connection id "0HMVFCQF58CU2" started.
2023-11-27 17:33:42.539 +01:00 [DBG] Connection id "0HMVFCQF58CU1" started.
2023-11-27 17:33:42.573 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:33:42.573 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:33:42.612 +01:00 [DBG] Connection id "0HMVFCQF58CU2" stopped.
2023-11-27 17:33:42.612 +01:00 [DBG] Connection id "0HMVFCQF58CU1" stopped.
2023-11-27 17:33:42.616 +01:00 [DBG] Connection id "0HMVFCQF58CU2" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:33:42.616 +01:00 [DBG] Connection id "0HMVFCQF58CU1" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:33:43.981 +01:00 [DBG] Connection id "0HMVFCQF58CU3" accepted.
2023-11-27 17:33:43.981 +01:00 [DBG] Connection id "0HMVFCQF58CU3" received FIN.
2023-11-27 17:33:43.983 +01:00 [DBG] Connection id "0HMVFCQF58CU3" started.
2023-11-27 17:33:43.984 +01:00 [DBG] Connection id "0HMVFCQF58CU4" accepted.
2023-11-27 17:33:43.986 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:33:43.986 +01:00 [DBG] Connection id "0HMVFCQF58CU4" started.
2023-11-27 17:33:43.992 +01:00 [DBG] Connection id "0HMVFCQF58CU3" stopped.
2023-11-27 17:33:43.994 +01:00 [DBG] Connection id "0HMVFCQF58CU3" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:33:44.043 +01:00 [DBG] Connection 0HMVFCQF58CU4 established using the following protocol: "Tls12"
2023-11-27 17:33:44.092 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:33:44.112 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 17:33:44.160 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:33:44.195 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:33:44.203 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:33:44.206 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:33:44.211 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:33:44.248 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:33:44.252 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:33:44.254 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:33:44.256 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:33:44.259 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:33:44.261 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:33:44.262 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:33:44.411 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 17:33:44.695 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:33:44.709 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:33:44.712 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:33:44.714 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:33:44.716 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:33:44.717 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:33:44.720 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:33:44.724 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:33:44.726 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:33:44.728 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:33:44.729 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:33:44.730 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:33:44.732 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:33:45.682 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:33:45.782 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 17:33:45.903 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 17:33:46.317 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 17:33:46.393 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:33:46.463 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (64ms).
2023-11-27 17:33:46.483 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:33:46.503 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:33:46.522 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:33:46.548 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:33:46.579 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:33:46.617 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:33:46.641 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:33:46.653 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:33:46.663 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:33:46.670 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:33:46.689 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:33:46.695 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:33:46.696 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:33:46.698 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:33:46.700 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:33:46.702 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 17:33:46.866 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2598.4902ms
2023-11-27 17:33:46.868 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:33:46.870 +01:00 [DBG] Connection id "0HMVFCQF58CU4" completed keep alive response.
2023-11-27 17:33:46.877 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:33:46.883 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 2795.0194ms
2023-11-27 17:33:49.682 +01:00 [DBG] Connection id "0HMVFCQF58CU5" accepted.
2023-11-27 17:33:49.691 +01:00 [DBG] Connection id "0HMVFCQF58CU5" started.
2023-11-27 17:33:49.707 +01:00 [DBG] Connection 0HMVFCQF58CU5 established using the following protocol: "Tls12"
2023-11-27 17:33:49.795 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 17:33:50.056 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 17:33:50.080 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 17:33:50.089 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 293.3430ms
2023-11-27 17:33:50.115 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 17:33:50.123 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 17:33:50.131 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 16.6734ms
2023-11-27 17:33:50.213 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 90.2533ms
2023-11-27 17:33:50.275 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 17:33:50.489 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 214.0429ms
2023-11-27 17:34:09.179 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 17:34:09.340 +01:00 [DBG] Hosting starting
2023-11-27 17:34:09.488 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 17:34:09.551 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 17:34:09.552 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 17:34:09.553 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 17:34:09.554 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 17:34:09.555 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 17:34:09.556 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 17:34:09.557 +01:00 [INF] Hosting environment: Development
2023-11-27 17:34:09.558 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 17:34:09.559 +01:00 [DBG] Hosting started
2023-11-27 17:34:09.917 +01:00 [DBG] Connection id "0HMVFCQNAK92V" accepted.
2023-11-27 17:34:09.917 +01:00 [DBG] Connection id "0HMVFCQNAK930" accepted.
2023-11-27 17:34:09.920 +01:00 [DBG] Connection id "0HMVFCQNAK92V" started.
2023-11-27 17:34:09.920 +01:00 [DBG] Connection id "0HMVFCQNAK930" started.
2023-11-27 17:34:09.928 +01:00 [DBG] Connection id "0HMVFCQNAK92V" received FIN.
2023-11-27 17:34:09.928 +01:00 [DBG] Connection id "0HMVFCQNAK930" received FIN.
2023-11-27 17:34:09.939 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:34:09.939 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:34:09.970 +01:00 [DBG] Connection id "0HMVFCQNAK930" stopped.
2023-11-27 17:34:09.970 +01:00 [DBG] Connection id "0HMVFCQNAK92V" stopped.
2023-11-27 17:34:09.973 +01:00 [DBG] Connection id "0HMVFCQNAK92V" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:34:09.973 +01:00 [DBG] Connection id "0HMVFCQNAK930" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:36:06.742 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 17:36:06.873 +01:00 [DBG] Hosting starting
2023-11-27 17:36:07.009 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 17:36:07.064 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 17:36:07.065 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 17:36:07.065 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 17:36:07.066 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 17:36:07.067 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 17:36:07.068 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 17:36:07.069 +01:00 [INF] Hosting environment: Development
2023-11-27 17:36:07.070 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 17:36:07.071 +01:00 [DBG] Hosting started
2023-11-27 17:36:07.366 +01:00 [DBG] Connection id "0HMVFCRQANQRD" received FIN.
2023-11-27 17:36:07.366 +01:00 [DBG] Connection id "0HMVFCRQANQRE" received FIN.
2023-11-27 17:36:07.376 +01:00 [DBG] Connection id "0HMVFCRQANQRE" accepted.
2023-11-27 17:36:07.376 +01:00 [DBG] Connection id "0HMVFCRQANQRD" accepted.
2023-11-27 17:36:07.379 +01:00 [DBG] Connection id "0HMVFCRQANQRE" started.
2023-11-27 17:36:07.379 +01:00 [DBG] Connection id "0HMVFCRQANQRD" started.
2023-11-27 17:36:07.398 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:36:07.398 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:36:07.430 +01:00 [DBG] Connection id "0HMVFCRQANQRD" stopped.
2023-11-27 17:36:07.430 +01:00 [DBG] Connection id "0HMVFCRQANQRE" stopped.
2023-11-27 17:36:07.435 +01:00 [DBG] Connection id "0HMVFCRQANQRE" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:36:07.435 +01:00 [DBG] Connection id "0HMVFCRQANQRD" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:36:13.248 +01:00 [DBG] Connection id "0HMVFCRQANQRF" accepted.
2023-11-27 17:36:13.251 +01:00 [DBG] Connection id "0HMVFCRQANQRF" started.
2023-11-27 17:36:13.323 +01:00 [DBG] Connection 0HMVFCRQANQRF established using the following protocol: "Tls12"
2023-11-27 17:36:13.397 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 17:36:13.534 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 17:36:13.661 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 17:36:13.686 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 17:36:13.693 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 299.0989ms
2023-11-27 17:36:13.709 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 17:36:13.709 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 17:36:13.717 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 7.8638ms
2023-11-27 17:36:13.805 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 96.4459ms
2023-11-27 17:36:13.872 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 17:36:14.077 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 204.8139ms
2023-11-27 17:36:16.867 +01:00 [DBG] Connection id "0HMVFCRQANQRG" accepted.
2023-11-27 17:36:16.869 +01:00 [DBG] Connection id "0HMVFCRQANQRG" started.
2023-11-27 17:36:16.869 +01:00 [DBG] Connection id "0HMVFCRQANQRG" received FIN.
2023-11-27 17:36:16.869 +01:00 [DBG] Connection id "0HMVFCRQANQRH" accepted.
2023-11-27 17:36:16.880 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:36:16.880 +01:00 [DBG] Connection id "0HMVFCRQANQRH" started.
2023-11-27 17:36:16.892 +01:00 [DBG] Connection id "0HMVFCRQANQRG" stopped.
2023-11-27 17:36:16.894 +01:00 [DBG] Connection id "0HMVFCRQANQRG" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:36:16.899 +01:00 [DBG] Connection 0HMVFCRQANQRH established using the following protocol: "Tls12"
2023-11-27 17:36:16.917 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:36:16.921 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:36:16.958 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:36:16.966 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:36:16.969 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:36:16.973 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:36:17.013 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:36:17.018 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:36:17.019 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:36:17.021 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:36:17.024 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:36:17.026 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:36:17.028 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:36:17.177 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 17:36:17.408 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:36:17.417 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:36:17.420 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:36:17.422 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:36:17.423 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:36:17.425 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:36:17.428 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:36:17.431 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:36:17.434 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:36:17.436 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:36:17.437 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:36:17.439 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:36:17.441 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:36:18.486 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:36:18.594 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 17:36:18.712 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 17:36:19.110 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 17:36:19.197 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:36:19.276 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (71ms).
2023-11-27 17:36:19.294 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:36:19.312 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:36:19.329 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:36:19.356 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:36:19.379 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:36:19.410 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:36:19.430 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:36:19.440 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:36:19.449 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:36:19.457 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:36:19.476 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:36:19.481 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:36:19.481 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:36:19.482 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:36:19.483 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:36:19.485 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 17:36:19.636 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2600.5423ms
2023-11-27 17:36:19.638 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:36:19.640 +01:00 [DBG] Connection id "0HMVFCRQANQRH" completed keep alive response.
2023-11-27 17:36:19.646 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:36:19.653 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 2736.1376ms
2023-11-27 17:37:12.670 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 17:37:12.777 +01:00 [DBG] Hosting starting
2023-11-27 17:37:12.913 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 17:37:12.959 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 17:37:12.960 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 17:37:12.961 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 17:37:12.962 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 17:37:12.962 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 17:37:12.963 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 17:37:12.964 +01:00 [INF] Hosting environment: Development
2023-11-27 17:37:12.965 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 17:37:12.966 +01:00 [DBG] Hosting started
2023-11-27 17:37:13.104 +01:00 [DBG] Connection id "0HMVFCSDTKFRO" accepted.
2023-11-27 17:37:13.104 +01:00 [DBG] Connection id "0HMVFCSDTKFRP" accepted.
2023-11-27 17:37:13.106 +01:00 [DBG] Connection id "0HMVFCSDTKFRO" started.
2023-11-27 17:37:13.106 +01:00 [DBG] Connection id "0HMVFCSDTKFRP" started.
2023-11-27 17:37:13.117 +01:00 [DBG] Connection id "0HMVFCSDTKFRO" received FIN.
2023-11-27 17:37:13.117 +01:00 [DBG] Connection id "0HMVFCSDTKFRP" received FIN.
2023-11-27 17:37:13.131 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:37:13.131 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:37:13.162 +01:00 [DBG] Connection id "0HMVFCSDTKFRP" stopped.
2023-11-27 17:37:13.162 +01:00 [DBG] Connection id "0HMVFCSDTKFRO" stopped.
2023-11-27 17:37:13.165 +01:00 [DBG] Connection id "0HMVFCSDTKFRO" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:37:13.165 +01:00 [DBG] Connection id "0HMVFCSDTKFRP" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:37:13.386 +01:00 [DBG] Connection id "0HMVFCSDTKFRQ" accepted.
2023-11-27 17:37:13.394 +01:00 [DBG] Connection id "0HMVFCSDTKFRQ" started.
2023-11-27 17:37:13.480 +01:00 [DBG] Connection 0HMVFCSDTKFRQ established using the following protocol: "Tls12"
2023-11-27 17:37:13.539 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 17:37:13.697 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 17:37:13.816 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 17:37:13.845 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 17:37:13.856 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 321.0237ms
2023-11-27 17:37:13.865 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 17:37:13.865 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 17:37:13.882 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 16.9478ms
2023-11-27 17:37:13.972 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 107.1023ms
2023-11-27 17:37:14.030 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 17:37:14.214 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 183.4842ms
2023-11-27 17:37:15.606 +01:00 [DBG] Connection id "0HMVFCSDTKFRR" accepted.
2023-11-27 17:37:15.607 +01:00 [DBG] Connection id "0HMVFCSDTKFRR" received FIN.
2023-11-27 17:37:15.607 +01:00 [DBG] Connection id "0HMVFCSDTKFRR" started.
2023-11-27 17:37:15.608 +01:00 [DBG] Connection id "0HMVFCSDTKFRS" accepted.
2023-11-27 17:37:15.611 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:37:15.611 +01:00 [DBG] Connection id "0HMVFCSDTKFRS" started.
2023-11-27 17:37:15.618 +01:00 [DBG] Connection id "0HMVFCSDTKFRR" stopped.
2023-11-27 17:37:15.619 +01:00 [DBG] Connection id "0HMVFCSDTKFRR" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:37:15.626 +01:00 [DBG] Connection 0HMVFCSDTKFRS established using the following protocol: "Tls12"
2023-11-27 17:37:15.640 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:37:15.643 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:37:15.677 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:37:15.684 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:37:15.686 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:15.689 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:15.723 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:37:15.727 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:37:15.729 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:37:15.730 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:37:15.733 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:37:15.735 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:37:15.736 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:37:15.910 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 17:37:16.155 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:37:16.164 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:37:16.166 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:37:16.168 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:16.169 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:16.171 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:37:16.174 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:16.176 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:37:16.178 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:37:16.181 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:16.182 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:16.183 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:37:16.185 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:17.212 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:37:17.320 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 17:37:17.452 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 17:37:17.933 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 17:37:18.010 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:37:18.080 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (65ms).
2023-11-27 17:37:18.099 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:37:18.127 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:37:18.149 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:37:18.182 +01:00 [INF] Executed DbCommand (42ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:37:18.211 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:18.254 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:18.276 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:18.289 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:37:18.302 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:37:18.311 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:37:18.335 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:37:18.341 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:37:18.341 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:37:18.343 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:37:18.344 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:37:18.346 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 17:37:18.525 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2781.7724ms
2023-11-27 17:37:18.528 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:18.529 +01:00 [DBG] Connection id "0HMVFCSDTKFRS" completed keep alive response.
2023-11-27 17:37:18.536 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:37:18.541 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 2900.3633ms
2023-11-27 17:37:20.607 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:37:20.609 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:37:20.612 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:37:20.613 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:37:20.617 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:20.620 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:20.622 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:37:20.625 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:37:20.627 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:37:20.629 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:37:20.633 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:37:20.636 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:37:20.639 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:37:20.651 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:37:20.653 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:37:20.654 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:37:20.655 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:20.657 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:20.659 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:37:20.660 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:20.661 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:37:20.663 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:37:20.666 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:20.668 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:20.670 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:37:20.672 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:20.675 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:37:20.681 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:37:20.683 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 17:37:20.684 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:37:20.686 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:37:20.688 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:37:20.693 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:37:20.698 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:20.700 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:20.703 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:20.705 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:37:20.706 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:37:20.708 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:37:20.710 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:37:20.714 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:37:20.715 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:37:20.716 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:37:20.717 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:37:20.719 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 17:37:20.720 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 81.273ms
2023-11-27 17:37:20.722 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:20.723 +01:00 [DBG] Connection id "0HMVFCSDTKFRS" completed keep alive response.
2023-11-27 17:37:20.724 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:37:20.726 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 118.4873ms
2023-11-27 17:37:22.322 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:37:22.323 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:37:22.325 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:37:22.327 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:37:22.329 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:22.331 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:22.333 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:37:22.340 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:37:22.343 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:37:22.345 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:37:22.348 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:37:22.351 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:37:22.354 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:37:22.360 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:37:22.361 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:37:22.363 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:37:22.366 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:22.367 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:22.370 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:37:22.371 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:22.373 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:37:22.374 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:37:22.376 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:22.378 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:22.379 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:37:22.381 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:22.443 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:37:22.447 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:37:22.448 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 17:37:22.450 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:37:22.452 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:37:22.454 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:37:22.459 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:37:22.465 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:22.468 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:22.470 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:22.472 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:37:22.473 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:37:22.475 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:37:22.477 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:37:22.482 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:37:22.483 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:37:22.485 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:37:22.487 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:37:22.489 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 17:37:22.491 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 136.8235ms
2023-11-27 17:37:22.493 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:22.495 +01:00 [DBG] Connection id "0HMVFCSDTKFRS" completed keep alive response.
2023-11-27 17:37:22.497 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:37:22.498 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 176.1137ms
2023-11-27 17:37:23.962 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:37:23.963 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:37:23.965 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:37:23.966 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:37:23.968 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:23.969 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:23.970 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:37:23.973 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:37:23.974 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:37:23.976 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:37:23.978 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:37:23.980 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:37:23.982 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:37:23.984 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:37:23.986 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:37:23.987 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:37:23.989 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:23.990 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:23.992 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:37:23.993 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:23.994 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:37:23.996 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:37:23.998 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:24.000 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:24.001 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:37:24.003 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:24.005 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:37:24.007 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:37:24.008 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-27 17:37:24.009 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:37:24.011 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:37:24.012 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:37:24.016 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:37:24.019 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:24.021 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:24.023 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:24.025 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:37:24.026 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:37:24.027 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:37:24.029 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:37:24.033 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:37:24.034 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:37:24.035 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:37:24.037 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:37:24.038 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 17:37:24.040 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 57.7455ms
2023-11-27 17:37:24.041 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:24.043 +01:00 [DBG] Connection id "0HMVFCSDTKFRS" completed keep alive response.
2023-11-27 17:37:24.044 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:37:24.046 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 84.0271ms
2023-11-27 17:37:24.803 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:37:24.805 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:37:24.806 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:37:24.807 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:37:24.809 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:24.811 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:24.812 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:37:24.814 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:37:24.816 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:37:24.818 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:37:24.821 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:37:24.822 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:37:24.825 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:37:24.827 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:37:24.828 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:37:24.830 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:37:24.832 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:24.834 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:24.835 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:37:24.836 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:24.838 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:37:24.839 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:37:24.841 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:24.843 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:24.844 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:37:24.846 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:24.848 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:37:24.851 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:37:24.852 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 17:37:24.853 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:37:24.855 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:37:24.856 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:37:24.858 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:37:24.860 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:24.862 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:24.863 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:24.864 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:37:24.865 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:37:24.867 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:37:24.868 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:37:24.870 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:37:24.871 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:37:24.872 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:37:24.872 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:37:24.873 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 17:37:24.875 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 49.8655ms
2023-11-27 17:37:24.876 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:24.877 +01:00 [DBG] Connection id "0HMVFCSDTKFRS" completed keep alive response.
2023-11-27 17:37:24.878 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:37:24.879 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 75.2977ms
2023-11-27 17:37:25.740 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:37:25.741 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:37:25.742 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:37:25.743 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:37:25.745 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:25.746 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:25.747 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:37:25.749 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:37:25.751 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:37:25.752 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:37:25.754 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:37:25.755 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:37:25.756 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:37:25.758 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:37:25.759 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:37:25.760 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:37:25.761 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:25.762 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:25.763 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:37:25.764 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:25.766 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:37:25.767 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:37:25.769 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:25.770 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:25.771 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:37:25.772 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:25.773 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:37:25.775 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:37:25.775 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-27 17:37:25.776 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:37:25.777 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:37:25.779 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:37:25.782 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:37:25.784 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:25.785 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:25.786 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:25.787 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:37:25.788 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:37:25.789 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:37:25.790 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:37:25.793 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:37:25.793 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:37:25.794 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:37:25.795 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:37:25.797 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 17:37:25.799 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 42.3078ms
2023-11-27 17:37:25.800 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:25.802 +01:00 [DBG] Connection id "0HMVFCSDTKFRS" completed keep alive response.
2023-11-27 17:37:25.803 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:37:25.804 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 64.3575ms
2023-11-27 17:37:26.522 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:37:26.523 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:37:26.524 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:37:26.526 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:37:26.528 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:26.529 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:26.530 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:37:26.532 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:37:26.534 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:37:26.535 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:37:26.537 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:37:26.539 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:37:26.541 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:37:26.542 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:37:26.544 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:37:26.545 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:37:26.547 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:26.549 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:26.550 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:37:26.552 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:26.554 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:37:26.555 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:37:26.557 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:26.558 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:26.560 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:37:26.561 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:26.563 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:37:26.566 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:37:26.567 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 17:37:26.568 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:37:26.570 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:37:26.572 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:37:26.574 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:37:26.578 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:26.579 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:26.581 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:26.583 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:37:26.583 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:37:26.585 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:37:26.586 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:37:26.589 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:37:26.590 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:37:26.591 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:37:26.591 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:37:26.593 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 17:37:26.594 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 53.5745ms
2023-11-27 17:37:26.596 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:26.598 +01:00 [DBG] Connection id "0HMVFCSDTKFRS" completed keep alive response.
2023-11-27 17:37:26.599 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:37:26.600 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 77.7602ms
2023-11-27 17:37:27.334 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:37:27.335 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:37:27.337 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:37:27.338 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:37:27.339 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:27.340 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:27.341 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:37:27.344 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:37:27.345 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:37:27.347 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:37:27.349 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:37:27.350 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:37:27.353 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:37:27.355 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:37:27.356 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:37:27.357 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:37:27.359 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:27.360 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:27.362 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:37:27.363 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:27.364 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:37:27.366 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:37:27.368 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:27.369 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:27.371 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:37:27.372 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:27.373 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:37:27.377 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:37:27.378 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 17:37:27.380 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:37:27.381 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:37:27.384 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:37:27.388 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:37:27.392 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:27.394 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:27.396 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:27.399 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:37:27.400 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:37:27.402 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:37:27.403 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:37:27.409 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:37:27.411 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:37:27.412 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:37:27.414 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:37:27.415 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 17:37:27.418 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 65.0998ms
2023-11-27 17:37:27.420 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:27.421 +01:00 [DBG] Connection id "0HMVFCSDTKFRS" completed keep alive response.
2023-11-27 17:37:27.423 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:37:27.425 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 90.9068ms
2023-11-27 17:37:35.079 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2 - -
2023-11-27 17:37:35.085 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:37:35.087 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:37:35.089 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:37:35.091 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:35.093 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:35.095 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:37:35.108 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:37:35.110 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:37:35.113 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:37:35.118 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:37:35.121 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:37:35.125 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:37:35.127 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:37:35.129 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:37:35.132 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:37:35.135 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:35.137 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:35.138 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:37:35.141 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:37:35.142 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:37:35.144 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-27 17:37:35.147 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:35.149 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:35.151 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:35.153 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:37:35.154 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:37:35.157 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:37:35.162 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 17:37:35.168 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0
            ORDER BY c.Name ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 17:37:35.172 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:37:35.174 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 17:37:35.175 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:37:35.177 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:37:35.180 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 17:37:35.183 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 17:37:35.189 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:37:35.191 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:37:35.192 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:37:35.195 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:37:35.199 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:37:35.202 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:37:35.204 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:37:35.206 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:37:35.207 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:37:35.209 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityWithoutPointOfInterestDto'.
2023-11-27 17:37:35.212 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 87.659ms
2023-11-27 17:37:35.214 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:37:35.215 +01:00 [DBG] Connection id "0HMVFCSDTKFRS" completed keep alive response.
2023-11-27 17:37:35.217 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:37:35.218 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2 - - - 200 58 application/json;+charset=utf-8 138.8027ms
2023-11-27 17:43:48.905 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 17:43:49.032 +01:00 [DBG] Hosting starting
2023-11-27 17:43:49.178 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 17:43:49.225 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 17:43:49.226 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 17:43:49.227 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 17:43:49.228 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 17:43:49.229 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 17:43:49.229 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 17:43:49.230 +01:00 [INF] Hosting environment: Development
2023-11-27 17:43:49.231 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 17:43:49.231 +01:00 [DBG] Hosting started
2023-11-27 17:43:49.352 +01:00 [DBG] Connection id "0HMVFD040G8CG" accepted.
2023-11-27 17:43:49.352 +01:00 [DBG] Connection id "0HMVFD040G8CH" accepted.
2023-11-27 17:43:49.355 +01:00 [DBG] Connection id "0HMVFD040G8CH" started.
2023-11-27 17:43:49.355 +01:00 [DBG] Connection id "0HMVFD040G8CG" started.
2023-11-27 17:43:49.355 +01:00 [DBG] Connection id "0HMVFD040G8CH" received FIN.
2023-11-27 17:43:49.355 +01:00 [DBG] Connection id "0HMVFD040G8CG" received FIN.
2023-11-27 17:43:49.373 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:43:49.373 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:43:49.406 +01:00 [DBG] Connection id "0HMVFD040G8CH" stopped.
2023-11-27 17:43:49.406 +01:00 [DBG] Connection id "0HMVFD040G8CG" stopped.
2023-11-27 17:43:49.410 +01:00 [DBG] Connection id "0HMVFD040G8CG" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:43:49.410 +01:00 [DBG] Connection id "0HMVFD040G8CH" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:43:49.525 +01:00 [DBG] Connection id "0HMVFD040G8CI" accepted.
2023-11-27 17:43:49.529 +01:00 [DBG] Connection id "0HMVFD040G8CI" started.
2023-11-27 17:43:49.594 +01:00 [DBG] Connection 0HMVFD040G8CI established using the following protocol: "Tls12"
2023-11-27 17:43:49.652 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 17:43:49.766 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 17:43:49.866 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 17:43:49.885 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 17:43:49.890 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 241.8716ms
2023-11-27 17:43:49.907 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 17:43:49.908 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 17:43:49.914 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 6.7659ms
2023-11-27 17:43:49.974 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 66.6204ms
2023-11-27 17:43:50.015 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 17:43:50.138 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 123.0460ms
2023-11-27 17:43:55.481 +01:00 [DBG] Connection id "0HMVFD040G8CJ" accepted.
2023-11-27 17:43:55.482 +01:00 [DBG] Connection id "0HMVFD040G8CJ" started.
2023-11-27 17:43:55.483 +01:00 [DBG] Connection id "0HMVFD040G8CK" accepted.
2023-11-27 17:43:55.483 +01:00 [DBG] Connection id "0HMVFD040G8CJ" received FIN.
2023-11-27 17:43:55.486 +01:00 [DBG] Connection id "0HMVFD040G8CK" started.
2023-11-27 17:43:55.488 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:43:55.495 +01:00 [DBG] Connection 0HMVFD040G8CK established using the following protocol: "Tls12"
2023-11-27 17:43:55.495 +01:00 [DBG] Connection id "0HMVFD040G8CJ" stopped.
2023-11-27 17:43:55.498 +01:00 [DBG] Connection id "0HMVFD040G8CJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:43:55.512 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2 - -
2023-11-27 17:43:55.516 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:43:55.548 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:43:55.555 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:43:55.557 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:43:55.561 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:43:55.589 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:43:55.592 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:43:55.593 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:43:55.594 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:43:55.597 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:43:55.598 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:43:55.600 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:43:55.752 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 17:43:55.966 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:43:55.971 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:43:55.974 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:43:55.977 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:43:55.978 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:43:55.980 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:43:55.983 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:43:55.986 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:43:55.988 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-27 17:43:55.990 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:43:55.992 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:43:55.993 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:43:55.994 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:43:55.996 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:43:56.948 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:43:57.051 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 17:43:57.512 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0
            ORDER BY c.Name ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 17:43:57.585 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:43:57.648 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (59ms).
2023-11-27 17:43:57.666 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:43:57.692 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:43:57.710 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 17:43:57.742 +01:00 [INF] Executed DbCommand (34ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 17:43:57.770 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:43:57.812 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:43:57.822 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:43:57.828 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:43:57.869 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:43:57.874 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:43:57.875 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:43:57.875 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:43:57.877 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:43:57.878 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityWithoutPointOfInterestDto'.
2023-11-27 17:43:58.017 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2411.7448ms
2023-11-27 17:43:58.020 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:43:58.021 +01:00 [DBG] Connection id "0HMVFD040G8CK" completed keep alive response.
2023-11-27 17:43:58.028 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:43:58.032 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2 - - - 200 58 application/json;+charset=utf-8 2520.7541ms
2023-11-27 17:44:02.678 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:44:02.679 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:44:02.681 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:44:02.683 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:44:02.686 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:44:02.687 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:44:02.688 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:44:02.692 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:44:02.694 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:44:02.696 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:44:02.701 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:44:02.702 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:44:02.705 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:44:02.716 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:44:02.723 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:44:02.725 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:44:02.727 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:44:02.729 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:44:02.731 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:44:02.733 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:44:02.736 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:44:02.738 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:44:02.741 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:44:02.742 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:44:02.743 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:44:02.744 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:44:02.750 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:44:02.758 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 17:44:02.782 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 17:44:02.897 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 17:44:02.904 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:44:02.905 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 17:44:02.907 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:44:02.909 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:44:02.911 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:44:02.915 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:44:02.919 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:44:02.928 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:44:02.947 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:44:02.949 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:44:02.949 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:44:02.951 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:44:03.076 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 371.3395ms
2023-11-27 17:44:03.079 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:44:03.082 +01:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperConfigurationException: 
Unmapped members were found. Review the types and members below.
Add a custom mapping expression, ignore, add a custom resolver, or modify the source/destination type
For no matching constructor, add a no-arg ctor, add optional arguments, or map all of the constructor parameters
================================================================
AutoMapper created this type map for you, but your types cannot be mapped using the current configuration.
City -> CityDto (Destination member list)
NewCityInfo.API.Entities.City -> NewCityInfo.API.Models.CityDto (Destination member list)

Unmapped properties:
PointOfInterests

   at lambda_method99(Closure , City , CityDto , ResolutionContext )
   at lambda_method100(Closure , Object , Object , ResolutionContext )
   at NewCityInfo.API.Controllers.CitiesController.GetCity(Int32 cityId, Boolean includePopintOfInterest) in C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\Controllers\CitiesController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-27 17:44:03.125 +01:00 [DBG] Connection id "0HMVFD040G8CK" completed keep alive response.
2023-11-27 17:44:03.126 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:44:03.127 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 500 - text/plain;+charset=utf-8 449.2191ms
2023-11-27 17:44:46.402 +01:00 [DBG] Connection id "0HMVFD040G8CK" received FIN.
2023-11-27 17:44:46.419 +01:00 [DBG] Connection id "0HMVFD040G8CK" disconnecting.
2023-11-27 17:44:46.426 +01:00 [DBG] Connection id "0HMVFD040G8CK" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:44:46.429 +01:00 [DBG] Connection id "0HMVFD040G8CK" stopped.
2023-11-27 17:44:56.639 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 17:44:56.775 +01:00 [DBG] Hosting starting
2023-11-27 17:44:56.916 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 17:44:56.978 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 17:44:56.979 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 17:44:56.980 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 17:44:56.981 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 17:44:56.982 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 17:44:56.983 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 17:44:56.983 +01:00 [INF] Hosting environment: Development
2023-11-27 17:44:56.984 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 17:44:56.985 +01:00 [DBG] Hosting started
2023-11-27 17:44:57.141 +01:00 [DBG] Connection id "0HMVFD0O70LAP" accepted.
2023-11-27 17:44:57.141 +01:00 [DBG] Connection id "0HMVFD0O70LAQ" accepted.
2023-11-27 17:44:57.150 +01:00 [DBG] Connection id "0HMVFD0O70LAP" started.
2023-11-27 17:44:57.152 +01:00 [DBG] Connection id "0HMVFD0O70LAP" received FIN.
2023-11-27 17:44:57.152 +01:00 [DBG] Connection id "0HMVFD0O70LAQ" received FIN.
2023-11-27 17:44:57.153 +01:00 [DBG] Connection id "0HMVFD0O70LAQ" started.
2023-11-27 17:44:57.205 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:44:57.205 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:44:57.259 +01:00 [DBG] Connection id "0HMVFD0O70LAP" stopped.
2023-11-27 17:44:57.259 +01:00 [DBG] Connection id "0HMVFD0O70LAQ" stopped.
2023-11-27 17:44:57.266 +01:00 [DBG] Connection id "0HMVFD0O70LAP" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:44:57.266 +01:00 [DBG] Connection id "0HMVFD0O70LAQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:45:03.931 +01:00 [DBG] Connection id "0HMVFD0O70LAR" accepted.
2023-11-27 17:45:03.933 +01:00 [DBG] Connection id "0HMVFD0O70LAR" started.
2023-11-27 17:45:04.048 +01:00 [DBG] Connection 0HMVFD0O70LAR established using the following protocol: "Tls12"
2023-11-27 17:45:04.134 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 17:45:04.342 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 17:45:04.522 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 17:45:04.561 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 17:45:04.576 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 449.9616ms
2023-11-27 17:45:04.599 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 17:45:04.599 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 17:45:04.612 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 17.5546ms
2023-11-27 17:45:04.717 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 118.4682ms
2023-11-27 17:45:04.823 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 17:45:05.057 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 233.5642ms
2023-11-27 17:45:12.109 +01:00 [DBG] Connection id "0HMVFD0O70LAS" accepted.
2023-11-27 17:45:12.110 +01:00 [DBG] Connection id "0HMVFD0O70LAS" started.
2023-11-27 17:45:12.112 +01:00 [DBG] Connection id "0HMVFD0O70LAS" received FIN.
2023-11-27 17:45:12.112 +01:00 [DBG] Connection id "0HMVFD0O70LAT" accepted.
2023-11-27 17:45:12.115 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:45:12.115 +01:00 [DBG] Connection id "0HMVFD0O70LAT" started.
2023-11-27 17:45:12.122 +01:00 [DBG] Connection id "0HMVFD0O70LAS" stopped.
2023-11-27 17:45:12.126 +01:00 [DBG] Connection id "0HMVFD0O70LAS" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:45:12.138 +01:00 [DBG] Connection 0HMVFD0O70LAT established using the following protocol: "Tls12"
2023-11-27 17:45:12.150 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:45:12.153 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:45:12.179 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:45:12.185 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:45:12.186 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:45:12.190 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:45:12.223 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:45:12.226 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:45:12.227 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:45:12.229 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:45:12.231 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:45:12.232 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:45:12.234 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:45:12.392 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 17:45:12.662 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:45:12.674 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:45:12.677 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:45:12.679 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:45:12.681 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:45:12.683 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:45:12.686 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:45:12.690 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:45:12.692 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:45:12.695 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:45:12.696 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:45:12.697 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:45:12.699 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:45:13.746 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:45:13.898 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 17:45:14.058 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 17:45:14.489 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 17:45:14.572 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:45:14.646 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (68ms).
2023-11-27 17:45:14.664 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:45:14.687 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:45:14.709 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:45:14.741 +01:00 [INF] Executed DbCommand (41ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:45:14.774 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:45:14.810 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:45:14.832 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:45:14.842 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:45:14.852 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:45:14.861 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:45:14.881 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:45:14.886 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:45:14.887 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:45:14.889 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:45:14.890 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:45:14.892 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 17:45:15.062 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2823.0633ms
2023-11-27 17:45:15.066 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:45:15.067 +01:00 [DBG] Connection id "0HMVFD0O70LAT" completed keep alive response.
2023-11-27 17:45:15.074 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:45:15.079 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 2928.4886ms
2023-11-27 17:45:20.467 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2 - -
2023-11-27 17:45:20.468 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:45:20.471 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:45:20.472 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:45:20.474 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:45:20.477 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:45:20.478 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:45:20.482 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:45:20.484 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:45:20.487 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:45:20.491 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:45:20.493 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:45:20.497 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:45:20.513 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:45:20.515 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:45:20.516 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:45:20.519 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:45:20.520 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:45:20.523 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:45:20.526 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:45:20.528 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:45:20.530 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-27 17:45:20.534 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:45:20.536 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:45:20.538 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:45:20.541 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:45:20.543 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:45:20.547 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:45:20.550 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 17:45:20.557 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0
            ORDER BY c.Name ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 17:45:20.562 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:45:20.563 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 17:45:20.565 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:45:20.567 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:45:20.572 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 17:45:20.576 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 17:45:20.580 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:45:20.582 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:45:20.583 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:45:20.586 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:45:20.590 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:45:20.594 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:45:20.595 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:45:20.597 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:45:20.598 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:45:20.603 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityWithoutPointOfInterestDto'.
2023-11-27 17:45:20.607 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 110.9067ms
2023-11-27 17:45:20.609 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:45:20.611 +01:00 [DBG] Connection id "0HMVFD0O70LAT" completed keep alive response.
2023-11-27 17:45:20.612 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:45:20.614 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2 - - - 200 58 application/json;+charset=utf-8 146.5927ms
2023-11-27 17:45:39.470 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 17:45:39.597 +01:00 [DBG] Hosting starting
2023-11-27 17:45:39.720 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 17:45:39.771 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 17:45:39.772 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 17:45:39.773 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 17:45:39.774 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 17:45:39.775 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 17:45:39.776 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 17:45:39.777 +01:00 [INF] Hosting environment: Development
2023-11-27 17:45:39.778 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 17:45:39.779 +01:00 [DBG] Hosting started
2023-11-27 17:45:39.802 +01:00 [DBG] Connection id "0HMVFD14TSB1P" accepted.
2023-11-27 17:45:39.802 +01:00 [DBG] Connection id "0HMVFD14TSB1Q" accepted.
2023-11-27 17:45:39.804 +01:00 [DBG] Connection id "0HMVFD14TSB1P" started.
2023-11-27 17:45:39.807 +01:00 [DBG] Connection id "0HMVFD14TSB1Q" started.
2023-11-27 17:45:39.809 +01:00 [DBG] Connection id "0HMVFD14TSB1Q" received FIN.
2023-11-27 17:45:39.809 +01:00 [DBG] Connection id "0HMVFD14TSB1P" received FIN.
2023-11-27 17:45:39.825 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:45:39.825 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:45:39.857 +01:00 [DBG] Connection id "0HMVFD14TSB1Q" stopped.
2023-11-27 17:45:39.860 +01:00 [DBG] Connection id "0HMVFD14TSB1P" stopped.
2023-11-27 17:45:39.863 +01:00 [DBG] Connection id "0HMVFD14TSB1Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:45:39.863 +01:00 [DBG] Connection id "0HMVFD14TSB1P" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:45:39.915 +01:00 [DBG] Connection id "0HMVFD14TSB1R" accepted.
2023-11-27 17:45:39.916 +01:00 [DBG] Connection id "0HMVFD14TSB1R" started.
2023-11-27 17:45:39.966 +01:00 [DBG] Connection 0HMVFD14TSB1R established using the following protocol: "Tls12"
2023-11-27 17:45:40.026 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 17:45:40.147 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 17:45:40.251 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 17:45:40.272 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 17:45:40.279 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 257.6022ms
2023-11-27 17:45:40.291 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 17:45:40.291 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 17:45:40.299 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 7.5165ms
2023-11-27 17:45:40.364 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 72.5984ms
2023-11-27 17:45:40.411 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 17:45:40.532 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 121.2065ms
2023-11-27 17:45:43.058 +01:00 [DBG] Connection id "0HMVFD14TSB1S" accepted.
2023-11-27 17:45:43.059 +01:00 [DBG] Connection id "0HMVFD14TSB1S" received FIN.
2023-11-27 17:45:43.062 +01:00 [DBG] Connection id "0HMVFD14TSB1S" started.
2023-11-27 17:45:43.062 +01:00 [DBG] Connection id "0HMVFD14TSB1T" accepted.
2023-11-27 17:45:43.066 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:45:43.066 +01:00 [DBG] Connection id "0HMVFD14TSB1T" started.
2023-11-27 17:45:43.072 +01:00 [DBG] Connection id "0HMVFD14TSB1S" stopped.
2023-11-27 17:45:43.076 +01:00 [DBG] Connection id "0HMVFD14TSB1S" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:45:43.087 +01:00 [DBG] Connection 0HMVFD14TSB1T established using the following protocol: "Tls12"
2023-11-27 17:45:43.101 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:45:43.103 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:45:43.129 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:45:43.134 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:45:43.136 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:45:43.139 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:45:43.167 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:45:43.169 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:45:43.171 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:45:43.172 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:45:43.174 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:45:43.175 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:45:43.177 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:45:43.319 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 17:45:43.539 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:45:43.549 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:45:43.551 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:45:43.555 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:45:43.556 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:45:43.558 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:45:43.560 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:45:43.563 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:45:43.565 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:45:43.567 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:45:43.568 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:45:43.569 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:45:43.571 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:45:44.486 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:45:44.578 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 17:45:44.686 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 17:45:45.071 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 17:45:45.136 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:45:45.204 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (62ms).
2023-11-27 17:45:45.221 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:45:45.241 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:45:45.259 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:45:45.286 +01:00 [INF] Executed DbCommand (33ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:45:45.314 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:45:45.350 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:45:45.371 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:45:45.384 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:45:45.398 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:45:45.407 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:45:45.427 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:45:45.432 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:45:45.432 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:45:45.434 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:45:45.435 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:45:45.437 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 17:45:45.622 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2438.4931ms
2023-11-27 17:45:45.625 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:45:45.626 +01:00 [DBG] Connection id "0HMVFD14TSB1T" completed keep alive response.
2023-11-27 17:45:45.633 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:45:45.639 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 2538.2835ms
2023-11-27 17:47:25.085 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 17:47:25.738 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:47:25.881 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.882 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.882 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.900 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.900 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.900 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.900 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.900 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.900 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.920 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.920 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.921 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.933 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.933 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.933 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.933 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.933 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.933 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.952 +01:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.958 +01:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.958 +01:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.959 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.961 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:25.961 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:26.179 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:26.180 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:26.180 +01:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:26.190 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-27 17:47:26.197 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-27 17:47:26.197 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-27 17:47:26.197 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-27 17:47:26.264 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:47:34.131 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 17:47:34.776 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:47:34.819 +01:00 [DBG] Migrating using database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:47:34.824 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:47:34.836 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:47:34.850 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-11-27 17:47:34.857 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (5ms).
2023-11-27 17:47:34.859 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:47:34.862 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:47:34.869 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 17:47:34.889 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 17:47:34.891 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:47:34.894 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:47:34.895 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:47:34.895 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:47:34.895 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-11-27 17:47:34.895 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2023-11-27 17:47:34.895 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:47:34.895 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:47:34.896 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 17:47:34.896 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 17:47:34.896 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:47:34.896 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:47:34.907 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:47:34.908 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-27 17:47:34.908 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:47:34.908 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:47:34.908 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-11-27 17:47:34.909 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-11-27 17:47:34.911 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:47:34.911 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:47:34.911 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:47:34.924 +01:00 [INF] Applying migration '20231127164726_new'.
2023-11-27 17:47:34.963 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:47:34.963 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:47:34.964 +01:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-27 17:47:34.967 +01:00 [DBG] Began transaction with isolation level 'Serializable'.
2023-11-27 17:47:34.968 +01:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-27 17:47:34.968 +01:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-27 17:47:34.969 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20231127164726_new', '6.0.0');
2023-11-27 17:47:34.969 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20231127164726_new', '6.0.0');
2023-11-27 17:47:34.970 +01:00 [DBG] Committing transaction.
2023-11-27 17:47:34.979 +01:00 [DBG] Committed transaction.
2023-11-27 17:47:34.981 +01:00 [DBG] Disposing transaction.
2023-11-27 17:47:34.981 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:47:34.981 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:47:34.982 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:47:40.433 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 17:47:40.553 +01:00 [DBG] Hosting starting
2023-11-27 17:47:40.704 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 17:47:40.759 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 17:47:40.760 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 17:47:40.761 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 17:47:40.771 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 17:47:40.776 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 17:47:40.777 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 17:47:40.778 +01:00 [DBG] Connection id "0HMVFD28VKAH7" received FIN.
2023-11-27 17:47:40.778 +01:00 [DBG] Connection id "0HMVFD28VKAH8" received FIN.
2023-11-27 17:47:40.778 +01:00 [INF] Hosting environment: Development
2023-11-27 17:47:40.781 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 17:47:40.782 +01:00 [DBG] Hosting started
2023-11-27 17:47:40.788 +01:00 [DBG] Connection id "0HMVFD28VKAH7" accepted.
2023-11-27 17:47:40.788 +01:00 [DBG] Connection id "0HMVFD28VKAH8" accepted.
2023-11-27 17:47:40.791 +01:00 [DBG] Connection id "0HMVFD28VKAH7" started.
2023-11-27 17:47:40.791 +01:00 [DBG] Connection id "0HMVFD28VKAH8" started.
2023-11-27 17:47:40.809 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:47:40.809 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:47:40.852 +01:00 [DBG] Connection id "0HMVFD28VKAH7" stopped.
2023-11-27 17:47:40.852 +01:00 [DBG] Connection id "0HMVFD28VKAH8" stopped.
2023-11-27 17:47:40.859 +01:00 [DBG] Connection id "0HMVFD28VKAH7" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:47:40.859 +01:00 [DBG] Connection id "0HMVFD28VKAH8" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:47:41.037 +01:00 [DBG] Connection id "0HMVFD28VKAH9" accepted.
2023-11-27 17:47:41.272 +01:00 [DBG] Connection id "0HMVFD28VKAH9" started.
2023-11-27 17:47:41.395 +01:00 [DBG] Connection 0HMVFD28VKAH9 established using the following protocol: "Tls12"
2023-11-27 17:47:41.509 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 17:47:41.662 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 17:47:41.768 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 17:47:41.792 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 17:47:41.800 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 298.0677ms
2023-11-27 17:47:41.811 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 17:47:41.811 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 17:47:41.828 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 17.1843ms
2023-11-27 17:47:41.896 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 84.9662ms
2023-11-27 17:47:41.948 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 17:47:42.092 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 143.8373ms
2023-11-27 17:47:43.950 +01:00 [DBG] Connection id "0HMVFD28VKAHA" accepted.
2023-11-27 17:47:43.951 +01:00 [DBG] Connection id "0HMVFD28VKAHA" received FIN.
2023-11-27 17:47:43.952 +01:00 [DBG] Connection id "0HMVFD28VKAHA" started.
2023-11-27 17:47:43.952 +01:00 [DBG] Connection id "0HMVFD28VKAHB" accepted.
2023-11-27 17:47:43.956 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:47:43.957 +01:00 [DBG] Connection id "0HMVFD28VKAHB" started.
2023-11-27 17:47:43.966 +01:00 [DBG] Connection id "0HMVFD28VKAHA" stopped.
2023-11-27 17:47:43.969 +01:00 [DBG] Connection id "0HMVFD28VKAHA" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:47:43.981 +01:00 [DBG] Connection 0HMVFD28VKAHB established using the following protocol: "Tls12"
2023-11-27 17:47:43.996 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:47:43.999 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:47:44.035 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:47:44.044 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:47:44.047 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:47:44.052 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:47:44.092 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:47:44.097 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:47:44.099 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:47:44.101 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:47:44.103 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:47:44.106 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:47:44.109 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:47:44.294 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 17:47:44.520 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:47:44.528 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:47:44.531 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:47:44.533 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:47:44.535 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:47:44.536 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:47:44.538 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:47:44.541 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:47:44.543 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:47:44.545 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:47:44.546 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:47:44.548 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:47:44.549 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:47:45.557 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:47:45.655 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 17:47:45.769 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 17:47:46.148 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 17:47:46.221 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:47:46.289 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (64ms).
2023-11-27 17:47:46.307 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:47:46.328 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:47:46.347 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:47:46.395 +01:00 [INF] Executed DbCommand (52ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:47:46.425 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:46.461 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:46.481 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:47:46.491 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:47:46.502 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:47:46.509 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:47:46.532 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:47:46.537 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:47:46.537 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:47:46.538 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:47:46.540 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:47:46.541 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 17:47:46.703 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2588.4585ms
2023-11-27 17:47:46.706 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:47:46.707 +01:00 [DBG] Connection id "0HMVFD28VKAHB" completed keep alive response.
2023-11-27 17:47:46.714 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:47:46.720 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 2724.4848ms
2023-11-27 17:52:21.727 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 17:52:21.866 +01:00 [DBG] Hosting starting
2023-11-27 17:52:21.990 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 17:52:22.039 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 17:52:22.041 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 17:52:22.042 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 17:52:22.043 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 17:52:22.044 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 17:52:22.045 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 17:52:22.046 +01:00 [INF] Hosting environment: Development
2023-11-27 17:52:22.048 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 17:52:22.049 +01:00 [DBG] Hosting started
2023-11-27 17:52:22.096 +01:00 [DBG] Connection id "0HMVFD4SQFM9S" received FIN.
2023-11-27 17:52:22.107 +01:00 [DBG] Connection id "0HMVFD4SQFM9S" accepted.
2023-11-27 17:52:22.109 +01:00 [DBG] Connection id "0HMVFD4SQFM9S" started.
2023-11-27 17:52:22.128 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:52:22.169 +01:00 [DBG] Connection id "0HMVFD4SQFM9S" stopped.
2023-11-27 17:52:22.174 +01:00 [DBG] Connection id "0HMVFD4SQFM9S" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:52:22.233 +01:00 [DBG] Connection id "0HMVFD4SQFM9T" accepted.
2023-11-27 17:52:22.235 +01:00 [DBG] Connection id "0HMVFD4SQFM9T" started.
2023-11-27 17:52:22.292 +01:00 [DBG] Connection 0HMVFD4SQFM9T established using the following protocol: "Tls12"
2023-11-27 17:52:22.346 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 17:52:22.473 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 17:52:22.582 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 17:52:22.605 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 17:52:22.611 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 268.7423ms
2023-11-27 17:52:22.619 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 17:52:22.624 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 17:52:22.625 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 6.0018ms
2023-11-27 17:52:22.691 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 67.3131ms
2023-11-27 17:52:22.731 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 17:52:22.872 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 140.9983ms
2023-11-27 17:52:27.292 +01:00 [DBG] Connection id "0HMVFD4SQFM9U" accepted.
2023-11-27 17:52:27.294 +01:00 [DBG] Connection id "0HMVFD4SQFM9U" received FIN.
2023-11-27 17:52:27.294 +01:00 [DBG] Connection id "0HMVFD4SQFM9U" started.
2023-11-27 17:52:27.298 +01:00 [DBG] Connection id "0HMVFD4SQFM9V" accepted.
2023-11-27 17:52:27.301 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:52:27.302 +01:00 [DBG] Connection id "0HMVFD4SQFM9V" started.
2023-11-27 17:52:27.307 +01:00 [DBG] Connection id "0HMVFD4SQFM9U" stopped.
2023-11-27 17:52:27.309 +01:00 [DBG] Connection id "0HMVFD4SQFM9U" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:52:27.313 +01:00 [DBG] Connection 0HMVFD4SQFM9V established using the following protocol: "Tls12"
2023-11-27 17:52:27.325 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:52:27.329 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:52:27.360 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:52:27.366 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:52:27.367 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:52:27.370 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:52:27.399 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:52:27.401 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:52:27.402 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:52:27.403 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:52:27.405 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:52:27.406 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:52:27.409 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:52:27.562 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 17:52:27.795 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:52:27.805 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:52:27.808 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:52:27.810 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:52:27.811 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:52:27.813 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:52:27.815 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:52:27.817 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:52:27.819 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:52:27.821 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:52:27.822 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:52:27.823 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:52:27.824 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:52:28.783 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:52:28.887 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 17:52:29.008 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 17:52:29.389 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 17:52:29.464 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:52:29.533 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (65ms).
2023-11-27 17:52:29.550 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:52:29.573 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:52:29.593 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:52:29.628 +01:00 [INF] Executed DbCommand (42ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:52:29.653 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:52:29.690 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:52:29.708 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:52:29.716 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:52:29.727 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:52:29.736 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:52:29.757 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:52:29.762 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:52:29.763 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:52:29.764 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:52:29.765 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:52:29.767 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 17:52:29.932 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2516.9008ms
2023-11-27 17:52:29.934 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:52:29.936 +01:00 [DBG] Connection id "0HMVFD4SQFM9V" completed keep alive response.
2023-11-27 17:52:29.943 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:52:29.949 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 2623.5976ms
2023-11-27 17:57:38.741 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 17:57:38.843 +01:00 [DBG] Hosting starting
2023-11-27 17:57:38.970 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 17:57:39.026 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 17:57:39.027 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 17:57:39.028 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 17:57:39.030 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 17:57:39.031 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 17:57:39.032 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 17:57:39.033 +01:00 [INF] Hosting environment: Development
2023-11-27 17:57:39.034 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 17:57:39.035 +01:00 [DBG] Hosting started
2023-11-27 17:57:39.340 +01:00 [DBG] Connection id "0HMVFD7RBTTHV" accepted.
2023-11-27 17:57:39.340 +01:00 [DBG] Connection id "0HMVFD7RBTTHU" accepted.
2023-11-27 17:57:39.345 +01:00 [DBG] Connection id "0HMVFD7RBTTHV" started.
2023-11-27 17:57:39.345 +01:00 [DBG] Connection id "0HMVFD7RBTTHU" started.
2023-11-27 17:57:39.347 +01:00 [DBG] Connection id "0HMVFD7RBTTHU" received FIN.
2023-11-27 17:57:39.347 +01:00 [DBG] Connection id "0HMVFD7RBTTHV" received FIN.
2023-11-27 17:57:39.362 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:57:39.362 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:57:39.392 +01:00 [DBG] Connection id "0HMVFD7RBTTHV" stopped.
2023-11-27 17:57:39.392 +01:00 [DBG] Connection id "0HMVFD7RBTTHU" stopped.
2023-11-27 17:57:39.395 +01:00 [DBG] Connection id "0HMVFD7RBTTHV" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:57:39.395 +01:00 [DBG] Connection id "0HMVFD7RBTTHU" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:57:42.697 +01:00 [DBG] Connection id "0HMVFD7RBTTI0" accepted.
2023-11-27 17:57:42.697 +01:00 [DBG] Connection id "0HMVFD7RBTTI0" received FIN.
2023-11-27 17:57:42.698 +01:00 [DBG] Connection id "0HMVFD7RBTTI0" started.
2023-11-27 17:57:42.699 +01:00 [DBG] Connection id "0HMVFD7RBTTI1" accepted.
2023-11-27 17:57:42.701 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:57:42.701 +01:00 [DBG] Connection id "0HMVFD7RBTTI1" started.
2023-11-27 17:57:42.704 +01:00 [DBG] Connection id "0HMVFD7RBTTI0" stopped.
2023-11-27 17:57:42.706 +01:00 [DBG] Connection id "0HMVFD7RBTTI0" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:57:42.745 +01:00 [DBG] Connection 0HMVFD7RBTTI1 established using the following protocol: "Tls12"
2023-11-27 17:57:42.791 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:57:42.809 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 17:57:42.851 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:57:42.882 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:57:42.888 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:57:42.890 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:57:42.893 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:57:42.924 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:57:42.928 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:57:42.930 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:57:42.932 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:57:42.934 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:57:42.935 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:57:42.937 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:57:43.091 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 17:57:43.306 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:57:43.316 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:57:43.319 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:57:43.322 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:57:43.323 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:57:43.325 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:57:43.328 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:57:43.331 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:57:43.333 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:57:43.335 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:57:43.336 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:57:43.338 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:57:43.341 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:57:44.189 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:57:44.289 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 17:57:44.405 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 17:57:44.817 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 17:57:44.883 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:57:44.957 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (67ms).
2023-11-27 17:57:44.977 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:57:45.002 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:57:45.023 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:57:45.058 +01:00 [INF] Executed DbCommand (40ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:57:45.083 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:57:45.117 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:57:45.134 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:57:45.143 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:57:45.152 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:57:45.159 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:57:45.178 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:57:45.184 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:57:45.185 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:57:45.185 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:57:45.187 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:57:45.189 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 17:57:45.392 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2449.0007ms
2023-11-27 17:57:45.395 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:57:45.397 +01:00 [DBG] Connection id "0HMVFD7RBTTI1" completed keep alive response.
2023-11-27 17:57:45.406 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:57:45.412 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 2623.9871ms
2023-11-27 17:57:45.857 +01:00 [DBG] Connection id "0HMVFD7RBTTI2" accepted.
2023-11-27 17:57:45.862 +01:00 [DBG] Connection id "0HMVFD7RBTTI2" started.
2023-11-27 17:57:45.870 +01:00 [DBG] Connection 0HMVFD7RBTTI2 established using the following protocol: "Tls12"
2023-11-27 17:57:45.948 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 17:57:46.218 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 17:57:46.244 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 17:57:46.252 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 304.2082ms
2023-11-27 17:57:46.271 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 17:57:46.262 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 17:57:46.284 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 21.5864ms
2023-11-27 17:57:46.350 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 79.2785ms
2023-11-27 17:57:46.412 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 17:57:46.580 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 168.1632ms
2023-11-27 17:57:49.995 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2 - -
2023-11-27 17:57:49.997 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:57:50.001 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:57:50.003 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:57:50.005 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:57:50.007 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:57:50.009 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:57:50.015 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:57:50.017 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:57:50.018 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:57:50.020 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:57:50.022 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:57:50.025 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:57:50.040 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:57:50.042 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:57:50.043 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:57:50.045 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:57:50.047 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:57:50.048 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:57:50.050 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:57:50.052 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:57:50.053 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-27 17:57:50.056 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:57:50.058 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:57:50.060 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:57:50.062 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:57:50.063 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:57:50.066 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:57:50.069 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 17:57:50.074 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0
            ORDER BY c.Name ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 17:57:50.080 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:57:50.082 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-11-27 17:57:50.083 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:57:50.085 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:57:50.087 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 17:57:50.093 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 17:57:50.105 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:57:50.106 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:57:50.109 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:57:50.111 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:57:50.115 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:57:50.118 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:57:50.119 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:57:50.120 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:57:50.121 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:57:50.122 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityWithoutPointOfInterestDto'.
2023-11-27 17:57:50.127 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 101.8566ms
2023-11-27 17:57:50.128 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:57:50.129 +01:00 [DBG] Connection id "0HMVFD7RBTTI1" completed keep alive response.
2023-11-27 17:57:50.130 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:57:50.132 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2 - - - 200 58 application/json;+charset=utf-8 136.4887ms
2023-11-27 17:59:07.598 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 17:59:07.693 +01:00 [DBG] Hosting starting
2023-11-27 17:59:07.812 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 17:59:07.861 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 17:59:07.862 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 17:59:07.863 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 17:59:07.864 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 17:59:07.865 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 17:59:07.866 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 17:59:07.866 +01:00 [INF] Hosting environment: Development
2023-11-27 17:59:07.867 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 17:59:07.868 +01:00 [DBG] Hosting started
2023-11-27 17:59:08.202 +01:00 [DBG] Connection id "0HMVFD8LRDE1E" received FIN.
2023-11-27 17:59:08.202 +01:00 [DBG] Connection id "0HMVFD8LRDE1F" received FIN.
2023-11-27 17:59:08.212 +01:00 [DBG] Connection id "0HMVFD8LRDE1E" accepted.
2023-11-27 17:59:08.212 +01:00 [DBG] Connection id "0HMVFD8LRDE1F" accepted.
2023-11-27 17:59:08.215 +01:00 [DBG] Connection id "0HMVFD8LRDE1E" started.
2023-11-27 17:59:08.216 +01:00 [DBG] Connection id "0HMVFD8LRDE1F" started.
2023-11-27 17:59:08.233 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:59:08.233 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:59:08.263 +01:00 [DBG] Connection id "0HMVFD8LRDE1F" stopped.
2023-11-27 17:59:08.263 +01:00 [DBG] Connection id "0HMVFD8LRDE1E" stopped.
2023-11-27 17:59:08.268 +01:00 [DBG] Connection id "0HMVFD8LRDE1E" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:59:08.268 +01:00 [DBG] Connection id "0HMVFD8LRDE1F" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:59:10.851 +01:00 [DBG] Connection id "0HMVFD8LRDE1G" accepted.
2023-11-27 17:59:10.851 +01:00 [DBG] Connection id "0HMVFD8LRDE1G" received FIN.
2023-11-27 17:59:10.852 +01:00 [DBG] Connection id "0HMVFD8LRDE1G" started.
2023-11-27 17:59:10.857 +01:00 [DBG] Connection id "0HMVFD8LRDE1H" accepted.
2023-11-27 17:59:10.858 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 17:59:10.859 +01:00 [DBG] Connection id "0HMVFD8LRDE1H" started.
2023-11-27 17:59:10.865 +01:00 [DBG] Connection id "0HMVFD8LRDE1G" stopped.
2023-11-27 17:59:10.867 +01:00 [DBG] Connection id "0HMVFD8LRDE1G" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 17:59:10.916 +01:00 [DBG] Connection 0HMVFD8LRDE1H established using the following protocol: "Tls12"
2023-11-27 17:59:10.964 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2 - -
2023-11-27 17:59:10.983 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 17:59:11.028 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:59:11.058 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:59:11.064 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:59:11.066 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:59:11.070 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:59:11.098 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:59:11.101 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:59:11.103 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:59:11.104 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:59:11.105 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:59:11.107 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:59:11.109 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:59:11.256 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 17:59:11.474 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:59:11.480 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:59:11.483 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:59:11.484 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:59:11.486 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:59:11.487 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:59:11.490 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:59:11.493 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:59:11.495 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-27 17:59:11.497 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:59:11.498 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:59:11.500 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:59:11.501 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:59:11.502 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:59:12.454 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:59:12.541 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 17:59:12.929 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0
            ORDER BY c.Name ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 17:59:13.008 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:59:13.078 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (65ms).
2023-11-27 17:59:13.098 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:59:13.118 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:59:13.137 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 17:59:13.166 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 17:59:13.188 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:59:13.221 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:59:13.233 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:59:13.240 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:59:13.242 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:59:13.247 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:59:13.248 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:59:13.249 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:59:13.251 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:59:13.252 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Entities.PointOfInterest, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-27 17:59:13.390 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2275.6256ms
2023-11-27 17:59:13.393 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:59:13.394 +01:00 [DBG] Connection id "0HMVFD8LRDE1H" completed keep alive response.
2023-11-27 17:59:13.400 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:59:13.405 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2 - - - 200 2 application/json;+charset=utf-8 2444.6630ms
2023-11-27 17:59:15.388 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2 - -
2023-11-27 17:59:15.389 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:59:15.390 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:59:15.392 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:59:15.394 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:59:15.395 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:59:15.397 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:59:15.399 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:59:15.400 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:59:15.402 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:59:15.404 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:59:15.406 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:59:15.408 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:59:15.420 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:59:15.421 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:59:15.423 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:59:15.424 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:59:15.426 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:59:15.427 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:59:15.428 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:59:15.430 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:59:15.431 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-27 17:59:15.433 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:59:15.435 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:59:15.437 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:59:15.439 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:59:15.441 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:59:15.455 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:59:15.462 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:59:15.463 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 17:59:15.464 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:59:15.466 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:59:15.468 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 17:59:15.470 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 17:59:15.473 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:59:15.475 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:59:15.476 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:59:15.477 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:59:15.479 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:59:15.482 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:59:15.483 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:59:15.484 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:59:15.485 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:59:15.487 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Entities.PointOfInterest, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-27 17:59:15.489 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 80.9248ms
2023-11-27 17:59:15.490 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:59:15.491 +01:00 [DBG] Connection id "0HMVFD8LRDE1H" completed keep alive response.
2023-11-27 17:59:15.492 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:59:15.493 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2 - - - 200 2 application/json;+charset=utf-8 105.0754ms
2023-11-27 17:59:15.780 +01:00 [DBG] Connection id "0HMVFD8LRDE1I" accepted.
2023-11-27 17:59:15.781 +01:00 [DBG] Connection id "0HMVFD8LRDE1I" started.
2023-11-27 17:59:15.795 +01:00 [DBG] Connection 0HMVFD8LRDE1I established using the following protocol: "Tls12"
2023-11-27 17:59:15.868 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 17:59:16.088 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 17:59:16.114 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 17:59:16.116 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 248.1735ms
2023-11-27 17:59:16.120 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 17:59:16.126 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 17:59:16.133 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 12.6790ms
2023-11-27 17:59:16.226 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 100.0843ms
2023-11-27 17:59:16.276 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 17:59:16.413 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 137.1223ms
2023-11-27 17:59:18.349 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2 - -
2023-11-27 17:59:18.350 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:59:18.351 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:59:18.352 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:59:18.353 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:59:18.354 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:59:18.355 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:59:18.357 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:59:18.358 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:59:18.360 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:59:18.362 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:59:18.363 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:59:18.365 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:59:18.368 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:59:18.370 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:59:18.371 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:59:18.372 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:59:18.373 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:59:18.374 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:59:18.376 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:59:18.377 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:59:18.378 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-27 17:59:18.380 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:59:18.382 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:59:18.383 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:59:18.384 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:59:18.385 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:59:18.432 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:59:18.435 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:59:18.436 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-27 17:59:18.437 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:59:18.438 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:59:18.439 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 17:59:18.442 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 17:59:18.445 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:59:18.447 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:59:18.448 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:59:18.449 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:59:18.451 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:59:18.454 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:59:18.455 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:59:18.455 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:59:18.456 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:59:18.458 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Entities.PointOfInterest, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-27 17:59:18.459 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 94.5937ms
2023-11-27 17:59:18.461 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:59:18.462 +01:00 [DBG] Connection id "0HMVFD8LRDE1H" completed keep alive response.
2023-11-27 17:59:18.463 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:59:18.463 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2 - - - 200 2 application/json;+charset=utf-8 114.5772ms
2023-11-27 17:59:19.236 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2 - -
2023-11-27 17:59:19.237 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:59:19.239 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:59:19.240 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:59:19.243 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:59:19.245 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:59:19.248 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:59:19.252 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:59:19.254 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:59:19.256 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:59:19.262 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:59:19.264 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:59:19.267 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:59:19.270 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:59:19.271 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:59:19.273 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:59:19.275 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:59:19.277 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:59:19.279 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:59:19.281 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:59:19.282 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:59:19.284 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-11-27 17:59:19.286 +01:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:59:19.288 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:59:19.290 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:59:19.291 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:59:19.293 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:59:19.295 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:59:19.298 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:59:19.299 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 17:59:19.301 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:59:19.302 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:59:19.305 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 17:59:19.308 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 17:59:19.313 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:59:19.315 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:59:19.316 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:59:19.319 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:59:19.320 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:59:19.325 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:59:19.326 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:59:19.328 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:59:19.329 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:59:19.331 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Entities.PointOfInterest, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-27 17:59:19.333 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 66.1064ms
2023-11-27 17:59:19.335 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:59:19.337 +01:00 [DBG] Connection id "0HMVFD8LRDE1H" completed keep alive response.
2023-11-27 17:59:19.338 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:59:19.339 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2 - - - 200 2 application/json;+charset=utf-8 103.1511ms
2023-11-27 17:59:35.716 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 17:59:35.718 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 17:59:35.720 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 17:59:35.722 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 17:59:35.725 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:59:35.727 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:59:35.729 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 17:59:35.731 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 17:59:35.733 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 17:59:35.735 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 17:59:35.738 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 17:59:35.740 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 17:59:35.742 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:59:35.745 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 17:59:35.753 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:59:35.755 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 17:59:35.757 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:59:35.758 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:59:35.760 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 17:59:35.762 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 17:59:35.764 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:59:35.767 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 17:59:35.770 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:59:35.772 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:59:35.773 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 17:59:35.775 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 17:59:35.778 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 17:59:35.788 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 17:59:35.816 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 17:59:35.965 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 17:59:35.972 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 17:59:35.973 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 17:59:35.975 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:59:35.977 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:59:35.979 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:59:35.983 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 17:59:35.987 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:59:35.998 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:59:36.021 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 17:59:36.024 +01:00 [DBG] A data reader was disposed.
2023-11-27 17:59:36.025 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 17:59:36.027 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 17:59:36.028 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 17:59:36.033 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 17:59:36.034 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 17:59:36.036 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 17:59:36.037 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 17:59:36.039 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Entities.PointOfInterest, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-27 17:59:36.088 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 345.3685ms
2023-11-27 17:59:36.090 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 17:59:36.092 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected for property 'pointOfInterestsInCity' with type 'System.Collections.Generic.List`1[NewCityInfo.API.Entities.PointOfInterest]'. Path '[0].city'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-27 17:59:36.128 +01:00 [DBG] Connection id "0HMVFD8LRDE1H" completed keep alive response.
2023-11-27 17:59:36.129 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 17:59:36.130 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 500 - text/plain;+charset=utf-8 414.3788ms
2023-11-27 18:01:14.678 +01:00 [DBG] Connection id "0HMVFD8LRDE1H" received FIN.
2023-11-27 18:01:14.683 +01:00 [DBG] Connection id "0HMVFD8LRDE1H" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:01:14.697 +01:00 [DBG] Connection id "0HMVFD8LRDE1H" disconnecting.
2023-11-27 18:01:14.701 +01:00 [DBG] Connection id "0HMVFD8LRDE1H" stopped.
2023-11-27 18:04:59.935 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 18:05:00.114 +01:00 [DBG] Hosting starting
2023-11-27 18:05:00.290 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 18:05:00.347 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 18:05:00.348 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 18:05:00.350 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 18:05:00.350 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 18:05:00.351 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 18:05:00.352 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 18:05:00.353 +01:00 [INF] Hosting environment: Development
2023-11-27 18:05:00.354 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 18:05:00.355 +01:00 [DBG] Hosting started
2023-11-27 18:05:00.476 +01:00 [DBG] Connection id "0HMVFDBUQV0M9" received FIN.
2023-11-27 18:05:00.476 +01:00 [DBG] Connection id "0HMVFDBUQV0MA" received FIN.
2023-11-27 18:05:00.485 +01:00 [DBG] Connection id "0HMVFDBUQV0MA" accepted.
2023-11-27 18:05:00.485 +01:00 [DBG] Connection id "0HMVFDBUQV0M9" accepted.
2023-11-27 18:05:00.487 +01:00 [DBG] Connection id "0HMVFDBUQV0MA" started.
2023-11-27 18:05:00.487 +01:00 [DBG] Connection id "0HMVFDBUQV0M9" started.
2023-11-27 18:05:00.513 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:05:00.513 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:05:00.545 +01:00 [DBG] Connection id "0HMVFDBUQV0MA" stopped.
2023-11-27 18:05:00.545 +01:00 [DBG] Connection id "0HMVFDBUQV0M9" stopped.
2023-11-27 18:05:00.547 +01:00 [DBG] Connection id "0HMVFDBUQV0MA" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:05:00.547 +01:00 [DBG] Connection id "0HMVFDBUQV0M9" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:05:00.642 +01:00 [DBG] Connection id "0HMVFDBUQV0MB" accepted.
2023-11-27 18:05:00.644 +01:00 [DBG] Connection id "0HMVFDBUQV0MB" started.
2023-11-27 18:05:00.702 +01:00 [DBG] Connection 0HMVFDBUQV0MB established using the following protocol: "Tls12"
2023-11-27 18:05:00.767 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 18:05:00.891 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 18:05:01.002 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 18:05:01.026 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 18:05:01.033 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 269.2738ms
2023-11-27 18:05:01.045 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 18:05:01.046 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 18:05:01.053 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 7.1294ms
2023-11-27 18:05:01.111 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 65.3536ms
2023-11-27 18:05:01.152 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 18:05:01.300 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 147.5317ms
2023-11-27 18:05:14.807 +01:00 [DBG] Connection id "0HMVFDBUQV0MC" accepted.
2023-11-27 18:05:14.809 +01:00 [DBG] Connection id "0HMVFDBUQV0MC" started.
2023-11-27 18:05:14.810 +01:00 [DBG] Connection id "0HMVFDBUQV0MD" accepted.
2023-11-27 18:05:14.810 +01:00 [DBG] Connection id "0HMVFDBUQV0MC" received FIN.
2023-11-27 18:05:14.813 +01:00 [DBG] Connection id "0HMVFDBUQV0MD" started.
2023-11-27 18:05:14.835 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:05:14.837 +01:00 [DBG] Connection 0HMVFDBUQV0MD established using the following protocol: "Tls12"
2023-11-27 18:05:14.851 +01:00 [DBG] Connection id "0HMVFDBUQV0MC" stopped.
2023-11-27 18:05:14.853 +01:00 [DBG] Connection id "0HMVFDBUQV0MC" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:05:14.864 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:05:14.868 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:05:14.902 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:05:14.910 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:05:14.912 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:05:14.916 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:05:14.951 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:05:14.955 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:05:14.956 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:05:14.959 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:05:14.961 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:05:14.964 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:05:14.966 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:05:15.124 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:05:15.353 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:05:15.362 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:05:15.365 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:05:15.366 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:05:15.367 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:05:15.369 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:05:15.371 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:05:15.374 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:05:15.376 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:05:15.379 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:05:15.380 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:05:15.381 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:05:15.383 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:05:22.761 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:05:22.801 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-27 18:05:22.809 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-27 18:05:30.720 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:05:30.864 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:05:31.289 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:05:31.364 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:05:31.446 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (77ms).
2023-11-27 18:05:31.468 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:05:31.496 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:05:31.524 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:05:31.591 +01:00 [INF] Executed DbCommand (67ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:05:31.630 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:05:31.676 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:05:31.701 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:05:31.715 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:05:31.729 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:05:31.740 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:05:41.420 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-27 18:05:41.432 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-27 18:06:12.584 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-27 18:06:12.585 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-27 18:06:14.579 +01:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-11-27 18:06:14.581 +01:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-11-27 18:07:35.118 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 18:07:35.286 +01:00 [DBG] Hosting starting
2023-11-27 18:07:35.435 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 18:07:35.491 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 18:07:35.491 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 18:07:35.493 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 18:07:35.493 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 18:07:35.494 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 18:07:35.495 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 18:07:35.496 +01:00 [INF] Hosting environment: Development
2023-11-27 18:07:35.497 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 18:07:35.497 +01:00 [DBG] Hosting started
2023-11-27 18:07:35.678 +01:00 [DBG] Connection id "0HMVFDDD31QHO" accepted.
2023-11-27 18:07:35.678 +01:00 [DBG] Connection id "0HMVFDDD31QHP" accepted.
2023-11-27 18:07:35.680 +01:00 [DBG] Connection id "0HMVFDDD31QHO" started.
2023-11-27 18:07:35.680 +01:00 [DBG] Connection id "0HMVFDDD31QHP" started.
2023-11-27 18:07:35.681 +01:00 [DBG] Connection id "0HMVFDDD31QHQ" received FIN.
2023-11-27 18:07:35.684 +01:00 [DBG] Connection id "0HMVFDDD31QHQ" accepted.
2023-11-27 18:07:35.685 +01:00 [DBG] Connection id "0HMVFDDD31QHQ" started.
2023-11-27 18:07:35.694 +01:00 [DBG] Connection id "0HMVFDDD31QHP" received FIN.
2023-11-27 18:07:35.694 +01:00 [DBG] Connection id "0HMVFDDD31QHO" received FIN.
2023-11-27 18:07:35.695 +01:00 [DBG] Connection id "0HMVFDDD31QHR" accepted.
2023-11-27 18:07:35.703 +01:00 [DBG] Connection id "0HMVFDDD31QHR" started.
2023-11-27 18:07:35.712 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:07:35.712 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:07:35.712 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:07:35.749 +01:00 [DBG] Connection id "0HMVFDDD31QHP" stopped.
2023-11-27 18:07:35.749 +01:00 [DBG] Connection id "0HMVFDDD31QHQ" stopped.
2023-11-27 18:07:35.752 +01:00 [DBG] Connection id "0HMVFDDD31QHO" stopped.
2023-11-27 18:07:35.756 +01:00 [DBG] Connection id "0HMVFDDD31QHQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:07:35.758 +01:00 [DBG] Connection id "0HMVFDDD31QHO" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:07:35.754 +01:00 [DBG] Connection id "0HMVFDDD31QHP" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:07:35.764 +01:00 [DBG] Connection 0HMVFDDD31QHR established using the following protocol: "Tls12"
2023-11-27 18:07:35.809 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:07:35.826 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 18:07:35.873 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:07:35.908 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:07:35.915 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:07:35.918 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:07:35.922 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:07:35.959 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:07:35.962 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:07:35.963 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:07:35.964 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:07:35.967 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:07:35.968 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:07:35.970 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:07:36.128 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:07:36.381 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:07:36.391 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:07:36.394 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:07:36.397 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:07:36.398 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:07:36.401 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:07:36.405 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:07:36.409 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:07:36.411 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:07:36.414 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:07:36.415 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:07:36.417 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:07:36.419 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:07:54.664 +01:00 [DBG] Connection id "0HMVFDDD31QHS" accepted.
2023-11-27 18:07:54.666 +01:00 [DBG] Connection id "0HMVFDDD31QHS" started.
2023-11-27 18:07:54.676 +01:00 [DBG] Connection 0HMVFDDD31QHS established using the following protocol: "Tls12"
2023-11-27 18:07:54.694 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 18:07:54.905 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 18:07:54.928 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 18:07:54.934 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 239.7083ms
2023-11-27 18:07:54.946 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 18:07:54.952 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 5.8450ms
2023-11-27 18:07:54.966 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 18:07:55.045 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 79.5831ms
2023-11-27 18:07:55.118 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 18:07:55.271 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 152.6706ms
2023-11-27 18:07:55.892 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:07:56.012 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:07:56.156 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:07:56.615 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:07:56.692 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:07:56.761 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (61ms).
2023-11-27 18:07:56.784 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:07:56.811 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:07:56.836 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:07:56.868 +01:00 [INF] Executed DbCommand (42ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:07:56.905 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:07:56.953 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:07:56.975 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:07:56.986 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:07:56.997 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:07:57.008 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:07:59.833 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:07:59.838 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:07:59.850 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:07:59.854 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:07:59.855 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:07:59.856 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:07:59.859 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:07:59.861 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:07:59.866 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:07:59.869 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:07:59.870 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:07:59.872 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:07:59.876 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:07:59.881 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:07:59.882 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:07:59.883 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:07:59.885 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:07:59.887 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Entities.PointOfInterest, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-27 18:08:00.069 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 24092.2942ms
2023-11-27 18:08:00.074 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:08:00.076 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected for property 'pointOfInterestsInCity' with type 'System.Collections.Generic.List`1[NewCityInfo.API.Entities.PointOfInterest]'. Path '[0].city'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-27 18:08:00.104 +01:00 [DBG] Connection id "0HMVFDDD31QHR" completed keep alive response.
2023-11-27 18:08:00.111 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:08:00.117 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 500 - text/plain;+charset=utf-8 24313.3279ms
2023-11-27 18:08:18.994 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:08:18.995 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:08:18.997 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:08:18.999 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:08:19.001 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:08:19.003 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:08:19.005 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:08:19.007 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:08:19.008 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:08:19.010 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:08:19.013 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:08:19.014 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:08:19.016 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:08:19.025 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:08:19.027 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:08:19.028 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:08:19.030 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:08:19.031 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:08:19.032 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:08:19.034 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:08:19.037 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:08:19.039 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:08:19.041 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:08:19.042 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:08:19.044 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:08:19.045 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:08:24.262 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:08:24.275 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:08:24.277 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:08:24.279 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:08:24.282 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:08:24.284 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:08:24.288 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:08:24.293 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:08:24.296 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:08:24.298 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:08:24.301 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:08:24.302 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:08:24.305 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:09:09.366 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:09:09.370 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-11-27 18:09:09.375 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:09:09.380 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:09:09.383 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:09:09.391 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:09:09.398 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:09:09.399 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:09:09.402 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:09:30.044 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:09:30.053 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:09:30.055 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:09:30.057 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:09:30.059 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:09:30.060 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Entities.PointOfInterest, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-27 18:09:37.852 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 78835.3233ms
2023-11-27 18:09:37.856 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:09:37.861 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected for property 'pointOfInterestsInCity' with type 'System.Collections.Generic.List`1[NewCityInfo.API.Entities.PointOfInterest]'. Path '[0].city'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-27 18:09:37.875 +01:00 [DBG] Connection id "0HMVFDDD31QHR" completed keep alive response.
2023-11-27 18:09:37.876 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:09:37.876 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 500 - text/plain;+charset=utf-8 78882.2298ms
2023-11-27 18:20:50.661 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 18:20:50.780 +01:00 [DBG] Hosting starting
2023-11-27 18:20:50.901 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 18:20:50.958 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 18:20:50.959 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 18:20:50.960 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 18:20:50.961 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 18:20:50.962 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 18:20:50.963 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 18:20:50.964 +01:00 [DBG] Connection id "0HMVFDKQ3GMR1" received FIN.
2023-11-27 18:20:50.964 +01:00 [INF] Hosting environment: Development
2023-11-27 18:20:50.966 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 18:20:50.967 +01:00 [DBG] Hosting started
2023-11-27 18:20:50.977 +01:00 [DBG] Connection id "0HMVFDKQ3GMR1" accepted.
2023-11-27 18:20:50.979 +01:00 [DBG] Connection id "0HMVFDKQ3GMR1" started.
2023-11-27 18:20:50.997 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:20:51.038 +01:00 [DBG] Connection id "0HMVFDKQ3GMR1" stopped.
2023-11-27 18:20:51.042 +01:00 [DBG] Connection id "0HMVFDKQ3GMR1" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:20:51.073 +01:00 [DBG] Connection id "0HMVFDKQ3GMR2" accepted.
2023-11-27 18:20:51.074 +01:00 [DBG] Connection id "0HMVFDKQ3GMR2" started.
2023-11-27 18:20:51.155 +01:00 [DBG] Connection 0HMVFDKQ3GMR2 established using the following protocol: "Tls12"
2023-11-27 18:20:51.215 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 18:20:51.382 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 18:20:51.488 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 18:20:51.513 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 18:20:51.523 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 313.5334ms
2023-11-27 18:20:51.529 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 18:20:51.529 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 18:20:51.539 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 10.1402ms
2023-11-27 18:20:51.599 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 70.3045ms
2023-11-27 18:20:51.643 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 18:20:51.772 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 129.4551ms
2023-11-27 18:20:53.444 +01:00 [DBG] Connection id "0HMVFDKQ3GMR3" accepted.
2023-11-27 18:20:53.444 +01:00 [DBG] Connection id "0HMVFDKQ3GMR3" received FIN.
2023-11-27 18:20:53.445 +01:00 [DBG] Connection id "0HMVFDKQ3GMR3" started.
2023-11-27 18:20:53.448 +01:00 [DBG] Connection id "0HMVFDKQ3GMR4" accepted.
2023-11-27 18:20:53.451 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:20:53.451 +01:00 [DBG] Connection id "0HMVFDKQ3GMR4" started.
2023-11-27 18:20:53.456 +01:00 [DBG] Connection id "0HMVFDKQ3GMR3" stopped.
2023-11-27 18:20:53.459 +01:00 [DBG] Connection id "0HMVFDKQ3GMR3" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:20:53.463 +01:00 [DBG] Connection 0HMVFDKQ3GMR4 established using the following protocol: "Tls12"
2023-11-27 18:20:53.476 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:20:53.479 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:20:53.504 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:20:53.511 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:20:53.513 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:20:53.516 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:20:53.549 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:20:53.552 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:20:53.553 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:20:53.555 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:20:53.557 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:20:53.558 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:20:53.560 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:20:53.728 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:20:53.981 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:20:53.993 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:20:53.995 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:20:53.998 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:20:53.999 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:20:54.001 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:20:54.004 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:20:54.007 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:20:54.009 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:20:54.011 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:20:54.012 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:20:54.013 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:20:54.015 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:21:00.623 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:21:00.742 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:21:00.924 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:21:01.438 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:21:01.511 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:21:01.598 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (79ms).
2023-11-27 18:21:01.622 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:21:01.643 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:21:01.661 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:21:01.690 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:21:01.713 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:21:01.751 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:21:01.771 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:21:01.780 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:21:01.791 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:21:01.799 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:21:09.557 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:21:09.561 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:21:09.574 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:21:09.579 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:21:09.580 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:21:09.582 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:21:09.583 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:21:09.585 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:21:09.589 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:21:09.591 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:21:09.592 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:21:09.594 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:22:04.237 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:22:04.241 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:22:04.242 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:22:04.243 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:22:04.245 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:22:04.246 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Entities.PointOfInterest, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-27 18:22:18.886 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 85321.7605ms
2023-11-27 18:22:18.896 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:22:18.908 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected for property 'pointOfInterestsInCity' with type 'System.Collections.Generic.List`1[NewCityInfo.API.Entities.PointOfInterest]'. Path '[0].city'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-27 18:22:18.934 +01:00 [DBG] Connection id "0HMVFDKQ3GMR4" completed keep alive response.
2023-11-27 18:22:18.939 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:22:18.945 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 500 - text/plain;+charset=utf-8 85469.1656ms
2023-11-27 18:22:33.909 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 18:22:34.023 +01:00 [DBG] Hosting starting
2023-11-27 18:22:34.362 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 18:22:34.446 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 18:22:34.449 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 18:22:34.450 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 18:22:34.451 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 18:22:34.452 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 18:22:34.453 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 18:22:34.454 +01:00 [INF] Hosting environment: Development
2023-11-27 18:22:34.455 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 18:22:34.456 +01:00 [DBG] Hosting started
2023-11-27 18:22:34.657 +01:00 [DBG] Connection id "0HMVFDLP0DF6K" received FIN.
2023-11-27 18:22:34.657 +01:00 [DBG] Connection id "0HMVFDLP0DF6L" received FIN.
2023-11-27 18:22:34.669 +01:00 [DBG] Connection id "0HMVFDLP0DF6L" accepted.
2023-11-27 18:22:34.669 +01:00 [DBG] Connection id "0HMVFDLP0DF6K" accepted.
2023-11-27 18:22:34.672 +01:00 [DBG] Connection id "0HMVFDLP0DF6K" started.
2023-11-27 18:22:34.672 +01:00 [DBG] Connection id "0HMVFDLP0DF6L" started.
2023-11-27 18:22:34.694 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:22:34.694 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:22:34.724 +01:00 [DBG] Connection id "0HMVFDLP0DF6L" stopped.
2023-11-27 18:22:34.724 +01:00 [DBG] Connection id "0HMVFDLP0DF6K" stopped.
2023-11-27 18:22:34.728 +01:00 [DBG] Connection id "0HMVFDLP0DF6K" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:22:34.728 +01:00 [DBG] Connection id "0HMVFDLP0DF6L" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:22:40.242 +01:00 [DBG] Connection id "0HMVFDLP0DF6M" accepted.
2023-11-27 18:22:40.242 +01:00 [DBG] Connection id "0HMVFDLP0DF6M" received FIN.
2023-11-27 18:22:40.243 +01:00 [DBG] Connection id "0HMVFDLP0DF6M" started.
2023-11-27 18:22:40.248 +01:00 [DBG] Connection id "0HMVFDLP0DF6N" accepted.
2023-11-27 18:22:40.250 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:22:40.251 +01:00 [DBG] Connection id "0HMVFDLP0DF6N" started.
2023-11-27 18:22:40.257 +01:00 [DBG] Connection id "0HMVFDLP0DF6M" stopped.
2023-11-27 18:22:40.260 +01:00 [DBG] Connection id "0HMVFDLP0DF6M" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:22:40.303 +01:00 [DBG] Connection 0HMVFDLP0DF6N established using the following protocol: "Tls12"
2023-11-27 18:22:40.345 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:22:40.361 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 18:22:40.401 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:22:40.432 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:22:40.439 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:22:40.442 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:22:40.445 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:22:40.477 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:22:40.482 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:22:40.484 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:22:40.486 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:22:40.489 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:22:40.492 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:22:40.495 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:22:40.644 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:22:40.871 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:22:40.880 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:22:40.883 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:22:40.885 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:22:40.887 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:22:40.888 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:22:40.891 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:22:40.894 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:22:40.896 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:22:40.898 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:22:40.899 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:22:40.901 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:22:40.902 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:22:44.250 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:22:44.311 +01:00 [DBG] Connection id "0HMVFDLP0DF6O" accepted.
2023-11-27 18:22:44.354 +01:00 [DBG] Connection id "0HMVFDLP0DF6O" started.
2023-11-27 18:22:44.402 +01:00 [DBG] Connection 0HMVFDLP0DF6O established using the following protocol: "Tls12"
2023-11-27 18:22:44.429 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 18:22:44.568 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:22:44.755 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 18:22:44.783 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:22:44.795 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 18:22:44.807 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 377.3852ms
2023-11-27 18:22:44.845 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 18:22:44.845 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 18:22:44.858 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 12.8031ms
2023-11-27 18:22:44.979 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 134.4345ms
2023-11-27 18:22:45.040 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 18:22:45.233 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 193.4650ms
2023-11-27 18:22:45.417 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:22:45.501 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:22:45.586 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (81ms).
2023-11-27 18:22:45.604 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:22:45.625 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:22:45.643 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:22:45.675 +01:00 [INF] Executed DbCommand (37ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:22:45.705 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:22:45.747 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:22:45.768 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:22:45.778 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:22:45.788 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:22:45.797 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:22:47.827 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:22:47.830 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:22:47.840 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:22:47.844 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:22:47.845 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:22:47.846 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:22:47.848 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:22:47.849 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:22:47.852 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:22:47.855 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:22:47.856 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:22:47.857 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:22:53.615 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:22:53.621 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:22:53.622 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:22:53.623 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:22:53.624 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:22:53.626 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Entities.PointOfInterest, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-27 18:23:32.631 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 52131.4712ms
2023-11-27 18:23:32.638 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:23:32.647 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected for property 'pointOfInterestsInCity' with type 'System.Collections.Generic.List`1[NewCityInfo.API.Entities.PointOfInterest]'. Path '[0].city'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CalculatePropertyValues(JsonWriter writer, Object value, JsonContainerContract contract, JsonProperty member, JsonProperty property, JsonContract& memberContract, Object& memberValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-27 18:23:32.669 +01:00 [DBG] Connection id "0HMVFDLP0DF6N" completed keep alive response.
2023-11-27 18:23:32.674 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:23:32.679 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 500 - text/plain;+charset=utf-8 52338.1565ms
2023-11-27 18:26:32.010 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 18:26:32.154 +01:00 [DBG] Hosting starting
2023-11-27 18:26:32.311 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 18:26:32.361 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 18:26:32.362 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 18:26:32.363 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 18:26:32.364 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 18:26:32.364 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 18:26:32.365 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 18:26:32.366 +01:00 [INF] Hosting environment: Development
2023-11-27 18:26:32.367 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 18:26:32.367 +01:00 [DBG] Hosting started
2023-11-27 18:26:32.411 +01:00 [DBG] Connection id "0HMVFDNVRNB49" accepted.
2023-11-27 18:26:32.411 +01:00 [DBG] Connection id "0HMVFDNVRNB48" accepted.
2023-11-27 18:26:32.411 +01:00 [DBG] Connection id "0HMVFDNVRNB48" received FIN.
2023-11-27 18:26:32.411 +01:00 [DBG] Connection id "0HMVFDNVRNB49" received FIN.
2023-11-27 18:26:32.414 +01:00 [DBG] Connection id "0HMVFDNVRNB49" started.
2023-11-27 18:26:32.414 +01:00 [DBG] Connection id "0HMVFDNVRNB48" started.
2023-11-27 18:26:32.433 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:26:32.433 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:26:32.469 +01:00 [DBG] Connection id "0HMVFDNVRNB49" stopped.
2023-11-27 18:26:32.473 +01:00 [DBG] Connection id "0HMVFDNVRNB48" stopped.
2023-11-27 18:26:32.476 +01:00 [DBG] Connection id "0HMVFDNVRNB49" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:26:32.476 +01:00 [DBG] Connection id "0HMVFDNVRNB48" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:26:32.505 +01:00 [DBG] Connection id "0HMVFDNVRNB4A" accepted.
2023-11-27 18:26:32.508 +01:00 [DBG] Connection id "0HMVFDNVRNB4A" started.
2023-11-27 18:26:32.572 +01:00 [DBG] Connection 0HMVFDNVRNB4A established using the following protocol: "Tls12"
2023-11-27 18:26:32.641 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 18:26:33.006 +01:00 [DBG] Connection id "0HMVFDNVRNB4B" received FIN.
2023-11-27 18:26:33.016 +01:00 [DBG] Connection id "0HMVFDNVRNB4B" accepted.
2023-11-27 18:26:33.020 +01:00 [DBG] Connection id "0HMVFDNVRNB4B" started.
2023-11-27 18:26:33.033 +01:00 [DBG] Connection id "0HMVFDNVRNB4C" accepted.
2023-11-27 18:26:33.035 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:26:33.043 +01:00 [DBG] Connection id "0HMVFDNVRNB4C" started.
2023-11-27 18:26:33.051 +01:00 [DBG] Connection id "0HMVFDNVRNB4B" stopped.
2023-11-27 18:26:33.053 +01:00 [DBG] Connection id "0HMVFDNVRNB4B" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:26:33.062 +01:00 [DBG] Connection 0HMVFDNVRNB4C established using the following protocol: "Tls12"
2023-11-27 18:26:33.081 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:26:33.083 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 18:26:33.135 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:26:33.172 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:26:33.179 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:26:33.182 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:26:33.188 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:26:33.216 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 18:26:33.226 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:26:33.234 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:26:33.235 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:26:33.238 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:26:33.244 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:26:33.247 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:26:33.248 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 18:26:33.251 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:26:33.257 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 619.5297ms
2023-11-27 18:26:33.285 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 18:26:33.299 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 18:26:33.304 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 18.2528ms
2023-11-27 18:26:33.382 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 82.8363ms
2023-11-27 18:26:33.434 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 18:26:33.436 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:26:33.578 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 143.0991ms
2023-11-27 18:26:33.686 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:26:33.697 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:26:33.700 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:26:33.702 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:26:33.704 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:26:33.707 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:26:33.711 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:26:33.714 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:26:33.716 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:26:33.718 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:26:33.719 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:26:33.721 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:26:33.723 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:26:41.234 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:26:41.358 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:26:41.473 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:26:41.982 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:26:42.057 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:26:42.120 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (59ms).
2023-11-27 18:26:42.140 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:26:42.162 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:26:42.183 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:26:42.212 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:26:42.236 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:26:42.277 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:26:42.309 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:26:42.352 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:26:42.495 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:26:42.505 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:26:43.193 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:26:43.197 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:26:43.206 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:26:43.209 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:26:43.210 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:26:43.212 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:26:43.213 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:26:43.214 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:26:43.218 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:26:43.220 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:26:43.221 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:26:43.222 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:26:44.789 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:26:44.795 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:26:44.796 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:26:44.797 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:26:44.798 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:26:44.800 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Entities.PointOfInterest, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-27 18:26:47.047 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 13790.8426ms
2023-11-27 18:26:47.054 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:26:47.061 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected with type 'NewCityInfo.API.Entities.PointOfInterest'. Path '[0].city.pointOfInterestsInCity'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-27 18:26:47.087 +01:00 [DBG] Connection id "0HMVFDNVRNB4C" completed keep alive response.
2023-11-27 18:26:47.093 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:26:47.097 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 500 - text/plain;+charset=utf-8 14016.7107ms
2023-11-27 18:27:35.164 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 18:27:35.264 +01:00 [DBG] Hosting starting
2023-11-27 18:27:35.483 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 18:27:35.573 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 18:27:35.574 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 18:27:35.575 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 18:27:35.576 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 18:27:35.577 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 18:27:35.578 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 18:27:35.579 +01:00 [INF] Hosting environment: Development
2023-11-27 18:27:35.580 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 18:27:35.581 +01:00 [DBG] Hosting started
2023-11-27 18:27:35.655 +01:00 [DBG] Connection id "0HMVFDOIMQGRC" received FIN.
2023-11-27 18:27:35.655 +01:00 [DBG] Connection id "0HMVFDOIMQGRB" received FIN.
2023-11-27 18:27:35.655 +01:00 [DBG] Connection id "0HMVFDOIMQGRC" accepted.
2023-11-27 18:27:35.655 +01:00 [DBG] Connection id "0HMVFDOIMQGRB" accepted.
2023-11-27 18:27:35.660 +01:00 [DBG] Connection id "0HMVFDOIMQGRC" started.
2023-11-27 18:27:35.660 +01:00 [DBG] Connection id "0HMVFDOIMQGRB" started.
2023-11-27 18:27:35.684 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:27:35.684 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:27:35.743 +01:00 [DBG] Connection id "0HMVFDOIMQGRC" stopped.
2023-11-27 18:27:35.743 +01:00 [DBG] Connection id "0HMVFDOIMQGRB" stopped.
2023-11-27 18:27:35.747 +01:00 [DBG] Connection id "0HMVFDOIMQGRC" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:27:35.747 +01:00 [DBG] Connection id "0HMVFDOIMQGRB" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:27:35.801 +01:00 [DBG] Connection id "0HMVFDOIMQGRD" accepted.
2023-11-27 18:27:35.808 +01:00 [DBG] Connection id "0HMVFDOIMQGRD" started.
2023-11-27 18:27:35.927 +01:00 [DBG] Connection 0HMVFDOIMQGRD established using the following protocol: "Tls12"
2023-11-27 18:27:36.016 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 18:27:36.206 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 18:27:36.310 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 18:27:36.331 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 18:27:36.337 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 328.4655ms
2023-11-27 18:27:36.350 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 18:27:36.353 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 18:27:36.362 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 8.7038ms
2023-11-27 18:27:36.439 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 88.2794ms
2023-11-27 18:27:36.486 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 18:27:36.663 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 176.8377ms
2023-11-27 18:27:38.086 +01:00 [DBG] Connection id "0HMVFDOIMQGRE" accepted.
2023-11-27 18:27:38.087 +01:00 [DBG] Connection id "0HMVFDOIMQGRE" received FIN.
2023-11-27 18:27:38.088 +01:00 [DBG] Connection id "0HMVFDOIMQGRE" started.
2023-11-27 18:27:38.088 +01:00 [DBG] Connection id "0HMVFDOIMQGRF" accepted.
2023-11-27 18:27:38.092 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:27:38.092 +01:00 [DBG] Connection id "0HMVFDOIMQGRF" started.
2023-11-27 18:27:38.098 +01:00 [DBG] Connection id "0HMVFDOIMQGRE" stopped.
2023-11-27 18:27:38.100 +01:00 [DBG] Connection id "0HMVFDOIMQGRE" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:27:38.105 +01:00 [DBG] Connection 0HMVFDOIMQGRF established using the following protocol: "Tls12"
2023-11-27 18:27:38.115 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:27:38.118 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:27:38.150 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:27:38.157 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:27:38.160 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:27:38.164 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:27:38.199 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:27:38.203 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:27:38.204 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:27:38.206 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:27:38.209 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:27:38.210 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:27:38.213 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:27:38.399 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:27:38.673 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:27:38.688 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:27:38.691 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:27:38.694 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:27:38.695 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:27:38.697 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:27:38.700 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:27:38.704 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:27:38.707 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:27:38.709 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:27:38.711 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:27:38.712 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:27:38.714 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:27:40.074 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:27:40.181 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:27:40.303 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:27:40.711 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:27:40.787 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:27:40.856 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (63ms).
2023-11-27 18:27:40.873 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:27:40.896 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:27:40.915 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:27:40.943 +01:00 [INF] Executed DbCommand (35ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:27:40.968 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:27:41.002 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:27:41.022 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:27:41.032 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:27:41.044 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:27:41.054 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:27:41.056 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:27:41.060 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:27:41.071 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:27:41.076 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:27:41.077 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:27:41.079 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:27:41.080 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:27:41.082 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:27:41.087 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:27:41.090 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:27:41.091 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:27:41.093 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:27:41.095 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:27:41.101 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:27:41.101 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:27:41.102 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:27:41.104 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:27:41.106 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Entities.PointOfInterest, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-27 18:27:41.273 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 3055.7386ms
2023-11-27 18:27:41.276 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:27:41.278 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected with type 'NewCityInfo.API.Entities.PointOfInterest'. Path '[0].city.pointOfInterestsInCity'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-27 18:27:41.311 +01:00 [DBG] Connection id "0HMVFDOIMQGRF" completed keep alive response.
2023-11-27 18:27:41.317 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:27:41.322 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 500 - text/plain;+charset=utf-8 3206.8258ms
2023-11-27 18:29:54.428 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 18:29:54.534 +01:00 [DBG] Hosting starting
2023-11-27 18:29:54.667 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 18:29:54.711 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 18:29:54.713 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 18:29:54.715 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 18:29:54.716 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 18:29:54.716 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 18:29:54.717 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 18:29:54.719 +01:00 [INF] Hosting environment: Development
2023-11-27 18:29:54.721 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 18:29:54.722 +01:00 [DBG] Hosting started
2023-11-27 18:29:55.083 +01:00 [DBG] Connection id "0HMVFDPS8JTN7" accepted.
2023-11-27 18:29:55.083 +01:00 [DBG] Connection id "0HMVFDPS8JTN8" accepted.
2023-11-27 18:29:55.087 +01:00 [DBG] Connection id "0HMVFDPS8JTN7" started.
2023-11-27 18:29:55.088 +01:00 [DBG] Connection id "0HMVFDPS8JTN8" started.
2023-11-27 18:29:55.102 +01:00 [DBG] Connection id "0HMVFDPS8JTN8" received FIN.
2023-11-27 18:29:55.102 +01:00 [DBG] Connection id "0HMVFDPS8JTN7" received FIN.
2023-11-27 18:29:55.110 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:29:55.110 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:29:55.144 +01:00 [DBG] Connection id "0HMVFDPS8JTN7" stopped.
2023-11-27 18:29:55.144 +01:00 [DBG] Connection id "0HMVFDPS8JTN8" stopped.
2023-11-27 18:29:55.148 +01:00 [DBG] Connection id "0HMVFDPS8JTN8" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:29:55.148 +01:00 [DBG] Connection id "0HMVFDPS8JTN7" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:30:00.263 +01:00 [DBG] Connection id "0HMVFDPS8JTN9" accepted.
2023-11-27 18:30:00.264 +01:00 [DBG] Connection id "0HMVFDPS8JTN9" received FIN.
2023-11-27 18:30:00.265 +01:00 [DBG] Connection id "0HMVFDPS8JTN9" started.
2023-11-27 18:30:00.267 +01:00 [DBG] Connection id "0HMVFDPS8JTNA" accepted.
2023-11-27 18:30:00.268 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:30:00.269 +01:00 [DBG] Connection id "0HMVFDPS8JTNA" started.
2023-11-27 18:30:00.275 +01:00 [DBG] Connection id "0HMVFDPS8JTN9" stopped.
2023-11-27 18:30:00.277 +01:00 [DBG] Connection id "0HMVFDPS8JTN9" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:30:00.332 +01:00 [DBG] Connection 0HMVFDPS8JTNA established using the following protocol: "Tls12"
2023-11-27 18:30:00.380 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:30:00.400 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 18:30:00.447 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:30:00.476 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:30:00.482 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:30:00.485 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:30:00.489 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:30:00.524 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:30:00.527 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:30:00.528 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:30:00.530 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:30:00.532 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:30:00.533 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:30:00.534 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:30:00.691 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:30:00.920 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:30:00.930 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:30:00.932 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:30:00.934 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:30:00.936 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:30:00.938 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:30:00.941 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:30:00.945 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:30:00.947 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:30:00.949 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:30:00.950 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:30:00.952 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:30:00.955 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:30:01.929 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:30:02.042 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:30:02.154 +01:00 [DBG] Connection id "0HMVFDPS8JTNB" accepted.
2023-11-27 18:30:02.157 +01:00 [DBG] Connection id "0HMVFDPS8JTNB" started.
2023-11-27 18:30:02.167 +01:00 [DBG] Connection 0HMVFDPS8JTNB established using the following protocol: "Tls12"
2023-11-27 18:30:02.217 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:30:02.299 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 18:30:02.500 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 18:30:02.524 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 18:30:02.532 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 232.3829ms
2023-11-27 18:30:02.564 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 18:30:02.564 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 18:30:02.580 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 16.0231ms
2023-11-27 18:30:02.650 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 85.6674ms
2023-11-27 18:30:02.699 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 18:30:02.769 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:30:02.854 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:30:02.877 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 177.3427ms
2023-11-27 18:30:02.937 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (76ms).
2023-11-27 18:30:02.977 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:30:03.014 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:30:03.042 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:30:03.074 +01:00 [INF] Executed DbCommand (44ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:30:03.099 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:30:03.143 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:30:03.162 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:30:03.173 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:30:03.184 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:30:03.194 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:30:03.196 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:30:03.200 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:30:03.210 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:30:03.213 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:30:03.214 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-27 18:30:03.215 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:30:03.216 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:30:03.217 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:30:03.221 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:30:03.224 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:30:03.225 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:30:03.226 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:30:03.229 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:30:03.234 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:30:03.235 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:30:03.237 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:30:03.238 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:30:03.240 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Entities.PointOfInterest, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-27 18:30:03.424 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2882.5819ms
2023-11-27 18:30:03.428 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:30:03.430 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected with type 'NewCityInfo.API.Entities.PointOfInterest'. Path '[0].city.pointOfInterestsInCity'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-27 18:30:03.474 +01:00 [DBG] Connection id "0HMVFDPS8JTNA" completed keep alive response.
2023-11-27 18:30:03.481 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:30:03.487 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 500 - text/plain;+charset=utf-8 3111.8834ms
2023-11-27 18:30:18.500 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:30:18.502 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:30:18.506 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:30:18.509 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:30:18.513 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:30:18.514 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:30:18.517 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:30:18.520 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:30:18.522 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:30:18.524 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:30:18.526 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:30:18.527 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:30:18.528 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:30:18.541 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:30:18.542 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:30:18.544 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:30:18.545 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:30:18.546 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:30:18.547 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:30:18.548 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:30:18.549 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:30:18.550 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:30:18.552 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:30:18.553 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:30:18.555 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:30:18.556 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:30:18.559 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:30:18.564 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:30:18.564 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-27 18:30:18.565 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:30:18.566 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:30:18.568 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:30:18.570 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:30:18.572 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:30:18.574 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:30:18.575 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:30:18.576 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:30:18.577 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:30:18.578 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:30:18.579 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:30:18.580 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-27 18:30:18.581 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:30:18.583 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:30:18.584 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:30:18.587 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:30:18.590 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:30:18.591 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:30:18.592 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:30:18.593 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:30:18.595 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:30:18.596 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:30:18.597 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:30:18.598 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:30:18.599 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Entities.PointOfInterest, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-27 18:30:18.602 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 73.4735ms
2023-11-27 18:30:18.603 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:30:18.605 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Newtonsoft.Json.JsonSerializationException: Self referencing loop detected with type 'NewCityInfo.API.Entities.PointOfInterest'. Path '[0].city.pointOfInterestsInCity'.
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.CheckForCircularReference(JsonWriter writer, Object value, JsonProperty property, JsonContract contract, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IEnumerable values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value, Type objectType)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value, Type objectType)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-27 18:30:18.618 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:30:18.619 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 500 - text/plain;+charset=utf-8 118.7343ms
2023-11-27 18:30:27.903 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/api/cities/2?includePopintOfInterest=false - -
2023-11-27 18:30:27.904 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:30:27.906 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:30:27.907 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:30:27.909 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:30:27.911 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:30:27.912 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:30:27.915 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:30:27.917 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:30:27.919 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:30:27.922 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:30:27.924 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:30:27.926 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:30:27.930 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:30:27.932 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:30:27.933 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:30:27.935 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:30:27.937 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:30:27.939 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:30:27.940 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:30:27.941 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:30:27.943 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:30:27.945 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:30:27.946 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:30:27.948 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:30:27.949 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:30:28.007 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:30:28.011 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:30:28.016 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0
            ORDER BY c.Name ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:30:28.019 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:30:28.020 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:30:28.022 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:30:28.023 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:30:28.024 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 18:30:28.026 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."Description", "c"."Name"
FROM "Cities" AS "c"
WHERE "c"."Id" = @__cityId_0
ORDER BY "c"."Name"
LIMIT 1
2023-11-27 18:30:28.029 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:30:28.031 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:30:28.032 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:30:28.033 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:30:28.034 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:30:28.037 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:30:28.038 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:30:28.039 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:30:28.040 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:30:28.042 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Entities.PointOfInterest, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-27 18:30:28.049 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 123.1788ms
2023-11-27 18:30:28.050 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:30:28.051 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:30:28.053 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/api/cities/2?includePopintOfInterest=false - - - 200 2 application/json;+charset=utf-8 149.4384ms
2023-11-27 18:31:14.008 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 18:31:14.162 +01:00 [DBG] Hosting starting
2023-11-27 18:31:14.328 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 18:31:14.393 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 18:31:14.395 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 18:31:14.396 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 18:31:14.397 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 18:31:14.398 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 18:31:14.399 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 18:31:14.400 +01:00 [INF] Hosting environment: Development
2023-11-27 18:31:14.400 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 18:31:14.401 +01:00 [DBG] Hosting started
2023-11-27 18:31:14.557 +01:00 [DBG] Connection id "0HMVFDQJUFJ72" received FIN.
2023-11-27 18:31:14.558 +01:00 [DBG] Connection id "0HMVFDQJUFJ71" received FIN.
2023-11-27 18:31:14.559 +01:00 [DBG] Connection id "0HMVFDQJUFJ72" accepted.
2023-11-27 18:31:14.559 +01:00 [DBG] Connection id "0HMVFDQJUFJ71" accepted.
2023-11-27 18:31:14.563 +01:00 [DBG] Connection id "0HMVFDQJUFJ71" started.
2023-11-27 18:31:14.563 +01:00 [DBG] Connection id "0HMVFDQJUFJ72" started.
2023-11-27 18:31:14.591 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:31:14.591 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:31:14.639 +01:00 [DBG] Connection id "0HMVFDQJUFJ71" stopped.
2023-11-27 18:31:14.639 +01:00 [DBG] Connection id "0HMVFDQJUFJ72" stopped.
2023-11-27 18:31:14.643 +01:00 [DBG] Connection id "0HMVFDQJUFJ72" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:31:14.643 +01:00 [DBG] Connection id "0HMVFDQJUFJ71" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:31:17.250 +01:00 [DBG] Connection id "0HMVFDQJUFJ73" accepted.
2023-11-27 18:31:17.251 +01:00 [DBG] Connection id "0HMVFDQJUFJ73" received FIN.
2023-11-27 18:31:17.251 +01:00 [DBG] Connection id "0HMVFDQJUFJ73" started.
2023-11-27 18:31:17.253 +01:00 [DBG] Connection id "0HMVFDQJUFJ74" accepted.
2023-11-27 18:31:17.256 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:31:17.256 +01:00 [DBG] Connection id "0HMVFDQJUFJ74" started.
2023-11-27 18:31:17.264 +01:00 [DBG] Connection id "0HMVFDQJUFJ73" stopped.
2023-11-27 18:31:17.267 +01:00 [DBG] Connection id "0HMVFDQJUFJ73" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:31:17.311 +01:00 [DBG] Connection 0HMVFDQJUFJ74 established using the following protocol: "Tls12"
2023-11-27 18:31:17.379 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:31:17.403 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 18:31:17.474 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:31:17.517 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:31:17.525 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:31:17.529 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:31:17.534 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:31:17.573 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:31:17.576 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:31:17.578 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:31:17.581 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:31:17.584 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:31:17.586 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:31:17.589 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:31:17.761 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:31:18.043 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:31:18.052 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:31:18.054 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:31:18.056 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:31:18.057 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:31:18.059 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:31:18.062 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:31:18.065 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:31:18.067 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:31:18.069 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:31:18.070 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:31:18.071 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:31:18.073 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:31:19.133 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:31:19.239 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:31:19.357 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:31:19.816 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:31:19.905 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:31:19.991 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (79ms).
2023-11-27 18:31:20.019 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:31:20.047 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:31:20.076 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:31:20.132 +01:00 [INF] Executed DbCommand (69ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:31:20.164 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:31:20.213 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:31:20.237 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:31:20.250 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:31:20.263 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:31:20.274 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:31:20.277 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:31:20.283 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:31:20.301 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:31:20.306 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:31:20.307 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:31:20.310 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:31:20.311 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:31:20.313 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:31:20.317 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:31:20.321 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:31:20.322 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:31:20.325 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:31:20.348 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:31:20.355 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:31:20.356 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:31:20.358 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:31:20.360 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:31:20.362 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 18:31:20.558 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2963.9219ms
2023-11-27 18:31:20.561 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:31:20.562 +01:00 [DBG] Connection id "0HMVFDQJUFJ74" completed keep alive response.
2023-11-27 18:31:20.571 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:31:20.578 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 3206.1525ms
2023-11-27 18:31:22.513 +01:00 [DBG] Connection id "0HMVFDQJUFJ75" accepted.
2023-11-27 18:31:22.515 +01:00 [DBG] Connection id "0HMVFDQJUFJ75" started.
2023-11-27 18:31:22.530 +01:00 [DBG] Connection 0HMVFDQJUFJ75 established using the following protocol: "Tls12"
2023-11-27 18:31:22.612 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 18:31:22.846 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 18:31:22.877 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 18:31:22.884 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 272.1435ms
2023-11-27 18:31:22.906 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 18:31:22.906 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 18:31:22.915 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 8.9810ms
2023-11-27 18:31:22.983 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 76.2811ms
2023-11-27 18:31:23.037 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 18:31:23.215 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 177.7949ms
2023-11-27 18:31:49.681 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 18:31:49.854 +01:00 [DBG] Hosting starting
2023-11-27 18:31:49.983 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 18:31:50.036 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 18:31:50.037 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 18:31:50.038 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 18:31:50.039 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 18:31:50.040 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 18:31:50.041 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 18:31:50.042 +01:00 [INF] Hosting environment: Development
2023-11-27 18:31:50.042 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 18:31:50.043 +01:00 [DBG] Hosting started
2023-11-27 18:31:50.352 +01:00 [DBG] Connection id "0HMVFDQUJT30T" accepted.
2023-11-27 18:31:50.352 +01:00 [DBG] Connection id "0HMVFDQUJT30U" accepted.
2023-11-27 18:31:50.355 +01:00 [DBG] Connection id "0HMVFDQUJT30T" started.
2023-11-27 18:31:50.355 +01:00 [DBG] Connection id "0HMVFDQUJT30U" started.
2023-11-27 18:31:50.365 +01:00 [DBG] Connection id "0HMVFDQUJT30U" received FIN.
2023-11-27 18:31:50.365 +01:00 [DBG] Connection id "0HMVFDQUJT30T" received FIN.
2023-11-27 18:31:50.375 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:31:50.375 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:31:50.408 +01:00 [DBG] Connection id "0HMVFDQUJT30T" stopped.
2023-11-27 18:31:50.408 +01:00 [DBG] Connection id "0HMVFDQUJT30U" stopped.
2023-11-27 18:31:50.412 +01:00 [DBG] Connection id "0HMVFDQUJT30U" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:31:50.412 +01:00 [DBG] Connection id "0HMVFDQUJT30T" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:31:56.349 +01:00 [DBG] Connection id "0HMVFDQUJT30V" accepted.
2023-11-27 18:31:56.353 +01:00 [DBG] Connection id "0HMVFDQUJT30V" received FIN.
2023-11-27 18:31:56.354 +01:00 [DBG] Connection id "0HMVFDQUJT30V" started.
2023-11-27 18:31:56.356 +01:00 [DBG] Connection id "0HMVFDQUJT310" accepted.
2023-11-27 18:31:56.357 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:31:56.358 +01:00 [DBG] Connection id "0HMVFDQUJT310" started.
2023-11-27 18:31:56.363 +01:00 [DBG] Connection id "0HMVFDQUJT30V" stopped.
2023-11-27 18:31:56.364 +01:00 [DBG] Connection id "0HMVFDQUJT30V" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:31:56.408 +01:00 [DBG] Connection 0HMVFDQUJT310 established using the following protocol: "Tls12"
2023-11-27 18:31:56.450 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:31:56.467 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 18:31:56.512 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:31:56.544 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:31:56.552 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:31:56.555 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:31:56.558 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:31:56.591 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:31:56.593 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:31:56.595 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:31:56.596 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:31:56.599 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:31:56.600 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:31:56.602 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:31:56.768 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:31:57.021 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:31:57.031 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:31:57.034 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:31:57.036 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:31:57.037 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:31:57.039 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:31:57.042 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:31:57.045 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:31:57.048 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:31:57.050 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:31:57.051 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:31:57.053 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:31:57.054 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:31:58.083 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:31:58.194 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:31:58.322 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:31:58.737 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:31:58.811 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:31:58.889 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (73ms).
2023-11-27 18:31:58.907 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:31:58.929 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:31:58.953 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:31:58.987 +01:00 [INF] Executed DbCommand (41ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:31:59.021 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:31:59.068 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:31:59.093 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:31:59.112 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:31:59.127 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:31:59.138 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:31:59.142 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:31:59.147 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:31:59.160 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:31:59.165 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:31:59.167 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:31:59.170 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:31:59.172 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:31:59.174 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:31:59.177 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:31:59.181 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:31:59.182 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:31:59.184 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:31:59.194 +01:00 [DBG] Connection id "0HMVFDQUJT311" accepted.
2023-11-27 18:31:59.195 +01:00 [DBG] Connection id "0HMVFDQUJT311" started.
2023-11-27 18:31:59.223 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:31:59.228 +01:00 [DBG] Connection 0HMVFDQUJT311 established using the following protocol: "Tls12"
2023-11-27 18:31:59.235 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:31:59.238 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:31:59.246 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:31:59.252 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:31:59.254 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 18:31:59.313 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 18:31:59.509 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2899.9024ms
2023-11-27 18:31:59.513 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:31:59.515 +01:00 [DBG] Connection id "0HMVFDQUJT310" completed keep alive response.
2023-11-27 18:31:59.525 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:31:59.532 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 3085.9124ms
2023-11-27 18:31:59.559 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 18:31:59.586 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 18:31:59.591 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 278.3331ms
2023-11-27 18:31:59.629 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 18:31:59.629 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 18:31:59.653 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 24.0433ms
2023-11-27 18:31:59.752 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 123.1836ms
2023-11-27 18:31:59.815 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 18:31:59.997 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 182.3109ms
2023-11-27 18:32:02.423 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:32:02.424 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:32:02.426 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:32:02.427 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:32:02.429 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:32:02.430 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:32:02.431 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:32:02.434 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:32:02.436 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:32:02.437 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:32:02.440 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:32:02.441 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:32:02.443 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:32:02.454 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:32:02.455 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:32:02.457 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:32:02.458 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:32:02.460 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:32:02.461 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:32:02.463 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:32:02.464 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:32:02.467 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:32:02.469 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:32:02.471 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:32:02.473 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:32:02.474 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:32:02.478 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:32:02.487 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:32:02.488 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:32:02.490 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:32:02.492 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:32:02.495 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:32:02.500 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:32:02.505 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:32:02.508 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:32:02.510 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:32:02.514 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:32:02.516 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:32:02.518 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:32:02.520 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:32:02.521 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:32:02.523 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:32:02.525 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:32:02.528 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:32:02.532 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:32:02.537 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:32:02.538 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:32:02.539 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:32:02.542 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:32:02.546 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:32:02.547 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:32:02.549 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:32:02.550 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:32:02.552 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 18:32:02.554 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 111.0068ms
2023-11-27 18:32:02.556 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:32:02.557 +01:00 [DBG] Connection id "0HMVFDQUJT310" completed keep alive response.
2023-11-27 18:32:02.558 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:32:02.559 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 136.0607ms
2023-11-27 18:32:18.328 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 18:32:18.445 +01:00 [DBG] Hosting starting
2023-11-27 18:32:18.615 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 18:32:18.662 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 18:32:18.663 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 18:32:18.664 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 18:32:18.665 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 18:32:18.666 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 18:32:18.668 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 18:32:18.669 +01:00 [INF] Hosting environment: Development
2023-11-27 18:32:18.669 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 18:32:18.670 +01:00 [DBG] Hosting started
2023-11-27 18:32:19.146 +01:00 [DBG] Connection id "0HMVFDR76GEQ3" accepted.
2023-11-27 18:32:19.146 +01:00 [DBG] Connection id "0HMVFDR76GEQ2" accepted.
2023-11-27 18:32:19.148 +01:00 [DBG] Connection id "0HMVFDR76GEQ3" started.
2023-11-27 18:32:19.148 +01:00 [DBG] Connection id "0HMVFDR76GEQ2" started.
2023-11-27 18:32:19.166 +01:00 [DBG] Connection id "0HMVFDR76GEQ3" received FIN.
2023-11-27 18:32:19.166 +01:00 [DBG] Connection id "0HMVFDR76GEQ2" received FIN.
2023-11-27 18:32:19.191 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:32:19.191 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:32:19.233 +01:00 [DBG] Connection id "0HMVFDR76GEQ2" stopped.
2023-11-27 18:32:19.233 +01:00 [DBG] Connection id "0HMVFDR76GEQ3" stopped.
2023-11-27 18:32:19.236 +01:00 [DBG] Connection id "0HMVFDR76GEQ2" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:32:19.236 +01:00 [DBG] Connection id "0HMVFDR76GEQ3" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:32:20.283 +01:00 [DBG] Connection id "0HMVFDR76GEQ4" accepted.
2023-11-27 18:32:20.284 +01:00 [DBG] Connection id "0HMVFDR76GEQ4" received FIN.
2023-11-27 18:32:20.285 +01:00 [DBG] Connection id "0HMVFDR76GEQ4" started.
2023-11-27 18:32:20.287 +01:00 [DBG] Connection id "0HMVFDR76GEQ5" accepted.
2023-11-27 18:32:20.290 +01:00 [DBG] Connection id "0HMVFDR76GEQ5" started.
2023-11-27 18:32:20.291 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:32:20.303 +01:00 [DBG] Connection id "0HMVFDR76GEQ4" stopped.
2023-11-27 18:32:20.305 +01:00 [DBG] Connection id "0HMVFDR76GEQ4" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:32:20.350 +01:00 [DBG] Connection 0HMVFDR76GEQ5 established using the following protocol: "Tls12"
2023-11-27 18:32:20.413 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:32:20.438 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 18:32:20.498 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:32:20.536 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:32:20.542 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:32:20.544 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:32:20.548 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:32:20.579 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:32:20.581 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:32:20.582 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:32:20.584 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:32:20.585 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:32:20.587 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:32:20.589 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:32:20.737 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:32:21.040 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:32:21.050 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:32:21.053 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:32:21.056 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:32:21.058 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:32:21.059 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:32:21.062 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:32:21.066 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:32:21.069 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:32:21.071 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:32:21.073 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:32:21.074 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:32:21.076 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:32:40.710 +01:00 [DBG] Connection id "0HMVFDR76GEQ6" accepted.
2023-11-27 18:32:40.730 +01:00 [DBG] Connection id "0HMVFDR76GEQ6" started.
2023-11-27 18:32:40.752 +01:00 [DBG] Connection 0HMVFDR76GEQ6 established using the following protocol: "Tls12"
2023-11-27 18:32:40.780 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 18:32:41.058 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 18:32:41.089 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 18:32:41.097 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 317.0717ms
2023-11-27 18:32:41.122 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 18:32:41.135 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 12.9197ms
2023-11-27 18:32:41.145 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 18:32:41.258 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 112.9911ms
2023-11-27 18:32:41.414 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 18:32:41.617 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 204.3313ms
2023-11-27 18:32:42.231 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:32:42.328 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:32:42.460 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:32:42.878 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:32:42.953 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:32:43.024 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (65ms).
2023-11-27 18:32:43.042 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:32:43.070 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:32:43.096 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:32:43.136 +01:00 [INF] Executed DbCommand (48ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:32:43.164 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:32:43.204 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:32:43.227 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:32:43.236 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:32:43.249 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:32:43.256 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:32:43.258 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:32:43.262 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:32:43.273 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:32:43.276 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:32:43.278 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:32:43.280 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:32:43.281 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:32:43.283 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:32:43.286 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:32:43.290 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:32:43.291 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:32:43.293 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:33:17.020 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:33:17.025 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:33:17.026 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:33:17.027 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:33:17.029 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:33:17.031 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 18:33:23.537 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 62944.1817ms
2023-11-27 18:33:23.540 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:33:23.541 +01:00 [DBG] Connection id "0HMVFDR76GEQ5" completed keep alive response.
2023-11-27 18:33:23.547 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:33:23.551 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 63144.0618ms
2023-11-27 18:34:41.956 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 18:34:42.066 +01:00 [DBG] Hosting starting
2023-11-27 18:34:42.192 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 18:34:42.259 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 18:34:42.260 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 18:34:42.261 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 18:34:42.262 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 18:34:42.263 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 18:34:42.265 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 18:34:42.266 +01:00 [INF] Hosting environment: Development
2023-11-27 18:34:42.267 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 18:34:42.268 +01:00 [DBG] Hosting started
2023-11-27 18:34:42.315 +01:00 [DBG] Connection id "0HMVFDSHRT2OC" received FIN.
2023-11-27 18:34:42.315 +01:00 [DBG] Connection id "0HMVFDSHRT2OB" received FIN.
2023-11-27 18:34:42.325 +01:00 [DBG] Connection id "0HMVFDSHRT2OB" accepted.
2023-11-27 18:34:42.325 +01:00 [DBG] Connection id "0HMVFDSHRT2OC" accepted.
2023-11-27 18:34:42.328 +01:00 [DBG] Connection id "0HMVFDSHRT2OC" started.
2023-11-27 18:34:42.328 +01:00 [DBG] Connection id "0HMVFDSHRT2OB" started.
2023-11-27 18:34:42.346 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:34:42.346 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:34:42.381 +01:00 [DBG] Connection id "0HMVFDSHRT2OB" stopped.
2023-11-27 18:34:42.381 +01:00 [DBG] Connection id "0HMVFDSHRT2OC" stopped.
2023-11-27 18:34:42.385 +01:00 [DBG] Connection id "0HMVFDSHRT2OC" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:34:42.385 +01:00 [DBG] Connection id "0HMVFDSHRT2OB" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:34:42.522 +01:00 [DBG] Connection id "0HMVFDSHRT2OD" accepted.
2023-11-27 18:34:42.524 +01:00 [DBG] Connection id "0HMVFDSHRT2OD" started.
2023-11-27 18:34:42.628 +01:00 [DBG] Connection 0HMVFDSHRT2OD established using the following protocol: "Tls12"
2023-11-27 18:34:42.689 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 18:34:42.818 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 18:34:42.925 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 18:34:42.951 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 18:34:42.959 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 273.9760ms
2023-11-27 18:34:42.965 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 18:34:42.965 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 18:34:42.976 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 11.5165ms
2023-11-27 18:34:43.045 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 79.8921ms
2023-11-27 18:34:43.096 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 18:34:43.260 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 163.9653ms
2023-11-27 18:34:46.414 +01:00 [DBG] Connection id "0HMVFDSHRT2OE" accepted.
2023-11-27 18:34:46.414 +01:00 [DBG] Connection id "0HMVFDSHRT2OE" received FIN.
2023-11-27 18:34:46.415 +01:00 [DBG] Connection id "0HMVFDSHRT2OE" started.
2023-11-27 18:34:46.415 +01:00 [DBG] Connection id "0HMVFDSHRT2OF" accepted.
2023-11-27 18:34:46.418 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:34:46.419 +01:00 [DBG] Connection id "0HMVFDSHRT2OF" started.
2023-11-27 18:34:46.424 +01:00 [DBG] Connection id "0HMVFDSHRT2OE" stopped.
2023-11-27 18:34:46.426 +01:00 [DBG] Connection id "0HMVFDSHRT2OE" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:34:46.430 +01:00 [DBG] Connection 0HMVFDSHRT2OF established using the following protocol: "Tls12"
2023-11-27 18:34:46.443 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:34:46.445 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:34:46.469 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:34:46.476 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:34:46.479 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:34:46.483 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:34:46.514 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:34:46.517 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:34:46.519 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:34:46.521 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:34:46.524 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:34:46.527 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:34:46.530 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:34:46.680 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:34:46.895 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:34:46.906 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:34:46.910 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:34:46.915 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:34:46.918 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:34:46.920 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:34:46.923 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:34:46.928 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:34:46.932 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:34:46.936 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:34:46.939 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:34:46.941 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:34:46.944 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:34:52.968 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:34:53.101 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:34:53.216 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:34:53.715 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:34:53.797 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:34:53.865 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (65ms).
2023-11-27 18:34:53.886 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:34:53.907 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:34:53.928 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:34:53.957 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:34:53.986 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:34:54.031 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:34:54.052 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:34:54.062 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:34:54.071 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:34:54.078 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:34:54.080 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:34:54.083 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:34:54.094 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:34:54.100 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:34:54.101 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:34:54.103 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:34:54.105 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:34:54.107 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:34:54.110 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:34:54.113 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:34:54.114 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:34:54.116 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:42:11.612 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 18:42:11.797 +01:00 [DBG] Hosting starting
2023-11-27 18:42:11.974 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 18:42:12.036 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 18:42:12.038 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 18:42:12.040 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 18:42:12.042 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 18:42:12.043 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 18:42:12.045 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 18:42:12.046 +01:00 [INF] Hosting environment: Development
2023-11-27 18:42:12.048 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 18:42:12.050 +01:00 [DBG] Hosting started
2023-11-27 18:42:12.540 +01:00 [DBG] Connection id "0HMVFE0O1HPR6" accepted.
2023-11-27 18:42:12.540 +01:00 [DBG] Connection id "0HMVFE0O1HPR7" accepted.
2023-11-27 18:42:12.543 +01:00 [DBG] Connection id "0HMVFE0O1HPR7" started.
2023-11-27 18:42:12.543 +01:00 [DBG] Connection id "0HMVFE0O1HPR6" started.
2023-11-27 18:42:12.556 +01:00 [DBG] Connection id "0HMVFE0O1HPR7" received FIN.
2023-11-27 18:42:12.556 +01:00 [DBG] Connection id "0HMVFE0O1HPR6" received FIN.
2023-11-27 18:42:12.570 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:42:12.570 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:42:12.609 +01:00 [DBG] Connection id "0HMVFE0O1HPR7" stopped.
2023-11-27 18:42:12.614 +01:00 [DBG] Connection id "0HMVFE0O1HPR6" stopped.
2023-11-27 18:42:12.618 +01:00 [DBG] Connection id "0HMVFE0O1HPR6" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:42:12.618 +01:00 [DBG] Connection id "0HMVFE0O1HPR7" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:42:13.069 +01:00 [DBG] Connection id "0HMVFE0O1HPR8" accepted.
2023-11-27 18:42:13.075 +01:00 [DBG] Connection id "0HMVFE0O1HPR8" started.
2023-11-27 18:42:13.075 +01:00 [DBG] Connection id "0HMVFE0O1HPR9" accepted.
2023-11-27 18:42:13.075 +01:00 [DBG] Connection id "0HMVFE0O1HPR8" received FIN.
2023-11-27 18:42:13.083 +01:00 [DBG] Connection id "0HMVFE0O1HPR9" started.
2023-11-27 18:42:13.088 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:42:13.098 +01:00 [DBG] Connection id "0HMVFE0O1HPR8" stopped.
2023-11-27 18:42:13.099 +01:00 [DBG] Connection id "0HMVFE0O1HPR8" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:42:13.136 +01:00 [DBG] Connection 0HMVFE0O1HPR9 established using the following protocol: "Tls12"
2023-11-27 18:42:13.180 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:42:13.196 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 18:42:13.237 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:42:13.265 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:42:13.272 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:42:13.274 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:42:13.277 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:42:13.309 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:42:13.312 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:42:13.313 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:42:13.315 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:42:13.318 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:42:13.319 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:42:13.321 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:42:13.477 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:42:13.686 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:42:13.696 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:42:13.699 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:42:13.701 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:42:13.702 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:42:13.703 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:42:13.706 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:42:13.709 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:42:13.711 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:42:13.713 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:42:13.714 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:42:13.716 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:42:13.717 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:42:19.431 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:42:19.566 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:42:19.711 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:42:20.136 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:42:20.206 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:42:20.286 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (74ms).
2023-11-27 18:42:20.304 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:42:20.325 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:42:20.345 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:42:20.377 +01:00 [INF] Executed DbCommand (37ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:42:20.409 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:42:20.449 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:42:20.476 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:42:20.490 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:42:20.502 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:42:20.512 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:42:20.513 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:42:20.517 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:42:20.527 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:42:20.531 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:42:20.532 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:42:20.533 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:42:20.535 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:42:20.537 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:42:20.541 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:42:20.544 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:42:20.545 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:42:20.546 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:42:20.562 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:42:20.567 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:42:20.567 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:42:20.569 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:42:20.570 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:42:20.572 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 18:42:20.806 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 7478.2225ms
2023-11-27 18:42:20.810 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:42:20.811 +01:00 [DBG] Connection id "0HMVFE0O1HPR9" completed keep alive response.
2023-11-27 18:42:20.820 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:42:20.828 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 7652.2403ms
2023-11-27 18:42:21.328 +01:00 [DBG] Connection id "0HMVFE0O1HPRA" accepted.
2023-11-27 18:42:21.329 +01:00 [DBG] Connection id "0HMVFE0O1HPRA" started.
2023-11-27 18:42:21.344 +01:00 [DBG] Connection 0HMVFE0O1HPRA established using the following protocol: "Tls12"
2023-11-27 18:42:21.433 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 18:42:21.638 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 18:42:21.662 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 18:42:21.666 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 232.7997ms
2023-11-27 18:42:21.680 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 18:42:21.689 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 18:42:21.699 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 18.9203ms
2023-11-27 18:42:21.786 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 97.4103ms
2023-11-27 18:42:21.841 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 18:42:22.007 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 165.5941ms
2023-11-27 18:43:21.714 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 18:43:21.814 +01:00 [DBG] Hosting starting
2023-11-27 18:43:21.946 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 18:43:22.003 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 18:43:22.004 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 18:43:22.005 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 18:43:22.006 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 18:43:22.007 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 18:43:22.008 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 18:43:22.009 +01:00 [INF] Hosting environment: Development
2023-11-27 18:43:22.010 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 18:43:22.011 +01:00 [DBG] Hosting started
2023-11-27 18:43:22.181 +01:00 [DBG] Connection id "0HMVFE1CPNC1F" received FIN.
2023-11-27 18:43:22.181 +01:00 [DBG] Connection id "0HMVFE1CPNC1G" received FIN.
2023-11-27 18:43:22.195 +01:00 [DBG] Connection id "0HMVFE1CPNC1F" accepted.
2023-11-27 18:43:22.195 +01:00 [DBG] Connection id "0HMVFE1CPNC1G" accepted.
2023-11-27 18:43:22.197 +01:00 [DBG] Connection id "0HMVFE1CPNC1F" started.
2023-11-27 18:43:22.197 +01:00 [DBG] Connection id "0HMVFE1CPNC1G" started.
2023-11-27 18:43:22.224 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:43:22.224 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:43:22.276 +01:00 [DBG] Connection id "0HMVFE1CPNC1G" stopped.
2023-11-27 18:43:22.276 +01:00 [DBG] Connection id "0HMVFE1CPNC1F" stopped.
2023-11-27 18:43:22.286 +01:00 [DBG] Connection id "0HMVFE1CPNC1G" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:43:22.286 +01:00 [DBG] Connection id "0HMVFE1CPNC1F" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:43:25.861 +01:00 [DBG] Connection id "0HMVFE1CPNC1I" accepted.
2023-11-27 18:43:25.861 +01:00 [DBG] Connection id "0HMVFE1CPNC1I" received FIN.
2023-11-27 18:43:25.863 +01:00 [DBG] Connection id "0HMVFE1CPNC1I" started.
2023-11-27 18:43:25.865 +01:00 [DBG] Connection id "0HMVFE1CPNC1J" accepted.
2023-11-27 18:43:25.867 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:43:25.868 +01:00 [DBG] Connection id "0HMVFE1CPNC1J" started.
2023-11-27 18:43:25.875 +01:00 [DBG] Connection id "0HMVFE1CPNC1I" stopped.
2023-11-27 18:43:25.877 +01:00 [DBG] Connection id "0HMVFE1CPNC1I" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:43:25.945 +01:00 [DBG] Connection 0HMVFE1CPNC1J established using the following protocol: "Tls12"
2023-11-27 18:43:26.015 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:43:26.045 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 18:43:26.104 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:43:26.144 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:43:26.150 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:43:26.153 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:43:26.157 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:43:26.185 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:43:26.188 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:43:26.189 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:43:26.190 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:43:26.191 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:43:26.193 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:43:26.194 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:43:26.334 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:43:26.493 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:43:26.504 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:43:26.509 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:43:26.513 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:43:26.515 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:43:26.518 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:43:26.522 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:43:26.526 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:43:26.529 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:43:26.532 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:43:26.533 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:43:26.534 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:43:26.537 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:43:27.529 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:43:27.649 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:43:27.791 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:43:28.254 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:43:28.331 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:43:28.407 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (71ms).
2023-11-27 18:43:28.425 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:43:28.449 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:43:28.471 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:43:28.501 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:43:28.533 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:43:28.571 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:43:28.594 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:43:28.607 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:43:28.617 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:43:28.625 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:43:28.627 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:43:28.631 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:43:28.645 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:43:28.649 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:43:28.650 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:43:28.652 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:43:28.653 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:43:28.655 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:43:28.658 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:43:28.661 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:43:28.662 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:43:28.664 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:43:28.679 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:43:28.685 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:43:28.685 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:43:28.687 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:43:28.689 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:43:28.690 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 18:43:28.870 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2668.7725ms
2023-11-27 18:43:28.873 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:43:28.875 +01:00 [DBG] Connection id "0HMVFE1CPNC1J" completed keep alive response.
2023-11-27 18:43:28.882 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:43:28.889 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 2880.4040ms
2023-11-27 18:43:30.225 +01:00 [DBG] Connection id "0HMVFE1CPNC1K" accepted.
2023-11-27 18:43:30.227 +01:00 [DBG] Connection id "0HMVFE1CPNC1K" started.
2023-11-27 18:43:30.240 +01:00 [DBG] Connection 0HMVFE1CPNC1K established using the following protocol: "Tls12"
2023-11-27 18:43:30.321 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 18:43:30.544 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 18:43:30.571 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 18:43:30.576 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 254.8266ms
2023-11-27 18:43:30.597 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 18:43:30.603 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 18:43:30.609 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 12.1816ms
2023-11-27 18:43:30.686 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 82.4790ms
2023-11-27 18:43:30.746 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 18:43:30.926 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 180.2349ms
2023-11-27 18:43:32.550 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:43:32.551 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:43:32.553 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:43:32.555 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:43:32.557 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:43:32.558 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:43:32.559 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:43:32.562 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:43:32.563 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:43:32.565 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:43:32.568 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:43:32.570 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:43:32.572 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:43:32.585 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:43:32.587 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:43:32.588 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:43:32.591 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:43:32.593 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:43:32.594 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:43:32.596 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:43:32.597 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:43:32.599 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:43:32.601 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:43:32.603 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:43:32.606 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:43:32.609 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:43:32.613 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:43:32.621 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:43:32.623 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:43:32.624 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:43:32.627 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:43:32.629 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:43:32.634 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:43:32.641 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:43:32.644 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:43:32.647 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:43:32.650 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:43:32.652 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:43:32.656 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:43:32.658 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:43:32.660 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:43:32.662 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:43:32.664 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:43:32.667 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:43:32.672 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:43:32.676 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:43:32.677 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:43:32.679 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:43:32.681 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:43:32.689 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:43:32.690 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:43:32.692 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:43:32.694 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:43:32.697 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 18:43:32.699 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 126.9772ms
2023-11-27 18:43:32.702 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:43:32.707 +01:00 [DBG] Connection id "0HMVFE1CPNC1J" completed keep alive response.
2023-11-27 18:43:32.709 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:43:32.712 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 162.0931ms
2023-11-27 18:44:03.411 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 18:44:03.525 +01:00 [DBG] Hosting starting
2023-11-27 18:44:03.669 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 18:44:03.734 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 18:44:03.736 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 18:44:03.737 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 18:44:03.738 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 18:44:03.739 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 18:44:03.740 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 18:44:03.741 +01:00 [INF] Hosting environment: Development
2023-11-27 18:44:03.742 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 18:44:03.743 +01:00 [DBG] Hosting started
2023-11-27 18:44:04.214 +01:00 [DBG] Connection id "0HMVFE1PAHSFB" accepted.
2023-11-27 18:44:04.214 +01:00 [DBG] Connection id "0HMVFE1PAHSFA" accepted.
2023-11-27 18:44:04.215 +01:00 [DBG] Connection id "0HMVFE1PAHSFB" started.
2023-11-27 18:44:04.215 +01:00 [DBG] Connection id "0HMVFE1PAHSFA" started.
2023-11-27 18:44:04.225 +01:00 [DBG] Connection id "0HMVFE1PAHSFA" received FIN.
2023-11-27 18:44:04.225 +01:00 [DBG] Connection id "0HMVFE1PAHSFB" received FIN.
2023-11-27 18:44:04.237 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:44:04.237 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:44:04.271 +01:00 [DBG] Connection id "0HMVFE1PAHSFA" stopped.
2023-11-27 18:44:04.271 +01:00 [DBG] Connection id "0HMVFE1PAHSFB" stopped.
2023-11-27 18:44:04.275 +01:00 [DBG] Connection id "0HMVFE1PAHSFA" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:44:04.275 +01:00 [DBG] Connection id "0HMVFE1PAHSFB" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:44:05.932 +01:00 [DBG] Connection id "0HMVFE1PAHSFC" accepted.
2023-11-27 18:44:05.933 +01:00 [DBG] Connection id "0HMVFE1PAHSFC" started.
2023-11-27 18:44:05.933 +01:00 [DBG] Connection id "0HMVFE1PAHSFD" accepted.
2023-11-27 18:44:05.933 +01:00 [DBG] Connection id "0HMVFE1PAHSFC" received FIN.
2023-11-27 18:44:05.936 +01:00 [DBG] Connection id "0HMVFE1PAHSFD" started.
2023-11-27 18:44:05.953 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:44:05.961 +01:00 [DBG] Connection id "0HMVFE1PAHSFC" stopped.
2023-11-27 18:44:05.962 +01:00 [DBG] Connection id "0HMVFE1PAHSFC" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:44:05.982 +01:00 [DBG] Connection 0HMVFE1PAHSFD established using the following protocol: "Tls12"
2023-11-27 18:44:06.028 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:44:06.043 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 18:44:06.088 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:44:06.119 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:44:06.127 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:44:06.129 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:44:06.133 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:44:06.166 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:44:06.170 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:44:06.171 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:44:06.174 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:44:06.177 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:44:06.179 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:44:06.181 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:44:06.394 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:44:06.663 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:44:06.676 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:44:06.680 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:44:06.683 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:44:06.685 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:44:06.687 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:44:06.691 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:44:06.697 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:44:06.700 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:44:06.703 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:44:06.705 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:44:06.707 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:44:06.709 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:44:07.727 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:44:07.867 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:44:08.035 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:44:08.491 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:44:08.576 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:44:08.654 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (74ms).
2023-11-27 18:44:08.675 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:44:08.696 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:44:08.716 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:44:08.752 +01:00 [INF] Executed DbCommand (42ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:44:08.782 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:44:08.819 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:44:08.847 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:44:08.861 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:44:08.871 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:44:08.881 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:44:08.883 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:44:08.890 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:44:08.905 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:44:08.913 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:44:08.915 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:44:08.920 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:44:08.977 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:44:09.018 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:44:09.022 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:44:09.026 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:44:09.027 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:44:09.029 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:44:09.243 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 3053.3829ms
2023-11-27 18:44:09.250 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:44:09.253 +01:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
City -> IEnumerable`1
NewCityInfo.API.Entities.City -> System.Collections.Generic.IEnumerable`1[[NewCityInfo.API.Models.PointOfInterestDto, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
   at lambda_method99(Closure , Object , IEnumerable`1 , ResolutionContext )
   at NewCityInfo.API.Controllers.CitiesController.GetCity(Int32 cityId, Boolean includePopintOfInterest) in C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\Controllers\CitiesController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-27 18:44:09.316 +01:00 [DBG] Connection id "0HMVFE1PAHSFD" completed keep alive response.
2023-11-27 18:44:09.328 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:44:09.338 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 500 - text/plain;+charset=utf-8 3314.2473ms
2023-11-27 18:44:11.246 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:44:11.248 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:44:11.249 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:44:11.251 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:44:11.254 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:44:11.256 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:44:11.258 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:44:11.261 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:44:11.264 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:44:11.267 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:44:11.271 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:44:11.273 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:44:11.276 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:44:11.291 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:44:11.293 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:44:11.297 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:44:11.300 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:44:11.302 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:44:11.304 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:44:11.306 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:44:11.309 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:44:11.312 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:44:11.314 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:44:11.316 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:44:11.318 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:44:11.319 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:44:11.327 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:44:11.336 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:44:11.337 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:44:11.338 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:44:11.340 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:44:11.342 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:44:11.347 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:44:11.351 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:44:11.353 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:44:11.355 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:44:11.357 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:44:11.358 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:44:11.362 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:44:11.364 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:44:11.365 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:44:11.367 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:44:11.369 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:44:11.372 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:44:11.378 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:44:11.381 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:44:11.382 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:44:11.384 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:44:11.460 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 183.6007ms
2023-11-27 18:44:11.462 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:44:11.465 +01:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
City -> IEnumerable`1
NewCityInfo.API.Entities.City -> System.Collections.Generic.IEnumerable`1[[NewCityInfo.API.Models.PointOfInterestDto, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
   at lambda_method99(Closure , Object , IEnumerable`1 , ResolutionContext )
   at NewCityInfo.API.Controllers.CitiesController.GetCity(Int32 cityId, Boolean includePopintOfInterest) in C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\Controllers\CitiesController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-27 18:44:11.507 +01:00 [DBG] Connection id "0HMVFE1PAHSFD" completed keep alive response.
2023-11-27 18:44:11.511 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:44:11.516 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 500 - text/plain;+charset=utf-8 270.5115ms
2023-11-27 18:44:12.861 +01:00 [DBG] Connection id "0HMVFE1PAHSFE" accepted.
2023-11-27 18:44:12.863 +01:00 [DBG] Connection id "0HMVFE1PAHSFE" started.
2023-11-27 18:44:12.873 +01:00 [DBG] Connection 0HMVFE1PAHSFE established using the following protocol: "Tls12"
2023-11-27 18:44:12.943 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 18:44:13.135 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 18:44:13.160 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 18:44:13.163 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 219.9277ms
2023-11-27 18:44:13.177 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 18:44:13.177 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 18:44:13.184 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 7.7393ms
2023-11-27 18:44:13.269 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 92.9748ms
2023-11-27 18:44:13.318 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 18:44:13.499 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 180.3339ms
2023-11-27 18:44:15.066 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:44:15.067 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:44:15.068 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:44:15.070 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:44:15.072 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:44:15.073 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:44:15.074 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:44:15.077 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:44:15.079 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:44:15.080 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:44:15.083 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:44:15.084 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:44:15.087 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:44:15.090 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:44:15.091 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:44:15.092 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:44:15.094 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:44:15.095 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:44:15.097 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:44:15.098 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:44:15.099 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:44:15.101 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:44:15.102 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:44:15.103 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:44:15.105 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:44:15.106 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:44:15.153 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:44:15.156 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:44:15.157 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:44:15.158 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:44:15.160 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:44:15.162 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:44:15.165 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:44:15.168 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:44:15.169 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:44:15.171 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:44:15.172 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:44:15.173 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:44:15.175 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:44:15.177 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:44:15.178 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:44:15.179 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:44:15.180 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:44:15.181 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:44:15.184 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:44:15.186 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:44:15.187 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:44:15.188 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:44:15.227 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 140.5754ms
2023-11-27 18:44:15.229 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:44:15.231 +01:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
City -> IEnumerable`1
NewCityInfo.API.Entities.City -> System.Collections.Generic.IEnumerable`1[[NewCityInfo.API.Models.PointOfInterestDto, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
   at lambda_method99(Closure , Object , IEnumerable`1 , ResolutionContext )
   at NewCityInfo.API.Controllers.CitiesController.GetCity(Int32 cityId, Boolean includePopintOfInterest) in C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\Controllers\CitiesController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-11-27 18:44:15.241 +01:00 [DBG] Connection id "0HMVFE1PAHSFD" completed keep alive response.
2023-11-27 18:44:15.242 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:44:15.244 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 500 - text/plain;+charset=utf-8 177.6246ms
2023-11-27 18:44:43.613 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 18:44:43.753 +01:00 [DBG] Hosting starting
2023-11-27 18:44:43.926 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 18:44:43.997 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 18:44:44.003 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 18:44:44.005 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 18:44:44.006 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 18:44:44.007 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 18:44:44.008 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 18:44:44.010 +01:00 [INF] Hosting environment: Development
2023-11-27 18:44:44.011 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 18:44:44.012 +01:00 [DBG] Hosting started
2023-11-27 18:44:44.337 +01:00 [DBG] Connection id "0HMVFE2597FA2" received FIN.
2023-11-27 18:44:44.337 +01:00 [DBG] Connection id "0HMVFE2597FA3" received FIN.
2023-11-27 18:44:44.343 +01:00 [DBG] Connection id "0HMVFE2597FA2" accepted.
2023-11-27 18:44:44.343 +01:00 [DBG] Connection id "0HMVFE2597FA3" accepted.
2023-11-27 18:44:44.346 +01:00 [DBG] Connection id "0HMVFE2597FA2" started.
2023-11-27 18:44:44.346 +01:00 [DBG] Connection id "0HMVFE2597FA3" started.
2023-11-27 18:44:44.363 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:44:44.363 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:44:44.395 +01:00 [DBG] Connection id "0HMVFE2597FA2" stopped.
2023-11-27 18:44:44.395 +01:00 [DBG] Connection id "0HMVFE2597FA3" stopped.
2023-11-27 18:44:44.400 +01:00 [DBG] Connection id "0HMVFE2597FA2" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:44:44.400 +01:00 [DBG] Connection id "0HMVFE2597FA3" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:44:51.259 +01:00 [DBG] Connection id "0HMVFE2597FA4" accepted.
2023-11-27 18:44:51.260 +01:00 [DBG] Connection id "0HMVFE2597FA4" started.
2023-11-27 18:44:51.334 +01:00 [DBG] Connection 0HMVFE2597FA4 established using the following protocol: "Tls12"
2023-11-27 18:44:51.398 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 18:44:51.558 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 18:44:51.674 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 18:44:51.700 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 18:44:51.708 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 313.2414ms
2023-11-27 18:44:51.749 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 18:44:51.744 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 18:44:51.763 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 18.7443ms
2023-11-27 18:44:51.864 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 114.7320ms
2023-11-27 18:44:51.940 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 18:44:52.142 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 201.5921ms
2023-11-27 18:44:53.729 +01:00 [DBG] Connection id "0HMVFE2597FA5" accepted.
2023-11-27 18:44:53.730 +01:00 [DBG] Connection id "0HMVFE2597FA5" started.
2023-11-27 18:44:53.734 +01:00 [DBG] Connection id "0HMVFE2597FA6" accepted.
2023-11-27 18:44:53.734 +01:00 [DBG] Connection id "0HMVFE2597FA5" received FIN.
2023-11-27 18:44:53.737 +01:00 [DBG] Connection id "0HMVFE2597FA6" started.
2023-11-27 18:44:53.741 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:44:53.748 +01:00 [DBG] Connection 0HMVFE2597FA6 established using the following protocol: "Tls12"
2023-11-27 18:44:53.752 +01:00 [DBG] Connection id "0HMVFE2597FA5" stopped.
2023-11-27 18:44:53.756 +01:00 [DBG] Connection id "0HMVFE2597FA5" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:44:53.767 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:44:53.770 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:44:53.801 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:44:53.808 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:44:53.811 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:44:53.816 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:44:53.850 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:44:53.854 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:44:53.855 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:44:53.857 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:44:53.861 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:44:53.862 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:44:53.866 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:44:54.038 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:44:54.270 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:44:54.285 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:44:54.293 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:44:54.296 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:44:54.299 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:44:54.303 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:44:54.308 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:44:54.312 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:44:54.315 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:44:54.319 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:44:54.320 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:44:54.322 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:44:54.323 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:44:55.412 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:44:55.520 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:44:55.664 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:44:56.159 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:44:56.239 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:44:56.307 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (63ms).
2023-11-27 18:44:56.330 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:44:56.349 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:44:56.366 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:44:56.392 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:44:56.418 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:44:56.453 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:44:56.471 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:44:56.480 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:44:56.489 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:44:56.496 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:44:56.499 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:44:56.504 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:44:56.515 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:44:56.520 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:44:56.522 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:44:56.524 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:44:56.526 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:44:56.529 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:44:56.533 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:44:56.538 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:44:56.540 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:44:56.544 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:44:56.557 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:44:56.565 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:44:56.566 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:44:56.567 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:44:56.569 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:44:56.571 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 18:44:56.717 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2846.969ms
2023-11-27 18:44:56.720 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:44:56.721 +01:00 [DBG] Connection id "0HMVFE2597FA6" completed keep alive response.
2023-11-27 18:44:56.729 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:44:56.734 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 2967.4033ms
2023-11-27 18:45:21.386 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 18:45:21.641 +01:00 [DBG] Hosting starting
2023-11-27 18:45:21.785 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 18:45:21.827 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 18:45:21.828 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 18:45:21.829 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 18:45:21.830 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 18:45:21.831 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 18:45:21.832 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 18:45:21.833 +01:00 [INF] Hosting environment: Development
2023-11-27 18:45:21.833 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 18:45:21.834 +01:00 [DBG] Hosting started
2023-11-27 18:45:22.314 +01:00 [DBG] Connection id "0HMVFE2GJBBEM" accepted.
2023-11-27 18:45:22.316 +01:00 [DBG] Connection id "0HMVFE2GJBBEM" started.
2023-11-27 18:45:22.317 +01:00 [DBG] Connection id "0HMVFE2GJBBEM" received FIN.
2023-11-27 18:45:22.334 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:45:22.368 +01:00 [DBG] Connection id "0HMVFE2GJBBEM" stopped.
2023-11-27 18:45:22.372 +01:00 [DBG] Connection id "0HMVFE2GJBBEM" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:45:29.141 +01:00 [DBG] Connection id "0HMVFE2GJBBEN" accepted.
2023-11-27 18:45:29.141 +01:00 [DBG] Connection id "0HMVFE2GJBBEN" received FIN.
2023-11-27 18:45:29.143 +01:00 [DBG] Connection id "0HMVFE2GJBBEN" started.
2023-11-27 18:45:29.148 +01:00 [DBG] Connection id "0HMVFE2GJBBEO" accepted.
2023-11-27 18:45:29.150 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:45:29.150 +01:00 [DBG] Connection id "0HMVFE2GJBBEO" started.
2023-11-27 18:45:29.156 +01:00 [DBG] Connection id "0HMVFE2GJBBEN" stopped.
2023-11-27 18:45:29.158 +01:00 [DBG] Connection id "0HMVFE2GJBBEN" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:45:29.204 +01:00 [DBG] Connection 0HMVFE2GJBBEO established using the following protocol: "Tls12"
2023-11-27 18:45:29.252 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:45:29.271 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 18:45:29.315 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:45:29.413 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:45:29.421 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:45:29.455 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:45:29.459 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:45:29.496 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:45:29.500 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:45:29.502 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:45:29.504 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:45:29.507 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:45:29.508 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:45:29.511 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:45:29.691 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:45:29.846 +01:00 [DBG] Connection id "0HMVFE2GJBBEP" accepted.
2023-11-27 18:45:29.855 +01:00 [DBG] Connection id "0HMVFE2GJBBEP" started.
2023-11-27 18:45:29.878 +01:00 [DBG] Connection 0HMVFE2GJBBEP established using the following protocol: "Tls12"
2023-11-27 18:45:29.956 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 18:45:30.023 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:45:30.038 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:45:30.043 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:45:30.074 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:45:30.076 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:45:30.078 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:45:30.081 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:45:30.088 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:45:30.091 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:45:30.097 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:45:30.098 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:45:30.100 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:45:30.101 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:45:36.097 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 18:45:36.118 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 18:45:36.131 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 6174.7208ms
2023-11-27 18:45:36.132 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 18:45:36.140 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 8.2343ms
2023-11-27 18:45:36.163 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 18:45:36.280 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 116.9542ms
2023-11-27 18:45:36.347 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 18:45:36.535 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 188.5686ms
2023-11-27 18:45:37.211 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:45:37.347 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:45:37.488 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:45:38.076 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:45:38.142 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:45:38.217 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (63ms).
2023-11-27 18:45:38.236 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:45:38.255 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:45:38.275 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:45:38.427 +01:00 [INF] Executed DbCommand (155ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:45:38.461 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:45:38.507 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:45:38.532 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:45:38.546 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:45:38.565 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:45:38.589 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:45:38.592 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:45:38.599 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:45:38.621 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:45:38.632 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:45:38.634 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:45:38.636 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:45:38.638 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:45:38.641 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:45:38.649 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:45:38.655 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:45:38.657 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:45:38.660 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:46:27.687 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:46:27.693 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:46:27.694 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:46:27.695 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:46:27.697 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:46:27.699 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 18:47:47.967 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 18:47:48.088 +01:00 [DBG] Hosting starting
2023-11-27 18:47:48.209 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 18:47:48.258 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 18:47:48.260 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 18:47:48.261 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 18:47:48.262 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 18:47:48.262 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 18:47:48.263 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 18:47:48.264 +01:00 [INF] Hosting environment: Development
2023-11-27 18:47:48.265 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 18:47:48.266 +01:00 [DBG] Hosting started
2023-11-27 18:47:48.276 +01:00 [DBG] Connection id "0HMVFE3S3CAG8" accepted.
2023-11-27 18:47:48.279 +01:00 [DBG] Connection id "0HMVFE3S3CAG8" started.
2023-11-27 18:47:48.283 +01:00 [DBG] Connection id "0HMVFE3S3CAG9" received FIN.
2023-11-27 18:47:48.284 +01:00 [DBG] Connection id "0HMVFE3S3CAG8" received FIN.
2023-11-27 18:47:48.285 +01:00 [DBG] Connection id "0HMVFE3S3CAG9" accepted.
2023-11-27 18:47:48.287 +01:00 [DBG] Connection id "0HMVFE3S3CAG9" started.
2023-11-27 18:47:48.300 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:47:48.300 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:47:48.335 +01:00 [DBG] Connection id "0HMVFE3S3CAG9" stopped.
2023-11-27 18:47:48.335 +01:00 [DBG] Connection id "0HMVFE3S3CAG8" stopped.
2023-11-27 18:47:48.338 +01:00 [DBG] Connection id "0HMVFE3S3CAG9" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:47:48.338 +01:00 [DBG] Connection id "0HMVFE3S3CAG8" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:47:48.567 +01:00 [DBG] Connection id "0HMVFE3S3CAGA" accepted.
2023-11-27 18:47:48.569 +01:00 [DBG] Connection id "0HMVFE3S3CAGA" started.
2023-11-27 18:47:48.639 +01:00 [DBG] Connection 0HMVFE3S3CAGA established using the following protocol: "Tls12"
2023-11-27 18:47:48.724 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 18:47:48.843 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 18:47:48.952 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 18:47:48.972 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 18:47:48.978 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 259.1004ms
2023-11-27 18:47:48.988 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 18:47:48.988 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 18:47:48.995 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 6.3006ms
2023-11-27 18:47:49.057 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 68.2225ms
2023-11-27 18:47:49.099 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 18:47:49.244 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 144.3800ms
2023-11-27 18:47:54.675 +01:00 [DBG] Connection id "0HMVFE3S3CAGB" accepted.
2023-11-27 18:47:54.677 +01:00 [DBG] Connection id "0HMVFE3S3CAGC" accepted.
2023-11-27 18:47:54.677 +01:00 [DBG] Connection id "0HMVFE3S3CAGB" received FIN.
2023-11-27 18:47:54.677 +01:00 [DBG] Connection id "0HMVFE3S3CAGB" started.
2023-11-27 18:47:54.678 +01:00 [DBG] Connection id "0HMVFE3S3CAGC" started.
2023-11-27 18:47:54.681 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:47:54.689 +01:00 [DBG] Connection id "0HMVFE3S3CAGB" stopped.
2023-11-27 18:47:54.691 +01:00 [DBG] Connection id "0HMVFE3S3CAGB" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:47:54.692 +01:00 [DBG] Connection 0HMVFE3S3CAGC established using the following protocol: "Tls12"
2023-11-27 18:47:54.704 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:47:54.707 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:47:54.738 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:47:54.744 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:47:54.747 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:47:54.750 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:47:54.786 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:47:54.789 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:47:54.790 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:47:54.792 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:47:54.794 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:47:54.796 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:47:54.797 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:47:54.953 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:47:55.226 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:47:55.235 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:47:55.238 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:47:55.241 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:47:55.243 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:47:55.244 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:47:55.247 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:47:55.250 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:47:55.252 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:47:55.254 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:47:55.256 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:47:55.259 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:47:55.261 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:47:56.230 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:47:56.356 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:47:56.501 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:47:56.943 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:47:57.010 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:47:57.076 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (60ms).
2023-11-27 18:47:57.096 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:47:57.114 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:47:57.131 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:47:57.159 +01:00 [INF] Executed DbCommand (33ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:47:57.184 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:47:57.217 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:47:57.237 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:47:57.246 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:47:57.256 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:47:57.265 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:47:57.267 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:47:57.271 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:47:57.281 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:47:57.285 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:47:57.286 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-27 18:47:57.287 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:47:57.289 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:47:57.290 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:47:57.294 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:47:57.297 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:47:57.298 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:47:57.299 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:47:57.329 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:47:57.334 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:47:57.335 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:47:57.336 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:47:57.337 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:47:57.339 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewCityInfo.API.Models.PointOfInterestDto, NewCityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-11-27 18:47:57.495 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2692.8628ms
2023-11-27 18:47:57.498 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:47:57.500 +01:00 [DBG] Connection id "0HMVFE3S3CAGC" completed keep alive response.
2023-11-27 18:47:57.505 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:47:57.510 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 167 application/json;+charset=utf-8 2806.3473ms
2023-11-27 18:49:19.659 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 18:49:19.766 +01:00 [DBG] Hosting starting
2023-11-27 18:49:19.887 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 18:49:19.935 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 18:49:19.936 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 18:49:19.938 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 18:49:19.939 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 18:49:19.939 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 18:49:19.940 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 18:49:19.941 +01:00 [INF] Hosting environment: Development
2023-11-27 18:49:19.942 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 18:49:19.943 +01:00 [DBG] Hosting started
2023-11-27 18:49:20.300 +01:00 [DBG] Connection id "0HMVFE4NH0DQI" received FIN.
2023-11-27 18:49:20.302 +01:00 [DBG] Connection id "0HMVFE4NH0DQI" accepted.
2023-11-27 18:49:20.304 +01:00 [DBG] Connection id "0HMVFE4NH0DQI" started.
2023-11-27 18:49:20.323 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:49:20.355 +01:00 [DBG] Connection id "0HMVFE4NH0DQI" stopped.
2023-11-27 18:49:20.358 +01:00 [DBG] Connection id "0HMVFE4NH0DQI" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:49:20.418 +01:00 [DBG] Connection id "0HMVFE4NH0DQJ" accepted.
2023-11-27 18:49:20.418 +01:00 [DBG] Connection id "0HMVFE4NH0DQJ" received FIN.
2023-11-27 18:49:20.419 +01:00 [DBG] Connection id "0HMVFE4NH0DQJ" started.
2023-11-27 18:49:20.421 +01:00 [DBG] Connection id "0HMVFE4NH0DQK" accepted.
2023-11-27 18:49:20.423 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:49:20.423 +01:00 [DBG] Connection id "0HMVFE4NH0DQK" started.
2023-11-27 18:49:20.428 +01:00 [DBG] Connection id "0HMVFE4NH0DQJ" stopped.
2023-11-27 18:49:20.431 +01:00 [DBG] Connection id "0HMVFE4NH0DQJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:49:20.482 +01:00 [DBG] Connection 0HMVFE4NH0DQK established using the following protocol: "Tls12"
2023-11-27 18:49:20.525 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:49:20.542 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 18:49:20.589 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:49:20.620 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:49:20.626 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:49:20.628 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:49:20.632 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:49:20.661 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:49:20.664 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:49:20.666 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:49:20.667 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:49:20.670 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:49:20.672 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:49:20.675 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:49:20.808 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:49:20.978 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:49:20.988 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:49:20.991 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:49:20.993 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:49:20.994 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:49:20.996 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:49:20.999 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:49:21.002 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:49:21.003 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:49:21.006 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:49:21.007 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:49:21.008 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:49:21.010 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:49:21.900 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:49:21.998 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:49:22.105 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:49:22.466 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:49:22.546 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:49:22.623 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (71ms).
2023-11-27 18:49:22.643 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:49:22.663 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:49:22.680 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:49:22.708 +01:00 [INF] Executed DbCommand (34ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:49:22.736 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:49:22.772 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:49:22.790 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:49:22.799 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:49:22.811 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:49:22.818 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:49:22.820 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:49:22.823 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:49:22.833 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:49:22.836 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:49:22.837 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-27 18:49:22.838 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:49:22.840 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:49:22.841 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:49:22.844 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:49:22.846 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:49:22.847 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:49:22.848 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:49:22.882 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:49:22.889 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:49:22.891 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:49:22.893 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:49:22.895 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:49:22.898 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 18:49:23.049 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2369.2307ms
2023-11-27 18:49:23.051 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:49:23.053 +01:00 [DBG] Connection id "0HMVFE4NH0DQK" completed keep alive response.
2023-11-27 18:49:23.059 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:49:23.065 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 2543.4089ms
2023-11-27 18:49:29.451 +01:00 [DBG] Connection id "0HMVFE4NH0DQL" accepted.
2023-11-27 18:49:29.453 +01:00 [DBG] Connection id "0HMVFE4NH0DQL" started.
2023-11-27 18:49:29.467 +01:00 [DBG] Connection 0HMVFE4NH0DQL established using the following protocol: "Tls12"
2023-11-27 18:49:29.535 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 18:49:29.729 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 18:49:29.755 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 18:49:29.762 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 227.7121ms
2023-11-27 18:49:29.792 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 18:49:29.795 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 18:49:29.801 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 9.1966ms
2023-11-27 18:49:29.872 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 77.4002ms
2023-11-27 18:49:29.924 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 18:49:30.092 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 168.4528ms
2023-11-27 18:49:31.937 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:49:31.939 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:49:31.941 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:49:31.942 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:49:31.946 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:49:31.949 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:49:31.951 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:49:31.955 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:49:31.956 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:49:31.958 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:49:31.961 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:49:31.964 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:49:31.966 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:49:31.976 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:49:31.978 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:49:31.980 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:49:31.981 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:49:31.983 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:49:31.984 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:49:31.985 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:49:31.986 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:49:31.988 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:49:31.989 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:49:31.991 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:49:31.992 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:49:31.993 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:49:31.996 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:49:32.002 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:49:32.003 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:49:32.004 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:49:32.005 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:49:32.007 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:49:32.010 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:49:32.012 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:49:32.014 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:49:32.015 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:49:32.017 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:49:32.018 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:49:32.019 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:49:32.021 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:49:32.022 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-11-27 18:49:32.023 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:49:32.024 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:49:32.026 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:49:32.029 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:49:32.032 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:49:32.033 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:49:32.034 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:49:32.036 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:49:32.039 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:49:32.039 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:49:32.040 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:49:32.041 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:49:32.043 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 18:49:32.045 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 78.4254ms
2023-11-27 18:49:32.046 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:49:32.048 +01:00 [DBG] Connection id "0HMVFE4NH0DQK" completed keep alive response.
2023-11-27 18:49:32.049 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:49:32.050 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 112.4417ms
2023-11-27 18:51:34.798 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:51:35.458 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:51:35.496 +01:00 [DBG] Migrating using database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:51:35.502 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:51:35.512 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:51:35.524 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-11-27 18:51:35.533 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (4ms).
2023-11-27 18:51:35.534 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:51:35.537 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:51:35.543 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 18:51:35.561 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 18:51:35.563 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:51:35.567 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:51:35.568 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:51:35.569 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:51:35.569 +01:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-11-27 18:51:35.569 +01:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2023-11-27 18:51:35.569 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:51:35.569 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:51:35.569 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 18:51:35.570 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2023-11-27 18:51:35.570 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:51:35.570 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:51:35.582 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:51:35.582 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-27 18:51:35.582 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:51:35.582 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:51:35.583 +01:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-11-27 18:51:35.583 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2023-11-27 18:51:35.585 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:51:35.585 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:51:35.585 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:51:35.598 +01:00 [INF] No migrations were applied. The database is already up to date.
2023-11-27 18:51:35.599 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:51:41.380 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 18:51:41.485 +01:00 [DBG] Hosting starting
2023-11-27 18:51:41.609 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 18:51:41.664 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 18:51:41.665 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 18:51:41.666 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 18:51:41.666 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 18:51:41.667 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 18:51:41.668 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 18:51:41.669 +01:00 [INF] Hosting environment: Development
2023-11-27 18:51:41.669 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 18:51:41.670 +01:00 [DBG] Hosting started
2023-11-27 18:51:42.076 +01:00 [DBG] Connection id "0HMVFE61P2C5T" accepted.
2023-11-27 18:51:42.076 +01:00 [DBG] Connection id "0HMVFE61P2C5U" accepted.
2023-11-27 18:51:42.078 +01:00 [DBG] Connection id "0HMVFE61P2C5U" started.
2023-11-27 18:51:42.078 +01:00 [DBG] Connection id "0HMVFE61P2C5T" started.
2023-11-27 18:51:42.084 +01:00 [DBG] Connection id "0HMVFE61P2C5U" received FIN.
2023-11-27 18:51:42.084 +01:00 [DBG] Connection id "0HMVFE61P2C5T" received FIN.
2023-11-27 18:51:42.100 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:51:42.100 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:51:42.132 +01:00 [DBG] Connection id "0HMVFE61P2C5U" stopped.
2023-11-27 18:51:42.132 +01:00 [DBG] Connection id "0HMVFE61P2C5T" stopped.
2023-11-27 18:51:42.135 +01:00 [DBG] Connection id "0HMVFE61P2C5U" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:51:42.135 +01:00 [DBG] Connection id "0HMVFE61P2C5T" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:51:45.643 +01:00 [DBG] Connection id "0HMVFE61P2C5V" accepted.
2023-11-27 18:51:45.643 +01:00 [DBG] Connection id "0HMVFE61P2C5V" received FIN.
2023-11-27 18:51:45.644 +01:00 [DBG] Connection id "0HMVFE61P2C5V" started.
2023-11-27 18:51:45.647 +01:00 [DBG] Connection id "0HMVFE61P2C60" accepted.
2023-11-27 18:51:45.649 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:51:45.650 +01:00 [DBG] Connection id "0HMVFE61P2C60" started.
2023-11-27 18:51:45.657 +01:00 [DBG] Connection id "0HMVFE61P2C5V" stopped.
2023-11-27 18:51:45.659 +01:00 [DBG] Connection id "0HMVFE61P2C5V" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:51:45.706 +01:00 [DBG] Connection 0HMVFE61P2C60 established using the following protocol: "Tls12"
2023-11-27 18:51:45.759 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:51:45.778 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 18:51:45.824 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:51:45.862 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:51:45.873 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:51:45.877 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:51:45.881 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:51:45.919 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:51:45.922 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:51:45.924 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:51:45.926 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:51:45.930 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:51:45.932 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:51:45.935 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:51:46.139 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:51:46.367 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:51:46.378 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:51:46.381 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:51:46.384 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:51:46.385 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:51:46.386 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:51:46.388 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:51:46.392 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:51:46.394 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:51:46.397 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:51:46.399 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:51:46.400 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:51:46.402 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:51:47.522 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:51:47.623 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:51:47.746 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:51:48.204 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:51:48.307 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:51:48.394 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (81ms).
2023-11-27 18:51:48.416 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:51:48.446 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:51:48.469 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:51:48.501 +01:00 [INF] Executed DbCommand (39ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:51:48.523 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:51:48.554 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:51:48.572 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:51:48.583 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:51:48.595 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:51:48.601 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:51:48.603 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:51:48.606 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:51:48.620 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:51:48.626 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:51:48.627 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-27 18:51:48.628 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:51:48.630 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:51:48.631 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:51:48.634 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:51:48.638 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:51:48.638 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:51:48.641 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:51:48.682 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:51:48.688 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:51:48.689 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:51:48.690 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:51:48.692 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:51:48.694 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 18:51:48.884 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2942.5978ms
2023-11-27 18:51:48.887 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:51:48.888 +01:00 [DBG] Connection id "0HMVFE61P2C60" completed keep alive response.
2023-11-27 18:51:48.897 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:51:48.903 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 3149.1097ms
2023-11-27 18:51:49.040 +01:00 [DBG] Connection id "0HMVFE61P2C61" accepted.
2023-11-27 18:51:49.041 +01:00 [DBG] Connection id "0HMVFE61P2C61" started.
2023-11-27 18:51:49.108 +01:00 [DBG] Connection 0HMVFE61P2C61 established using the following protocol: "Tls12"
2023-11-27 18:51:49.139 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 18:51:49.318 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 18:51:49.339 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 18:51:49.344 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 205.3577ms
2023-11-27 18:51:49.358 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 18:51:49.359 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 18:51:49.366 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 6.5622ms
2023-11-27 18:51:49.427 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 69.0772ms
2023-11-27 18:51:49.469 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 18:51:49.593 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 124.2914ms
2023-11-27 18:55:23.809 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 18:55:23.917 +01:00 [DBG] Hosting starting
2023-11-27 18:55:24.057 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 18:55:24.108 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 18:55:24.109 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 18:55:24.110 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 18:55:24.111 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 18:55:24.112 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 18:55:24.113 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 18:55:24.114 +01:00 [INF] Hosting environment: Development
2023-11-27 18:55:24.115 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 18:55:24.116 +01:00 [DBG] Hosting started
2023-11-27 18:55:24.290 +01:00 [DBG] Connection id "0HMVFE8409LUD" received FIN.
2023-11-27 18:55:24.300 +01:00 [DBG] Connection id "0HMVFE8409LUD" accepted.
2023-11-27 18:55:24.302 +01:00 [DBG] Connection id "0HMVFE8409LUD" started.
2023-11-27 18:55:24.319 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:55:24.354 +01:00 [DBG] Connection id "0HMVFE8409LUD" stopped.
2023-11-27 18:55:24.359 +01:00 [DBG] Connection id "0HMVFE8409LUD" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:55:25.698 +01:00 [DBG] Connection id "0HMVFE8409LUE" accepted.
2023-11-27 18:55:25.698 +01:00 [DBG] Connection id "0HMVFE8409LUE" received FIN.
2023-11-27 18:55:25.699 +01:00 [DBG] Connection id "0HMVFE8409LUE" started.
2023-11-27 18:55:25.703 +01:00 [DBG] Connection id "0HMVFE8409LUF" accepted.
2023-11-27 18:55:25.705 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 18:55:25.706 +01:00 [DBG] Connection id "0HMVFE8409LUF" started.
2023-11-27 18:55:25.712 +01:00 [DBG] Connection id "0HMVFE8409LUE" stopped.
2023-11-27 18:55:25.715 +01:00 [DBG] Connection id "0HMVFE8409LUE" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 18:55:25.752 +01:00 [DBG] Connection 0HMVFE8409LUF established using the following protocol: "Tls12"
2023-11-27 18:55:25.791 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 18:55:25.808 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 18:55:25.848 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 18:55:25.876 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 18:55:25.882 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 18:55:25.885 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:55:25.889 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:55:25.918 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 18:55:25.921 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 18:55:25.924 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 18:55:25.926 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 18:55:25.928 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 18:55:25.930 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 18:55:25.932 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:55:26.072 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 18:55:26.233 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 18:55:26.242 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:55:26.245 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 18:55:26.247 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:55:26.248 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:55:26.250 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 18:55:26.254 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 18:55:26.258 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:55:26.261 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 18:55:26.264 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:55:26.266 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:55:26.269 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 18:55:26.271 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 18:55:27.202 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 18:55:27.293 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:55:27.414 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:55:27.786 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:55:27.853 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:55:27.918 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (60ms).
2023-11-27 18:55:27.935 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:55:27.957 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:55:27.975 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:55:28.003 +01:00 [INF] Executed DbCommand (35ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 18:55:28.042 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:55:28.086 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:55:28.113 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 18:55:28.127 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:55:28.138 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:55:28.148 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:55:28.150 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 18:55:28.153 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 18:55:28.167 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 18:55:28.171 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 18:55:28.172 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-27 18:55:28.173 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:55:28.175 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:55:28.177 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:55:28.180 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 18:55:28.183 +01:00 [DBG] A data reader was disposed.
2023-11-27 18:55:28.184 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 18:55:28.186 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 18:55:28.218 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 18:55:28.223 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 18:55:28.224 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 18:55:28.225 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 18:55:28.226 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 18:55:28.228 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 18:55:28.382 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2446.0756ms
2023-11-27 18:55:28.385 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 18:55:28.387 +01:00 [DBG] Connection id "0HMVFE8409LUF" completed keep alive response.
2023-11-27 18:55:28.393 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 18:55:28.398 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 80 application/json;+charset=utf-8 2610.8664ms
2023-11-27 19:06:05.806 +01:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-11-27 19:06:05.978 +01:00 [DBG] Hosting starting
2023-11-27 19:06:06.132 +01:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 74771C93211CFD306FF4266F6451FEA749179ACD)
2023-11-27 19:06:06.188 +01:00 [INF] Now listening on: https://localhost:7165
2023-11-27 19:06:06.189 +01:00 [INF] Now listening on: http://localhost:5029
2023-11-27 19:06:06.190 +01:00 [DBG] Loaded hosting startup assembly NewCityInfo.API
2023-11-27 19:06:06.191 +01:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-11-27 19:06:06.192 +01:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-11-27 19:06:06.193 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2023-11-27 19:06:06.194 +01:00 [INF] Hosting environment: Development
2023-11-27 19:06:06.195 +01:00 [INF] Content root path: C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\
2023-11-27 19:06:06.196 +01:00 [DBG] Hosting started
2023-11-27 19:06:06.357 +01:00 [DBG] Connection id "0HMVFEE3BH0IG" received FIN.
2023-11-27 19:06:06.357 +01:00 [DBG] Connection id "0HMVFEE3BH0IF" received FIN.
2023-11-27 19:06:06.369 +01:00 [DBG] Connection id "0HMVFEE3BH0IG" accepted.
2023-11-27 19:06:06.369 +01:00 [DBG] Connection id "0HMVFEE3BH0IF" accepted.
2023-11-27 19:06:06.371 +01:00 [DBG] Connection id "0HMVFEE3BH0IG" started.
2023-11-27 19:06:06.371 +01:00 [DBG] Connection id "0HMVFEE3BH0IF" started.
2023-11-27 19:06:06.392 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 19:06:06.392 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 19:06:06.431 +01:00 [DBG] Connection id "0HMVFEE3BH0IF" stopped.
2023-11-27 19:06:06.431 +01:00 [DBG] Connection id "0HMVFEE3BH0IG" stopped.
2023-11-27 19:06:06.437 +01:00 [DBG] Connection id "0HMVFEE3BH0IF" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 19:06:06.437 +01:00 [DBG] Connection id "0HMVFEE3BH0IG" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 19:06:10.816 +01:00 [DBG] Connection id "0HMVFEE3BH0IH" accepted.
2023-11-27 19:06:10.816 +01:00 [DBG] Connection id "0HMVFEE3BH0IH" received FIN.
2023-11-27 19:06:10.817 +01:00 [DBG] Connection id "0HMVFEE3BH0IH" started.
2023-11-27 19:06:10.822 +01:00 [DBG] Connection id "0HMVFEE3BH0II" accepted.
2023-11-27 19:06:10.823 +01:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, Boolean isApm, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-11-27 19:06:10.824 +01:00 [DBG] Connection id "0HMVFEE3BH0II" started.
2023-11-27 19:06:10.828 +01:00 [DBG] Connection id "0HMVFEE3BH0IH" stopped.
2023-11-27 19:06:10.830 +01:00 [DBG] Connection id "0HMVFEE3BH0IH" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 19:06:10.875 +01:00 [DBG] Connection 0HMVFEE3BH0II established using the following protocol: "Tls12"
2023-11-27 19:06:10.924 +01:00 [INF] Request starting HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - -
2023-11-27 19:06:10.946 +01:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-11-27 19:06:10.997 +01:00 [DBG] The request path  does not match the path filter
2023-11-27 19:06:11.034 +01:00 [DBG] 1 candidate(s) found for the request path '/api/cities/2'
2023-11-27 19:06:11.043 +01:00 [DBG] Endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/2'
2023-11-27 19:06:11.045 +01:00 [DBG] Request matched endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 19:06:11.048 +01:00 [INF] Executing endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 19:06:11.084 +01:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API).
2023-11-27 19:06:11.088 +01:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-11-27 19:06:11.089 +01:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-11-27 19:06:11.091 +01:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-11-27 19:06:11.094 +01:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-11-27 19:06:11.095 +01:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-11-27 19:06:11.098 +01:00 [DBG] Executing controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 19:06:11.269 +01:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-27 19:06:11.468 +01:00 [DBG] Executed controller factory for controller NewCityInfo.API.Controllers.CitiesController (NewCityInfo.API)
2023-11-27 19:06:11.477 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-11-27 19:06:11.480 +01:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-11-27 19:06:11.481 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 19:06:11.482 +01:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-11-27 19:06:11.483 +01:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-11-27 19:06:11.486 +01:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-11-27 19:06:11.490 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 19:06:11.491 +01:00 [DBG] Attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean' using the name 'includePopintOfInterest' in request data ...
2023-11-27 19:06:11.493 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 19:06:11.494 +01:00 [DBG] Done attempting to bind parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 19:06:11.495 +01:00 [DBG] Attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean' ...
2023-11-27 19:06:11.496 +01:00 [DBG] Done attempting to validate the bound parameter 'includePopintOfInterest' of type 'System.Boolean'.
2023-11-27 19:06:12.521 +01:00 [INF] Entity Framework Core 6.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.0' with options: None
2023-11-27 19:06:12.594 +01:00 [DBG] Connection id "0HMVFEE3BH0IJ" accepted.
2023-11-27 19:06:12.598 +01:00 [DBG] Connection id "0HMVFEE3BH0IJ" started.
2023-11-27 19:06:12.615 +01:00 [DBG] Connection 0HMVFEE3BH0IJ established using the following protocol: "Tls12"
2023-11-27 19:06:12.666 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 19:06:12.691 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/index.html - -
2023-11-27 19:06:12.859 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 19:06:12.909 +01:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-11-27 19:06:12.939 +01:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-11-27 19:06:12.950 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/index.html - - - 200 - text/html;charset=utf-8 258.2276ms
2023-11-27 19:06:12.959 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - -
2023-11-27 19:06:12.965 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/_vs/browserLink - -
2023-11-27 19:06:12.986 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_framework/aspnetcore-browser-refresh.js - - - 200 13766 application/javascript;+charset=utf-8 27.1255ms
2023-11-27 19:06:13.078 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 113.1767ms
2023-11-27 19:06:13.141 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - -
2023-11-27 19:06:13.294 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7165/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 152.7671ms
2023-11-27 19:06:13.451 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 19:06:13.535 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 19:06:13.612 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (70ms).
2023-11-27 19:06:13.629 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 19:06:13.648 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 19:06:13.667 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 19:06:13.696 +01:00 [INF] Executed DbCommand (37ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Id"
2023-11-27 19:06:13.727 +01:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 19:06:13.763 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 19:06:13.784 +01:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-11-27 19:06:13.796 +01:00 [DBG] A data reader was disposed.
2023-11-27 19:06:13.809 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 19:06:13.816 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 19:06:13.818 +01:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Include(c => c.pointOfInterestsInCity)
    .OrderBy(c => c.Name)
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-11-27 19:06:13.823 +01:00 [DBG] Including navigation: 'City.pointOfInterestsInCity'.
2023-11-27 19:06:13.837 +01:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: PointOfInterest.CityId (int) Required FK Index, 4], [Property: PointOfInterest.Description (string) Required MaxLength(200), 5], [Property: PointOfInterest.Name (string) Required MaxLength(50), 6] }
                3 -> 3
            SELECT t.Id, t.Description, t.Name, p.Id, p.CityId, p.Description, p.Name
            FROM 
            (
                SELECT TOP(1) c.Id, c.Description, c.Name
                FROM Cities AS c
                WHERE c.Id == @__cityId_0
                ORDER BY c.Name ASC
            ) AS t
            LEFT JOIN PointOfInterests AS p ON t.Id == p.CityId
            ORDER BY t.Name ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        NewCityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-11-27 19:06:13.841 +01:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-27 19:06:13.842 +01:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-27 19:06:13.843 +01:00 [DBG] Opening connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 19:06:13.845 +01:00 [DBG] Opened connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 19:06:13.846 +01:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 19:06:13.849 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Description", "t"."Name", "p"."Id", "p"."CityId", "p"."Description", "p"."Name"
FROM (
    SELECT "c"."Id", "c"."Description", "c"."Name"
    FROM "Cities" AS "c"
    WHERE "c"."Id" = @__cityId_0
    ORDER BY "c"."Name"
    LIMIT 1
) AS "t"
LEFT JOIN "PointOfInterests" AS "p" ON "t"."Id" = "p"."CityId"
ORDER BY "t"."Name", "t"."Id"
2023-11-27 19:06:13.852 +01:00 [DBG] A data reader was disposed.
2023-11-27 19:06:13.854 +01:00 [DBG] Closing connection to database 'main' on server 'C:\Users\Bob\OneDrive\桌面\API\NewCityInfo.API\NewCityInfo.db'.
2023-11-27 19:06:13.855 +01:00 [DBG] Closed connection to database 'main' on server 'NewCityInfo.db'.
2023-11-27 19:06:13.859 +01:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-11-27 19:06:13.864 +01:00 [DBG] No information found on request to perform content negotiation.
2023-11-27 19:06:13.865 +01:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-11-27 19:06:13.866 +01:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-11-27 19:06:13.868 +01:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-11-27 19:06:13.869 +01:00 [INF] Executing OkObjectResult, writing value of type 'NewCityInfo.API.Models.CityDto'.
2023-11-27 19:06:14.048 +01:00 [INF] Executed action NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API) in 2943.7904ms
2023-11-27 19:06:14.050 +01:00 [INF] Executed endpoint 'NewCityInfo.API.Controllers.CitiesController.GetCity (NewCityInfo.API)'
2023-11-27 19:06:14.051 +01:00 [DBG] Connection id "0HMVFEE3BH0II" completed keep alive response.
2023-11-27 19:06:14.058 +01:00 [DBG] 'CityInfoContext' disposed.
2023-11-27 19:06:14.064 +01:00 [INF] Request finished HTTP/1.1 GET https://localhost:7165/api/cities/2?includePopintOfInterest=true - - - 200 245 application/json;+charset=utf-8 3144.6240ms
2023-11-27 19:06:19.791 +01:00 [DBG] Connection id "0HMVFEE3BH0II" received FIN.
2023-11-27 19:06:19.793 +01:00 [DBG] Connection id "0HMVFEE3BH0II" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-11-27 19:06:19.796 +01:00 [DBG] Connection id "0HMVFEE3BH0II" disconnecting.
2023-11-27 19:06:19.815 +01:00 [DBG] Connection id "0HMVFEE3BH0II" stopped.
